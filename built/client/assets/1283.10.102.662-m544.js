(self.webpackChunkmisskey=self.webpackChunkmisskey||[]).push([[1283],{96468:(e,s,t)=>{var i=t(11063),d=t(26143)(i);d.push([e.id,".mkw-slideshow[data-v-ad9dedd4]{background:#fff;border:1px solid rgba(0,0,0,.075);border-radius:6px;overflow:hidden}.mkw-slideshow[data-mobile][data-v-ad9dedd4]{border:none;border-radius:8px;box-shadow:0 0 0 1px rgba(0,0,0,.2)}.mkw-slideshow>div[data-v-ad9dedd4]{cursor:pointer;height:100%;width:100%}.mkw-slideshow>div>p[data-v-ad9dedd4]{color:#888;display:block;margin:1em;text-align:center}.mkw-slideshow>div>*[data-v-ad9dedd4]{pointer-events:none}.mkw-slideshow>div>.slide[data-v-ad9dedd4]{background-position:50%;background-size:cover;height:100%;left:0;position:absolute;top:0;width:100%}.mkw-slideshow>div>.slide.b[data-v-ad9dedd4]{opacity:0}",""]),e.exports=d},7711:(e,s,t)=>{"use strict";t.d(s,{Z:()=>d});var i=t(31508);function d(e){return i.ZP.extend({props:{widget:{type:Object},column:{type:Object,default:null},platform:{type:String,required:!0},isCustomizeMode:{type:Boolean,default:!1}},computed:{id(){return this.widget.id},props(){return this.widget.data}},data:()=>({bakedOldProps:null}),created(){this.mergeProps(),this.$watch("props",(()=>{this.mergeProps()})),this.bakeProps()},methods:{bakeProps(){this.bakedOldProps=JSON.stringify(this.props)},mergeProps(){if(e.props){const s=e.props();for(const e of Object.keys(s))this.props.hasOwnProperty(e)||i.ZP.set(this.props,e,s[e])}},save(){this.bakedOldProps!=JSON.stringify(this.props)&&(this.bakeProps(),"deck"==this.platform?this.$store.commit("device/updateDeckColumn",this.column):this.$root.api("i/update_widget",{id:this.id,data:this.props}))}}})}},1283:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});var i=t(89615),d=t(7711),o=t(46813);const r=(0,d.Z)({name:"slideshow",props:()=>({folder:void 0,size:0})}).extend({i18n:(0,o.Z)("common/views/widgets/slideshow.vue"),data:()=>({images:[],fetching:!0,clock:null}),mounted(){this.$nextTick((()=>{this.applySize()})),void 0!==this.props.folder&&this.fetch(),this.clock=setInterval(this.change,1e4)},beforeDestroy(){clearInterval(this.clock)},methods:{func(){this.resize()},applySize(){let e;e=1==this.props.size?250:170,this.$el.style.height=`${e}px`},resize(){1==this.props.size?this.props.size=0:this.props.size++,this.save(),this.applySize()},change(){if(0==this.images.length)return;const e=Math.floor(Math.random()*this.images.length),s=`url(${this.images[e].url})`;this.$refs.slideB.style.backgroundImage=s,(0,i.Z)({targets:this.$refs.slideB,opacity:1,duration:1e3,easing:"linear",complete:()=>{null!=this.$refs.slideA&&(this.$refs.slideA.style.backgroundImage=s,(0,i.Z)({targets:this.$refs.slideB,opacity:0,duration:0}))}})},fetch(){this.fetching=!0,this.$root.api("drive/files",{folderId:this.props.folder,type:"image/*",limit:100}).then((e=>{this.images=e,this.fetching=!1,this.$refs.slideA.style.backgroundImage="",this.$refs.slideB.style.backgroundImage="",this.change()}))},choose(){this.$chooseDriveFolder().then((e=>{this.props.folder=e?e.id:null,this.save(),this.fetch()}))}}});t(80131);const a=(0,t(26385).Z)(r,(function(){var e=this,s=e._self._c;e._self._setupProxy;return s("div",{staticClass:"mkw-slideshow",attrs:{"data-mobile":"mobile"==e.platform}},[s("div",{on:{click:e.choose}},[void 0===e.props.folder?s("p",[e.isCustomizeMode?[e._v(e._s(e.$t("folder-customize-mode")))]:[e._v(e._s(e.$t("folder")))]],2):e._e(),void 0===e.props.folder||0!=e.images.length||e.fetching?e._e():s("p",[e._v(e._s(e.$t("no-image")))]),s("div",{ref:"slideA",staticClass:"slide a"}),s("div",{ref:"slideB",staticClass:"slide b"})])])}),[],!1,null,"ad9dedd4",null).exports},80131:(e,s,t)=>{var i=t(96468);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,t(80950).Z)("01045ab5",i,!0,{})}}]);