(self.webpackChunkmisskey=self.webpackChunkmisskey||[]).push([[1488],{79765:(e,a,t)=>{var s=t(11063),r=t(26143)(s);r.push([e.id,".syxhndwprovvuqhmyvveewmbqayniwkv[data-v-6e175fa5]{color:var(--text);margin:0 auto;max-width:500px;padding:32px;text-align:center}@media (max-width:400px){.syxhndwprovvuqhmyvveewmbqayniwkv[data-v-6e175fa5]{padding:16px}}.syxhndwprovvuqhmyvveewmbqayniwkv>.signed-in-as[data-v-6e175fa5]{font-size:14px;font-weight:700;margin-bottom:16px}.syxhndwprovvuqhmyvveewmbqayniwkv>main[data-v-6e175fa5]{background:var(--face);border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,.1);margin-bottom:16px;overflow:hidden}.syxhndwprovvuqhmyvveewmbqayniwkv>main>.banner[data-v-6e175fa5]{background-position:50%;background-size:cover;height:128px}.syxhndwprovvuqhmyvveewmbqayniwkv>main>.avatar[data-v-6e175fa5]{border:4px solid var(--face);border-radius:100%;display:block;height:100px;margin:-50px auto 0;width:100px}.syxhndwprovvuqhmyvveewmbqayniwkv>main>.body[data-v-6e175fa5]{padding:4px 32px 32px}@media (max-width:400px){.syxhndwprovvuqhmyvveewmbqayniwkv>main>.body[data-v-6e175fa5]{padding:4px 16px 16px}}.syxhndwprovvuqhmyvveewmbqayniwkv>main>.body>.name[data-v-6e175fa5]{font-size:20px;font-weight:700}.syxhndwprovvuqhmyvveewmbqayniwkv>main>.body>.username[data-v-6e175fa5]{display:block;opacity:.7}.syxhndwprovvuqhmyvveewmbqayniwkv>main>.body>.description[data-v-6e175fa5]{margin-top:16px}.syxhndwprovvuqhmyvveewmbqayniwkv>button[data-v-6e175fa5]{background:transparent;border:1px solid var(--primary);border-radius:36px;color:var(--primary);cursor:pointer;display:block;font-size:14px;font-weight:700;margin:0;min-width:150px;outline:none;padding:10px 16px;user-select:none;width:100%}.syxhndwprovvuqhmyvveewmbqayniwkv>button[data-v-6e175fa5]:hover{background:var(--primaryAlpha01)}.syxhndwprovvuqhmyvveewmbqayniwkv>button[data-v-6e175fa5]:active{background:var(--primaryAlpha02)}.syxhndwprovvuqhmyvveewmbqayniwkv>button.active[data-v-6e175fa5]{background:var(--primary);color:var(--primaryForeground)}.syxhndwprovvuqhmyvveewmbqayniwkv>button.active[data-v-6e175fa5]:hover{background:var(--primaryLighten10);border-color:var(--primaryLighten10)}.syxhndwprovvuqhmyvveewmbqayniwkv>button.active[data-v-6e175fa5]:active{background:var(--primaryDarken10);border-color:var(--primaryDarken10)}.syxhndwprovvuqhmyvveewmbqayniwkv>button.wait[data-v-6e175fa5]{cursor:wait!important;opacity:.7}.syxhndwprovvuqhmyvveewmbqayniwkv>button *[data-v-6e175fa5]{pointer-events:none}",""]),e.exports=r},31488:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>v});var s=t(31508),r=t(46813),o=t(68103),i=t(87186);const n=s.ZP.extend({i18n:(0,r.Z)("common/views/pages/follow.vue"),data:()=>({fetching:!0,user:null,followWait:!1}),computed:{myName(){return s.ZP.filter("userName")(this.$store.state.i)},bannerStyle(){return null==this.user.bannerUrl?{}:{backgroundColor:this.user.bannerColor&&3==this.user.bannerColor.length?`rgb(${this.user.bannerColor.join(",")})`:null,backgroundImage:`url(${this.user.bannerUrl})`}}},created(){this.fetch()},methods:{fetch(){const e=new URL(location.href).searchParams.get("acct");this.fetching=!0,i.Z.start(),e.match(/^https?:/)?this.$root.api("ap/show",{uri:e}).then((e=>{"User"===e.type?this.user=e.object:"Note"===e.type?this.$router.push(`/notes/${e.object.id}`):"Emoji"===e.type?this.$root.dialog({type:"success",text:`:${e.object.name}:`,mfmCustomEmojis:[e.object]}):this.$root.dialog({type:"error",text:"not supported"})})).catch((e=>{this.$root.dialog({type:"error",text:e.message})})).finally((()=>{this.fetching=!1,i.Z.done()})):this.$root.api("users/show",(0,o.Z)(e)).then((e=>{this.user=e})).catch((e=>{this.$root.dialog({type:"error",text:e.message})})).finally((()=>{this.fetching=!1,i.Z.done()}))},async onClick(){this.followWait=!0;try{this.user.isFollowing?this.user=await this.$root.api("following/delete",{userId:this.user.id}):this.user.hasPendingFollowRequestFromYou?this.user=await this.$root.api("following/requests/cancel",{userId:this.user.id}):(this.user.isLocked,this.user=await this.$root.api("following/create",{userId:this.user.id}))}catch(e){console.error(e)}finally{this.followWait=!1}}}});t(91902);const v=(0,t(26385).Z)(n,(function(){var e=this,a=e._self._c;e._self._setupProxy;return e.fetching?e._e():a("div",{staticClass:"syxhndwprovvuqhmyvveewmbqayniwkv"},[a("div",{staticClass:"signed-in-as"},[a("mfm",{attrs:{text:e.$t("signed-in-as").replace("{}",e.myName),plain:!0,"custom-emojis":e.$store.state.i.emojis}})],1),a("main",[a("div",{staticClass:"banner",style:e.bannerStyle}),a("mk-avatar",{staticClass:"avatar",attrs:{user:e.user,"disable-preview":!0}}),a("div",{staticClass:"body"},[a("router-link",{staticClass:"name",attrs:{to:e._f("userPage")(e.user)}},[a("mk-user-name",{attrs:{user:e.user}})],1),a("span",{staticClass:"username"},[e._v("@"+e._s(e._f("acct")(e.user)))]),a("div",{staticClass:"description"},[e.user.description?a("mfm",{attrs:{text:e.user.description,"is-note":!1,author:e.user,i:e.$store.state.i,"custom-emojis":e.user.emojis}}):e._e()],1)],1)],1),a("button",{class:{wait:e.followWait,active:e.user.isFollowing||e.user.hasPendingFollowRequestFromYou},attrs:{disabled:e.followWait},on:{click:e.onClick}},[e.followWait?[a("fa",{attrs:{icon:"spinner",pulse:"","fixed-width":""}})]:[e.user.hasPendingFollowRequestFromYou&&e.user.isLocked?[a("fa",{attrs:{icon:"hourglass-half"}}),e._v(" "+e._s(e.$t("request-pending")))]:e.user.hasPendingFollowRequestFromYou&&!e.user.isLocked?[a("fa",{attrs:{icon:"spinner"}}),e._v(" "+e._s(e.$t("follow-processing")))]:e.user.isFollowing?[a("fa",{attrs:{icon:"minus"}}),e._v(" "+e._s(e.$t("following")))]:!e.user.isFollowing&&e.user.isLocked?[a("fa",{attrs:{icon:"plus"}}),e._v(" "+e._s(e.$t("follow-request")))]:e.user.isFollowing||e.user.isLocked?e._e():[a("fa",{attrs:{icon:"plus"}}),e._v(" "+e._s(e.$t("follow")))]]],2)])}),[],!1,null,"6e175fa5",null).exports},91902:(e,a,t)=>{var s=t(79765);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);(0,t(80950).Z)("df88567a",s,!0,{})}}]);