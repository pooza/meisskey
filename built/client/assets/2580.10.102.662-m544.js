(self.webpackChunkmisskey=self.webpackChunkmisskey||[]).push([[2580],{19949:(t,i,e)=>{var a=e(11063),o=e(26143)(a);o.push([t.id,".zdjebgpv[data-v-77a63a35]{display:flex}.zdjebgpv>.icon[data-v-77a63a35],.zdjebgpv>img[data-v-77a63a35]{pointer-events:none}.zdjebgpv>.icon-sub[data-v-77a63a35]{bottom:4%;height:auto;margin:0;position:absolute;right:4%;width:30%}.zdjebgpv>*[data-v-77a63a35]{margin:auto}.zdjebgpv:not(.detail)>img[data-v-77a63a35]{height:100%;object-fit:cover;width:100%}.zdjebgpv:not(.detail)>.icon[data-v-77a63a35]{height:65%;width:65%}.zdjebgpv:not(.detail)>audio[data-v-77a63a35],.zdjebgpv:not(.detail)>video[data-v-77a63a35]{width:100%}.zdjebgpv.detail>.icon[data-v-77a63a35]{height:100px;margin:16px;width:100px}.zdjebgpv.detail[data-v-77a63a35]>:not(.icon){height:100%;max-height:300px;max-width:100%;object-fit:contain}",""]),t.exports=o},2105:(t,i,e)=>{var a=e(11063),o=e(26143)(a);o.push([t.id,".skeikyzd[data-v-2056a143]{padding:4px}.skeikyzd>.files[data-v-2056a143]{display:flex;flex-wrap:wrap}.skeikyzd>.files>div[data-v-2056a143]{cursor:move;height:64px;margin:4px;width:64px}.skeikyzd>.files>div:hover>.remove[data-v-2056a143]{display:block}.skeikyzd>.files>div>.thumbnail[data-v-2056a143]{background-color:hsla(0,0%,50%,.3);color:var(--text);height:100%;width:100%;z-index:1}.skeikyzd>.files>div>.remove[data-v-2056a143]{cursor:pointer;display:none;height:16px;position:absolute;right:-6px;top:-6px;width:16px;z-index:1000}.skeikyzd>.files>div>.sensitive[data-v-2056a143]{background:hsla(0,0%,7%,.7);color:#fff;display:flex;height:64px;left:0;position:absolute;top:0;width:64px;z-index:2}.skeikyzd>.files>div>.sensitive>.icon[data-v-2056a143]{margin:auto}.skeikyzd>.remain[data-v-2056a143]{color:var(--primaryAlpha04);display:block;margin:0;padding:0;position:absolute;right:8px;top:8px;z-index:10}",""]),t.exports=o},35198:(t,i,e)=>{var a=e(11063),o=e(26143)(a);o.push([t.id,".gqyayizv[data-v-5799368d]{position:static}.gqyayizv>.backdrop[data-v-5799368d]{background:var(--modalBackdrop);height:100%;left:0;opacity:0;position:fixed;top:0;width:100%;z-index:10000}.gqyayizv>.popover[data-v-5799368d]{background:var(--popupBg);border-radius:4px;box-shadow:0 3px 12px rgba(27,31,35,.15);opacity:0;padding:8px 0;position:absolute;transform:scale(.5);width:240px;z-index:10001}.gqyayizv>.popover>div[data-v-5799368d]{color:var(--popupFg);cursor:pointer;display:flex;font-size:12px;padding:8px 14px}.gqyayizv>.popover>div[data-v-5799368d]:hover{background:var(--faceClearButtonHover)}.gqyayizv>.popover>div[data-v-5799368d]:active{background:var(--faceClearButtonActive)}.gqyayizv>.popover>div.active[data-v-5799368d]{background:var(--primaryDarken5);color:var(--primaryForeground)}.gqyayizv>.popover>div>*[data-v-5799368d]{pointer-events:none;user-select:none}.gqyayizv>.popover>div[data-v-5799368d]>:first-child{align-items:center;display:flex;justify-content:center;margin-right:10px;width:16px}.gqyayizv>.popover>div[data-v-5799368d]>:last-child{flex:1 1 auto}.gqyayizv>.popover>div>:last-child>span[data-v-5799368d]:first-child{display:block;font-weight:700}.gqyayizv>.popover>div>:last-child>span[data-v-5799368d]:last-child:not(:first-child){opacity:.6}",""]),t.exports=o},24216:(t,i,e)=>{var a=e(11063),o=e(26143)(a);o.push([t.id,".lhcuptdmcdkfwmipgazeawoiuxpzaclc-body>.textarea>.emoji[data-v-2a067391]{color:var(--text);font-size:18px;opacity:.5;padding:10px;position:absolute;right:0;top:0}.lhcuptdmcdkfwmipgazeawoiuxpzaclc-body>.textarea>.emoji[data-v-2a067391]:hover{color:var(--textHighlighted);opacity:1}.lhcuptdmcdkfwmipgazeawoiuxpzaclc-body>.textarea>.emoji[data-v-2a067391]:active{color:var(--primary);opacity:1}.lhcuptdmcdkfwmipgazeawoiuxpzaclc-body>.textarea>textarea[data-v-2a067391]{background:var(--desktopPostFormTextareaBg);border:none;border-bottom:1px solid var(--faceDivider);color:var(--desktopPostFormTextareaFg);display:block;max-width:100%;min-width:100%;outline:none;padding:16px 30px 16px 16px;width:100%}.lhcuptdmcdkfwmipgazeawoiuxpzaclc-body>.textarea>textarea:focus+.emoji[data-v-2a067391]{opacity:.7}.lhcuptdmcdkfwmipgazeawoiuxpzaclc-body>input[type=file][data-v-2a067391]{display:none}.lhcuptdmcdkfwmipgazeawoiuxpzaclc-body>footer[data-v-2a067391]{display:flex;padding:8px}.lhcuptdmcdkfwmipgazeawoiuxpzaclc-body>footer>button[data-v-2a067391]:not(.post){color:var(--text);opacity:.7}.lhcuptdmcdkfwmipgazeawoiuxpzaclc-body>footer>button[data-v-2a067391]:not(.post):hover{color:var(--textHighlighted);opacity:1}.lhcuptdmcdkfwmipgazeawoiuxpzaclc-body>footer>.visibility[data-v-2a067391]{margin:0 auto 0 0}.lhcuptdmcdkfwmipgazeawoiuxpzaclc-body>footer .tertiary[data-v-2a067391],.lhcuptdmcdkfwmipgazeawoiuxpzaclc-body>footer>.secondary[data-v-2a067391]{background:var(--buttonBg)!important;border:none;border-radius:4px;color:var(--text);cursor:pointer;display:block;height:28px;margin:0 2px;outline:none;padding:0 10px;transition:background .1s ease}.lhcuptdmcdkfwmipgazeawoiuxpzaclc-body>footer .tertiary[data-v-2a067391]:hover,.lhcuptdmcdkfwmipgazeawoiuxpzaclc-body>footer>.secondary[data-v-2a067391]:hover{background:var(--buttonHoverBg)!important}.lhcuptdmcdkfwmipgazeawoiuxpzaclc-body>footer .tertiary[data-v-2a067391]:active,.lhcuptdmcdkfwmipgazeawoiuxpzaclc-body>footer>.secondary[data-v-2a067391]:active{background:var(--buttonActiveBg)!important}.lhcuptdmcdkfwmipgazeawoiuxpzaclc-body>footer>.post[data-v-2a067391]{background:var(--primary)!important;border:none;border-radius:4px;color:var(--primaryForeground);cursor:pointer;display:block;height:28px;margin-left:3px;outline:none;padding:0 10px;transition:background .1s ease}.lhcuptdmcdkfwmipgazeawoiuxpzaclc-body>footer>.post[data-v-2a067391]:hover{background:var(--primaryLighten10)!important}.lhcuptdmcdkfwmipgazeawoiuxpzaclc-body>footer>.post[data-v-2a067391]:active{background:var(--primaryDarken10)!important;transition:background 0s ease}",""]),t.exports=o},7711:(t,i,e)=>{"use strict";e.d(i,{Z:()=>o});var a=e(31508);function o(t){return a.ZP.extend({props:{widget:{type:Object},column:{type:Object,default:null},platform:{type:String,required:!0},isCustomizeMode:{type:Boolean,default:!1}},computed:{id(){return this.widget.id},props(){return this.widget.data}},data:()=>({bakedOldProps:null}),created(){this.mergeProps(),this.$watch("props",(()=>{this.mergeProps()})),this.bakeProps()},methods:{bakeProps(){this.bakedOldProps=JSON.stringify(this.props)},mergeProps(){if(t.props){const i=t.props();for(const t of Object.keys(i))this.props.hasOwnProperty(t)||a.ZP.set(this.props,t,i[t])}},save(){this.bakedOldProps!=JSON.stringify(this.props)&&(this.bakeProps(),"deck"==this.platform?this.$store.commit("device/updateDeckColumn",this.column):this.$root.api("i/update_widget",{id:this.id,data:this.props}))}}})}},3782:(t,i,e)=>{"use strict";e.d(i,{Z:()=>s});const a=["(=^„Éª„Éª^=)","v('œâ')v","üê°( '-' üê° )ÔæåÔΩ∏ÔæûÔæäÔæüÔæùÔæÅ!!!!","‚úåÔ∏è(¬¥ÔΩ•_ÔΩ•`)‚úåÔ∏è","(ÔΩ°>Ôπè<ÔΩ°)","(Œî„Éªx„ÉªŒî)","( ‚Äòœâ‚Äô Ÿà(Ÿà ‚Äú","‘Ö( ÀòœâÀò ‘Ö)ÔæìÔæêÔæìÔæê"];let o=[];const s=()=>{const t=a[2];let i=a[Math.floor(Math.random()*a.length)];return i!==t&&o.length>=9&&!o.includes(t)&&(i=t),o.unshift(i),o=o.splice(0,9),i}},64687:(t,i,e)=>{"use strict";function a(t){const i=t.match(/^local-(.+)/),e=t.match(/^once-(.+)/);return i?{localOnly:!0,copyOnce:!1,visibility:i[1]}:e?{localOnly:!1,copyOnce:!0,visibility:e[1]}:{localOnly:!1,copyOnce:!1,visibility:t}}e.d(i,{Z:()=>a})},21892:(t,i,e)=>{"use strict";e.d(i,{Z:()=>l});var a=e(31508),o=e(32971);const s=a.ZP.extend({props:{file:{type:Object,required:!0},fit:{type:String,required:!1,default:"cover"},detail:{type:Boolean,required:!1,default:!1}},data:()=>({isContextmenuShowing:!1,isDragging:!1,faFile:o.gMD,faFileAlt:o.cwv,faFileImage:o.Oi0,faMusic:o.Xig,faFileVideo:o.hvm,faFileCsv:o.fUD,faFilePdf:o.gSj,faFileArchive:o.W2U,faFilm:o.CjD}),computed:{is(){return this.file.type.startsWith("image/")?"image":this.file.type.startsWith("video/")?"video":"audio/midi"===this.file.type?"midi":this.file.type.startsWith("audio/")?"audio":this.file.type.endsWith("/csv")?"csv":this.file.type.endsWith("/pdf")?"pdf":this.file.type.startsWith("text/")?"textfile":["application/zip","application/x-cpio","application/x-bzip","application/x-bzip2","application/java-archive","application/x-rar-compressed","application/x-tar","application/gzip","application/x-7z-compressed"].some((t=>t===this.file.type))?"archive":"unknown"},isThumbnailAvailable(){return!!this.file.thumbnailUrl&&(!this.file.thumbnailUrl.endsWith("?thumbnail")||("image"===this.is||"video"===this.is))},background:()=>"transparent"},mounted(){const t=this.$refs.volumectrl;t&&(t.volume=this.$store.state.device.mediaVolume)},methods:{onThumbnailLoaded(){},volumechange(){const t=this.$refs.volumectrl;this.$store.commit("device/set",{key:"mediaVolume",value:t.volume})}}});e(20201);const l=(0,e(26385).Z)(s,(function(){var t=this,i=t._self._c;t._self._setupProxy;return i("div",{ref:"thumbnail",staticClass:"zdjebgpv",class:{detail:t.detail},style:`background-color: ${t.background}`},[t.detail&&"image"===t.is?i("img",{attrs:{src:t.file.webpublicUrl||t.file.url,alt:t.file.name,title:t.file.name},on:{load:t.onThumbnailLoaded}}):t.detail&&"video"===t.is?i("video",{ref:"volumectrl",attrs:{src:t.file.url,preload:"metadata",controls:""}}):t.isThumbnailAvailable?i("img",{style:`object-fit: ${t.fit}`,attrs:{src:t.file.thumbnailUrl,alt:""},on:{load:t.onThumbnailLoaded}}):"image"===t.is?i("fa",{staticClass:"icon",attrs:{icon:t.faFileImage}}):"video"===t.is?i("fa",{staticClass:"icon",attrs:{icon:t.faFileVideo}}):t.detail&&"audio"===t.is?i("audio",{ref:"volumectrl",attrs:{src:t.file.url,preload:"metadata",controls:""}}):"audio"===t.is||"midi"===t.is?i("fa",{staticClass:"icon",attrs:{icon:t.faMusic}}):"csv"===t.is?i("fa",{staticClass:"icon",attrs:{icon:t.faFileCsv}}):"pdf"===t.is?i("fa",{staticClass:"icon",attrs:{icon:t.faFilePdf}}):"textfile"===t.is?i("fa",{staticClass:"icon",attrs:{icon:t.faFileAlt}}):"archive"===t.is?i("fa",{staticClass:"icon",attrs:{icon:t.faFileArchive}}):i("fa",{staticClass:"icon",attrs:{icon:t.faFile}}),!t.detail&&t.isThumbnailAvailable&&"video"===t.is?i("fa",{staticClass:"icon-sub",attrs:{icon:t.faFilm}}):t._e()],1)}),[],!1,null,"77a63a35",null).exports},70390:(t,i,e)=>{"use strict";e.d(i,{Z:()=>h});var a=e(31508),o=e(46813),s=e(77513),l=e.n(s),r=e(62357),n=e(3123),c=e(32971),d=e(21892);const p=a.ZP.extend({i18n:(0,o.Z)("common/views/components/post-form-attaches.vue"),components:{XDraggable:l(),XFileThumbnail:d.Z},props:{files:{type:Array,required:!0},detachMediaFn:{type:Function,required:!1}},data:()=>({faExclamationTriangle:c.eHv}),methods:{detachMedia(t){this.detachMediaFn?this.detachMediaFn(t):this.$parent.detachMedia&&this.$parent.detachMedia(t)},toggleSensitive(t){this.$root.api("drive/files/update",{fileId:t.id,isSensitive:!t.isSensitive}).then((()=>{t.isSensitive=!t.isSensitive}))},showFileMenu(t,i){this.$root.new(r.Z,{items:[{type:"item",text:t.isSensitive?this.$t("unmark-as-sensitive"):this.$t("mark-as-sensitive"),icon:t.isSensitive?n.Aq:n.Md,action:()=>{this.toggleSensitive(t)}},{type:"item",text:this.$t("attach-cancel"),icon:n.nY,action:()=>{this.detachMedia(t.id)}},{type:"item",text:this.$t("attach-delete"),icon:c.NBC,action:()=>{this.detachMedia(t.id),this.$root.api("drive/files/delete",{fileId:t.id})}}],source:i.currentTarget||i.target})}}});e(78748);const h=(0,e(26385).Z)(p,(function(){var t=this,i=t._self._c;t._self._setupProxy;return i("div",{directives:[{name:"show",rawName:"v-show",value:0!=t.files.length,expression:"files.length != 0"}],staticClass:"skeikyzd"},[i("x-draggable",{staticClass:"files",attrs:{list:t.files,options:{animation:150}}},t._l(t.files,(function(e){return i("div",{key:e.id,on:{click:function(i){return t.showFileMenu(e,i)},contextmenu:function(i){return i.preventDefault(),t.showFileMenu(e,i)}}},[i("x-file-thumbnail",{staticClass:"thumbnail",attrs:{"data-id":e.id,file:e,fit:"cover"}}),i("img",{staticClass:"remove",attrs:{src:"/assets/desktop/remove.png",title:t.$t("attach-cancel"),alt:""},on:{click:function(i){return i.stopPropagation(),t.detachMedia(e.id)}}}),e.isSensitive?i("div",{staticClass:"sensitive"},[i("fa",{staticClass:"icon",attrs:{icon:t.faExclamationTriangle}})],1):t._e()],1)})),0),i("p",{staticClass:"remain"},[t._v(t._s(8-t.files.length)+"/8")])],1)}),[],!1,null,"2056a143",null).exports},28141:(t,i,e)=>{"use strict";e.d(i,{Z:()=>n});var a=e(31508),o=e(46813),s=e(89615),l=e(93966);const r=a.ZP.extend({i18n:(0,o.Z)("common/views/components/visibility-chooser.vue"),components:{XVisibilityIcon:l.Z},props:{source:{required:!0},currentVisibility:{type:String,required:!1}},data(){return{v:this.$store.state.settings.rememberNoteVisibility?this.$store.state.device.visibility||this.$store.state.settings.defaultNoteVisibility:this.currentVisibility||this.$store.state.settings.defaultNoteVisibility}},mounted(){this.$nextTick((()=>{const t=this.$refs.popover,i=this.source.getBoundingClientRect(),e=t.offsetWidth,a=t.offsetHeight,o=i.left+this.source.offsetWidth/2,l=i.top+this.source.offsetHeight/2;let r=o-t.offsetWidth/2,n=l-t.offsetHeight/2;r+e>window.innerWidth&&(r=window.innerWidth-e),n+a>window.innerHeight&&(n=window.innerHeight-a),r<0&&(r=0),n<0&&(n=0),t.style.left=`${r+window.pageXOffset}px`,t.style.top=`${n+window.pageYOffset}px`,(0,s.Z)({targets:this.$refs.backdrop,opacity:1,duration:100,easing:"linear"}),(0,s.Z)({targets:this.$refs.popover,opacity:1,scale:[.5,1],duration:500})}))},methods:{choose(t){this.$store.state.settings.rememberNoteVisibility&&this.$store.commit("device/setVisibility",t),this.$emit("chosen",t),this.destroyDom()},close(){this.$refs.backdrop.style.pointerEvents="none",(0,s.Z)({targets:this.$refs.backdrop,opacity:0,duration:200,easing:"linear"}),this.$refs.popover.style.pointerEvents="none",(0,s.Z)({targets:this.$refs.popover,opacity:0,scale:.5,duration:200,easing:"easeInBack",complete:()=>this.destroyDom()})}}});e(19232);const n=(0,e(26385).Z)(r,(function(){var t=this,i=t._self._c;t._self._setupProxy;return i("div",{staticClass:"gqyayizv"},[i("div",{ref:"backdrop",staticClass:"backdrop",on:{click:t.close}}),i("div",{ref:"popover",staticClass:"popover",class:{isMobile:t.$root.isMobile}},[i("div",{class:{active:"public"==t.v},on:{click:function(i){return t.choose("public")}}},[i("x-visibility-icon",{attrs:{v:"public"}}),i("div",[i("span",[t._v(t._s(t.$t("public")))]),i("span",[t._v(t._s(t.$t("public-desc")))])])],1),i("div",{class:{active:"home"==t.v},on:{click:function(i){return t.choose("home")}}},[i("x-visibility-icon",{attrs:{v:"home"}}),i("div",[i("span",[t._v(t._s(t.$t("home")))]),i("span",[t._v(t._s(t.$t("home-desc")))])])],1),i("div",{class:{active:"followers"==t.v},on:{click:function(i){return t.choose("followers")}}},[i("x-visibility-icon",{attrs:{v:"followers"}}),i("div",[i("span",[t._v(t._s(t.$t("followers")))]),i("span",[t._v(t._s(t.$t("followers-desc")))])])],1),i("div",{class:{active:"specified"==t.v},on:{click:function(i){return t.choose("specified")}}},[i("x-visibility-icon",{attrs:{v:"specified"}}),i("div",[i("span",[t._v(t._s(t.$t("specified")))]),i("span",[t._v(t._s(t.$t("specified-desc")))])])],1),i("div",{class:{active:"once-public"==t.v},on:{click:function(i){return t.choose("once-public")}}},[i("x-visibility-icon",{attrs:{v:"once-public"}}),i("div",[i("span",[t._v(t._s(t.$t("once-public")))]),i("span",[t._v(t._s(t.$t("once-public-desc")))])])],1),i("div",{class:{active:"local-public"==t.v},on:{click:function(i){return t.choose("local-public")}}},[i("x-visibility-icon",{attrs:{v:"local-public"}}),i("div",[i("span",[t._v(t._s(t.$t("local-public")))]),i("span",[t._v(t._s(t.$t("local-public-desc")))])])],1),i("div",{class:{active:"local-home"==t.v},on:{click:function(i){return t.choose("local-home")}}},[i("x-visibility-icon",{attrs:{v:"local-home"}}),i("div",[i("span",[t._v(t._s(t.$t("local-home")))])])],1),i("div",{class:{active:"local-followers"==t.v},on:{click:function(i){return t.choose("local-followers")}}},[i("x-visibility-icon",{attrs:{v:"local-followers"}}),i("div",[i("span",[t._v(t._s(t.$t("local-followers")))])])],1)])])}),[],!1,null,"5799368d",null).exports},22580:(t,i,e)=>{"use strict";e.r(i),e.d(i,{default:()=>v});var a=e(7711),o=e(46813),s=e(31178),l=e(3782),r=e(28141),n=e(70390),c=e(93966),d=e(32971),p=e(64687);const h=(0,a.Z)({name:"post-form",props:()=>({design:0})}).extend({i18n:(0,o.Z)("desktop/views/widgets/post-form.vue"),components:{XPostFormAttaches:n.Z,MkVisibilityChooser:r.Z,XVisibilityIcon:c.Z},data:()=>({posting:!1,text:"",files:[],visibility:"public",localOnly:!1,copyOnce:!1,secondaryNoteVisibility:"none",tertiaryNoteVisibility:"none",faFish:d.io7}),computed:{placeholder(){const t=[this.$t("@.note-placeholders.a"),this.$t("@.note-placeholders.b"),this.$t("@.note-placeholders.c"),this.$t("@.note-placeholders.d"),this.$t("@.note-placeholders.e"),this.$t("@.note-placeholders.f")];return t[Math.floor(Math.random()*t.length)]}},mounted(){this.applyVisibilityFromState()},methods:{func(){1==this.props.design?this.props.design=0:this.props.design++,this.save()},chooseFile(){this.$refs.file.click()},chooseFileFromDrive(){this.$chooseDriveFile({multiple:!0}).then((t=>{for(const i of t)this.attachMedia(i)}))},attachMedia(t){t.error?this.$notify(t.error.message):this.files.some((i=>i.id===t.id))||(this.files.push(t),this.$emit("change-attached-files",this.files))},detachMedia(t){this.files=this.files.filter((i=>i.id!=t)),this.$emit("change-attached-files",this.files)},onKeydown(t){10!=t.which&&13!=t.which||!t.ctrlKey&&!t.metaKey||this.posting||!this.text||this.post(),10!=t.which&&13!=t.which||!t.altKey||this.posting||!this.text||null==this.secondaryNoteVisibility||"none"==this.secondaryNoteVisibility||this.post(this.secondaryNoteVisibility)},onPaste(t){for(const i of Array.from(t.clipboardData.items))if("file"==i.kind){const t=i.getAsFile(),e=t.name.lastIndexOf("."),a=e>=0?t.name.slice(e):"",o=`${(new Date).toISOString().replace(/\D/g,"").substr(0,14)}${a}`;this.upload(t,o)}},onChangeFile(){for(const t of Array.from(this.$refs.file.files))this.upload(t)},upload(t,i){this.$refs.uploader.upload(t,null,i,!1,!0)},onDragover(t){const i="file"==t.dataTransfer.items[0].kind,e="mk_drive_file"==t.dataTransfer.types[0];(i||e)&&(t.preventDefault(),t.dataTransfer.dropEffect="all"==t.dataTransfer.effectAllowed?"copy":"move")},onDrop(t){if(t.dataTransfer.files.length>0){t.preventDefault();for(const i of Array.from(t.dataTransfer.files))this.upload(i);return}const i=t.dataTransfer.getData("mk_drive_file");if(null!=i&&""!=i){const e=JSON.parse(i);this.files.push(e),t.preventDefault()}},async emoji(){const t=await e.e(2529).then(e.bind(e,62529)).then((t=>t.default)),i=this.$refs.emoji,a=i.getBoundingClientRect();this.$root.new(t,{x:i.offsetWidth+a.left+window.pageXOffset,y:a.top+window.pageYOffset}).$on("chosen",(t=>{(0,s.Z)(this.$refs.text,t+String.fromCharCode(8203))}))},kao(){this.text+=(0,l.Z)()},setVisibility(){this.$root.new(r.Z,{source:this.$refs.visibilityButton,currentVisibility:this.visibility}).$once("chosen",(t=>{this.applyVisibility(t)}))},applyVisibilityFromState(){this.applyVisibility(this.$store.state.settings.rememberNoteVisibility&&this.$store.state.device.visibility||this.$store.state.settings.defaultNoteVisibility),this.secondaryNoteVisibility=this.$store.state.settings.secondaryNoteVisibility,this.tertiaryNoteVisibility=this.$store.state.settings.tertiaryNoteVisibility},applyVisibility(t){const i=(0,p.Z)(t);this.localOnly=i.localOnly,this.copyOnce=i.copyOnce,this.visibility=i.visibility},post(t){let i=this.visibility,e=this.localOnly,a=this.copyOnce;if("string"==typeof t){const o=(0,p.Z)(t);e=o.localOnly,a=o.copyOnce,i=o.visibility}this.posting=!0,this.$root.api("notes/create",{text:""==this.text?void 0:this.text,fileIds:this.files.length>0?this.files.map((t=>t.id)):void 0,visibility:i,localOnly:e,copyOnce:a}).then((t=>{this.clear()})).catch((t=>{this.$root.dialog({type:"error",text:t.message||t})})).finally((()=>{this.posting=!1,this.$nextTick((()=>{this.$refs.text.focus()}))}))},clear(){this.text="",this.files=[]}}});e(55455);const v=(0,e(26385).Z)(h,(function(){var t=this,i=t._self._c;t._self._setupProxy;return i("div",[i("ui-container",{attrs:{"show-header":0==t.props.design},scopedSlots:t._u([{key:"header",fn:function(){return[i("fa",{attrs:{icon:"pencil-alt"}}),t._v(t._s(t.$t("title")))]},proxy:!0}])},[i("div",{staticClass:"lhcuptdmcdkfwmipgazeawoiuxpzaclc-body",on:{dragover:function(i){return i.stopPropagation(),t.onDragover.apply(null,arguments)},drop:function(i){return i.stopPropagation(),t.onDrop.apply(null,arguments)}}},[i("div",{staticClass:"textarea"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"},{name:"autocomplete",rawName:"v-autocomplete",value:{model:"text"},expression:"{ model: 'text' }"}],ref:"text",attrs:{disabled:t.posting,placeholder:t.placeholder},domProps:{value:t.text},on:{keydown:t.onKeydown,paste:t.onPaste,input:function(i){i.target.composing||(t.text=i.target.value)}}}),t.$root.isMobile?t._e():i("button",{ref:"emoji",staticClass:"emoji",on:{click:t.emoji}},[i("fa",{attrs:{icon:["far","laugh"]}})],1)]),i("x-post-form-attaches",{staticClass:"files",attrs:{files:t.files,detachMediaFn:t.detachMedia}}),i("input",{ref:"file",attrs:{type:"file",multiple:"multiple",tabindex:"-1"},on:{change:t.onChangeFile}}),i("mk-uploader",{ref:"uploader",on:{uploaded:t.attachMedia}}),i("footer",[i("button",{on:{click:t.chooseFile}},[i("fa",{attrs:{icon:"upload"}})],1),i("button",{on:{click:t.chooseFileFromDrive}},[i("fa",{attrs:{icon:"cloud"}})],1),i("button",{on:{click:t.kao}},[i("fa",{attrs:{icon:t.faFish}})],1),i("button",{ref:"visibilityButton",staticClass:"visibility",on:{click:t.setVisibility}},[i("x-visibility-icon",{attrs:{v:t.visibility,localOnly:t.localOnly,copyOnce:t.copyOnce}})],1),null!=t.tertiaryNoteVisibility&&"none"!=t.tertiaryNoteVisibility?i("button",{staticClass:"tertiary",attrs:{disabled:t.posting,title:"Tertiary Post"},on:{click:function(i){return t.post(t.tertiaryNoteVisibility)}}},[i("x-visibility-icon",{attrs:{v:t.tertiaryNoteVisibility}})],1):t._e(),null!=t.secondaryNoteVisibility&&"none"!=t.secondaryNoteVisibility?i("button",{staticClass:"secondary",attrs:{disabled:t.posting,title:"Secondary Post (Alt+Enter)"},on:{click:function(i){return t.post(t.secondaryNoteVisibility)}}},[i("x-visibility-icon",{attrs:{v:t.secondaryNoteVisibility}})],1):t._e(),i("button",{staticClass:"post",attrs:{disabled:t.posting,title:"Post (Ctrl+Enter)"},on:{click:function(i){return t.post()}}},[t._v(t._s(t.$t("note")))])])],1)])],1)}),[],!1,null,"2a067391",null).exports},20201:(t,i,e)=>{var a=e(19949);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);(0,e(80950).Z)("7e73d202",a,!0,{})},78748:(t,i,e)=>{var a=e(2105);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);(0,e(80950).Z)("380cf2fb",a,!0,{})},19232:(t,i,e)=>{var a=e(35198);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);(0,e(80950).Z)("4837a23a",a,!0,{})},55455:(t,i,e)=>{var a=e(24216);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);(0,e(80950).Z)("eb65bf22",a,!0,{})}}]);