(self.webpackChunkmisskey=self.webpackChunkmisskey||[]).push([[481],{62293:(e,t,s)=>{var i=s(11063),a=s(26143)(i);a.push([e.id,".user-reactions[data-v-01cd6cd2]{color:var(--text)}.user-reactions[data-v-01cd6cd2] .items{display:flex;justify-content:center}.user-reactions[data-v-01cd6cd2] .items>.item{padding:.7em}.user-reactions[data-v-01cd6cd2] .items.deck>.item{padding:.3em}",""]),e.exports=a},806:(e,t,s)=>{var i=s(11063),a=s(26143)(i);a.push([e.id,".sainvnaq[data-v-240268bf]{display:grid;gap:8px;grid-template-columns:1fr 1fr 1fr;padding:16px}.sainvnaq>*[data-v-240268bf]{background-clip:content-box;background-position:50%;background-size:cover;border-radius:4px;height:70px}.command[data-v-240268bf]{margin:8px 16px}",""]),e.exports=a},94307:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var i=s(31508),a=s(46813),r=s(32971);const o=i.ZP.extend({i18n:(0,a.Z)(""),props:{user:{type:Object,required:!0},deck:{type:Boolean,required:!1,default:!1}},data:()=>({reactionStats:null,faHeart:r.m6i}),created(){this.$root.api("users/reaction-stats",{userId:this.user.id,limit:10},!1,!0).then((e=>{this.reactionStats=e}))}});s(10908);const n=(0,s(26385).Z)(o,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("ui-container",{staticClass:"user-reactions",attrs:{"body-togglable":!0,expanded:e.$store.state.device.expandUsersReactions},on:{toggle:t=>e.$store.commit("device/set",{key:"expandUsersReactions",value:t})},scopedSlots:e._u([{key:"header",fn:function(){return[t("fa",{attrs:{icon:e.faHeart}}),e._v(" "+e._s(e.$t("@.favoriteReactions")))]},proxy:!0}])},[e.reactionStats?t("div",{staticClass:"items",class:{deck:e.deck}},e._l(e.reactionStats.reactions,(function(s){return t("div",{key:s.reaction,staticClass:"item",attrs:{title:s.count}},[t("mk-reaction-icon",{attrs:{reaction:s.reaction,customEmojis:e.reactionStats.emojis}})],1)})),0):e._e()]),t("ui-container",{staticClass:"user-reactions",attrs:{"body-togglable":!0,expanded:e.$store.state.device.expandUsersReacteds},on:{toggle:t=>e.$store.commit("device/set",{key:"expandUsersReacteds",value:t})},scopedSlots:e._u([{key:"header",fn:function(){return[t("fa",{attrs:{icon:e.faHeart}}),e._v(" "+e._s(e.$t("@.mostReacteds")))]},proxy:!0}])},[e.reactionStats?t("div",{staticClass:"items",class:{deck:e.deck}},e._l(e.reactionStats.reacteds,(function(s){return t("div",{key:s.reaction,staticClass:"item",attrs:{title:s.count}},[t("mk-reaction-icon",{attrs:{reaction:s.reaction,customEmojis:e.reactionStats.emojis}})],1)})),0):e._e()])],1)}),[],!1,null,"01cd6cd2",null).exports},90481:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var i=s(31508),a=s(46813),r=s(80533),o=s(49733),n=s(6800),c=s.n(n),d=s(94307),l=s(3123);const u=i.ZP.extend({i18n:(0,a.Z)("deck/deck.user-column.vue"),components:{XNotes:r.Z,XReactions:d.Z},props:{user:{type:Object,required:!0}},data(){return{withFiles:!1,images:[],makePromise:null,date:null,faCalendarAlt:l.IV,makeFrequentlyRepliedUsersPromise:()=>this.$root.api("users/get-frequently-replied-users",{userId:this.user.id,limit:5}).then((e=>e.map((e=>e.user)))),chart:null}},watch:{user(){this.fetch(),this.genPromiseMaker()}},created(){this.fetch(),this.genPromiseMaker()},methods:{genPromiseMaker(){this.makePromise=e=>this.$root.api("users/notes",{userId:this.user.id,limit:11,untilId:!this.date&&e?e:void 0,untilDate:this.date?this.date.getTime():void 0,withFiles:this.withFiles,includeMyRenotes:this.$store.state.settings.showMyRenotes,includeRenotedMyNotes:this.$store.state.settings.showRenotedMyNotes,includeLocalRenotes:this.$store.state.settings.showLocalRenotes}).then((e=>(this.date=null,11==e.length?(e.pop(),{notes:e,cursor:e[e.length-1].id}):{notes:e,cursor:null})))},fetchOutbox(){this.$root.api("ap/fetch-outbox",{userId:this.user.id,sync:!0}).then((()=>{this.$refs.timeline.reload()}))},warp(e){this.date=e,this.$refs.timeline.reload()},fetch(){const e=["image/jpeg","image/png","image/apng","image/gif","image/webp","image/avif"];this.$root.api("users/notes",{userId:this.user.id,fileType:e,excludeNsfw:!this.$store.state.device.alwaysShowNsfw,limit:9}).then((t=>{for(const e of t)for(const t of e.files)t._note=e;const s=(0,o.zo)(t.map((e=>e.files)));this.images=s.filter((t=>e.includes(t.type))).slice(0,9)})),this.$root.api("charts/user/notes",{userId:this.user.id,span:"day",limit:21},!1,!0).then((e=>{const t=[],s=[],i=[],a=new Date,r=a.getFullYear(),o=a.getMonth(),n=a.getDate();for(let a=0;a<21;a++){const c=new Date(r,o,n-a);t.push([c,e.diffs.normal[a]]),s.push([c,e.diffs.reply[a]]),i.push([c,e.diffs.renote[a]])}this.chart&&this.chart.destroy(),this.chart=new(c())(this.$refs.chart,{chart:{type:"bar",stacked:!0,height:100,sparkline:{enabled:!0}},plotOptions:{bar:{columnWidth:"80%"}},grid:{clipMarkers:!1,padding:{top:16,right:16,bottom:16,left:16}},tooltip:{shared:!0,intersect:!1},series:[{name:"Normal",data:t},{name:"Reply",data:s},{name:"Renote",data:i}],xaxis:{type:"datetime",crosshairs:{width:1,opacity:1}}}),this.chart.render()}))}}});s(30680);const p=(0,s(26385).Z)(u,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[e.user.pinnedNotes&&e.user.pinnedNotes.length>0?t("ui-container",{attrs:{"body-togglable":!0},scopedSlots:e._u([{key:"header",fn:function(){return[t("fa",{attrs:{icon:"thumbtack"}}),e._v(" "+e._s(e.$t("pinned-notes")))]},proxy:!0}],null,!1,2952226793)},[t("div",e._l(e.user.pinnedNotes,(function(e){return t("mk-note",{key:e.id,attrs:{note:e}})})),1)]):e._e(),t("ui-container",{attrs:{"body-togglable":!0,expanded:e.$store.state.device.expandUsersActivity},on:{toggle:t=>e.$store.commit("device/set",{key:"expandUsersActivity",value:t})},scopedSlots:e._u([{key:"header",fn:function(){return[t("fa",{attrs:{icon:["far","chart-bar"]}}),e._v(" "+e._s(e.$t("activity")))]},proxy:!0}])},[t("div",[t("div",{ref:"chart"})])]),t("x-reactions",{key:e.user.id,attrs:{user:e.user,deck:!0}}),t("mk-user-list",{key:e.user.id,attrs:{"make-promise":e.makeFrequentlyRepliedUsersPromise,"icon-only":!0}},[t("fa",{attrs:{icon:"users"}}),e._v(" "+e._s(e.$t("@.frequently-replied-users")))],1),e.images.length>0?t("ui-container",{attrs:{"body-togglable":!0,expanded:e.$store.state.device.expandUsersPhotos},on:{toggle:t=>e.$store.commit("device/set",{key:"expandUsersPhotos",value:t})},scopedSlots:e._u([{key:"header",fn:function(){return[t("fa",{attrs:{icon:["far","images"]}}),e._v(" "+e._s(e.$t("images")))]},proxy:!0}],null,!1,1317083035)},[t("div",{staticClass:"sainvnaq"},e._l(e.images,(function(s){return t("router-link",{key:`${s.id}:${s._note.id}`,style:`background-image: url(${s.thumbnailUrl})`,attrs:{to:e._f("notePage")(s._note),title:`${s.name}\n${new Date(s.createdAt).toLocaleString()}`}})})),1)]):e._e(),t("ui-container",{attrs:{"body-togglable":!0,expanded:e.$store.state.device.expandUsersWarp},on:{toggle:t=>e.$store.commit("device/set",{key:"expandUsersWarp",value:t})},scopedSlots:e._u([{key:"header",fn:function(){return[t("fa",{attrs:{icon:e.faCalendarAlt}}),e._v(" "+e._s(e.$t("@.timemachine")))]},proxy:!0}])},[t("mk-calendar",{on:{chosen:e.warp}})],1),t("ui-container",{scopedSlots:e._u([{key:"header",fn:function(){return[t("fa",{attrs:{icon:["far","comment-alt"]}}),e._v(" "+e._s(e.$t("timeline")))]},proxy:!0}])},[t("div",[t("div",{staticClass:"command"},[t("ui-button",{on:{click:function(t){return e.fetchOutbox()}}},[e._v(e._s(e.$t("fetch-posts")))])],1),t("x-notes",{key:e.user.id,ref:"timeline",attrs:{id:"user_timeline_53","make-promise":e.makePromise},on:{inited:()=>e.$emit("loaded")}})],1)])],1)}),[],!1,null,"240268bf",null).exports},10908:(e,t,s)=>{var i=s(62293);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,s(80950).Z)("763bd37e",i,!0,{})},30680:(e,t,s)=>{var i=s(806);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,s(80950).Z)("25100e5e",i,!0,{})}}]);