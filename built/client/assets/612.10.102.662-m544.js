(self.webpackChunkmisskey=self.webpackChunkmisskey||[]).push([[612],{86040:(t,s,e)=>{var i=e(11063),a=e(26143)(i);a.push([t.id,".cudqjmnl .phcqulfl[data-v-3861eaaa]{border-top:1px solid var(--faceDivider);display:flex;padding:16px 0}.cudqjmnl .phcqulfl>div:first-child>a>.avatar[data-v-3861eaaa]{height:64px;width:64px}.cudqjmnl .phcqulfl>div[data-v-3861eaaa]:last-child{flex:1;padding-left:16px}@media (max-width:500px){.cudqjmnl .phcqulfl>div[data-v-3861eaaa]:last-child{font-size:14px}}.cudqjmnl .phcqulfl>div:last-child>header>.username[data-v-3861eaaa]{margin-left:8px;opacity:.7}.cudqjmnl .hostsfl[data-v-3861eaaa]{margin-bottom:16px}",""]),t.exports=a},3903:(t,s,e)=>{"use strict";e.r(s),e.d(s,{default:()=>c});var i=e(31508),a=e(87186),l=e(46813),r=e(32971),o=e(3123);const n=i.ZP.extend({i18n:(0,l.Z)("common/views/components/user-list-editor.vue"),props:{listId:{required:!0}},data:()=>({list:null,users:[],faList:r.Zrf,faICursor:r.sdN,faTrashAlt:o.I7,faUsers:r.FVb}),mounted(){this.fetchList()},methods:{fetchList(){this.$root.api("users/lists/show",{listId:this.listId}).then((t=>{this.list=t,this.fetchUsers()}))},fetchUsers(){this.$root.api("users/show",{userIds:this.list.userIds}).then((t=>{this.users=t.sort(((t,s)=>t.username.localeCompare(s.username)))}))},update(){this.$root.api("users/lists/update",{listId:this.list.id,title:this.list.title,hideFromHome:this.list.hideFromHome,mediaOnly:this.list.mediaOnly}).then((t=>{this.list=t}))},rename(){this.$root.dialog({title:this.$t("rename"),input:{default:this.list.title}}).then((({canceled:t,result:s})=>{t||this.$root.api("users/lists/update",{listId:this.list.id,title:s}).then((t=>{this.list=t}))}))},del(){this.$root.dialog({type:"warning",text:this.$t("delete-are-you-sure").replace("$1",this.list.title),showCancelButton:!0}).then((({canceled:t})=>{t||this.$root.api("users/lists/delete",{listId:this.list.id}).then((()=>{this.$root.dialog({type:"success",text:this.$t("deleted")}),this.$emit("deleted")})).catch((t=>{this.$root.dialog({type:"error",text:t})}))}))},remove(t){this.$root.api("users/lists/pull",{listId:this.list.id,userId:t.id}).then((()=>{this.fetchList()}))},addUser(){this.$root.dialog({title:this.$t("enter-username"),user:!0}).then((({canceled:t,result:s})=>{t||this.$root.api("users/lists/push",{listId:this.list.id,userId:s.id}).then((()=>{this.fetchList()}))}))},addHost(){this.$root.dialog({title:this.$t("add-host"),input:{}}).then((({canceled:t,result:s})=>{t||this.$root.api("users/lists/push-host",{listId:this.list.id,host:s}).then((()=>{this.fetchList()}))}))},removeHost(t){this.$root.api("users/lists/pull-host",{listId:this.list.id,host:t}).then((()=>{this.fetchList()}))}}});e(36674);var d=e(26385);const h=(0,d.Z)(n,(function(){var t=this,s=t._self._c;t._self._setupProxy;return s("div",{staticClass:"cudqjmnl"},[t.list?t._e():s("p",{staticClass:"fetching",staticStyle:{"text-align":"center",color:"var(--text)"}},[s("fa",{attrs:{icon:"spinner",pulse:"","fixed-width":""}}),t._v(t._s(t.$t("@.loading"))),s("mk-ellipsis")],1),t.list?s("ui-card",{scopedSlots:t._u([{key:"title",fn:function(){return[s("fa",{attrs:{icon:t.faList}}),t._v(" "+t._s(t.list.title))]},proxy:!0}],null,!1,1383814307)},[s("section",[s("ui-button",{on:{click:t.rename}},[s("fa",{attrs:{icon:t.faICursor}}),t._v(" "+t._s(t.$t("rename")))],1),s("ui-button",{on:{click:t.del}},[s("fa",{attrs:{icon:t.faTrashAlt}}),t._v(" "+t._s(t.$t("delete")))],1),s("ui-switch",{on:{change:t.update},model:{value:t.list.hideFromHome,callback:function(s){t.$set(t.list,"hideFromHome",s)},expression:"list.hideFromHome"}},[t._v(t._s(t.$t("hide-from-home")))]),s("ui-switch",{on:{change:t.update},model:{value:t.list.mediaOnly,callback:function(s){t.$set(t.list,"mediaOnly",s)},expression:"list.mediaOnly"}},[t._v(t._s(t.$t("media-only")))])],1)]):t._e(),t.list?s("ui-card",{scopedSlots:t._u([{key:"title",fn:function(){return[s("fa",{attrs:{icon:t.faUsers}}),t._v(" "+t._s(t.$t("users")))]},proxy:!0}],null,!1,442342044)},[s("div",{staticStyle:{margin:"8px"}},[s("a",{on:{click:t.addUser}},[t._v(t._s(t.$t("add-user")))])]),s("section",[s("sequential-entrance",{attrs:{animation:"entranceFromTop",delay:"25"}},t._l(t.users,(function(e){return s("div",{key:e.id,staticClass:"phcqulfl"},[s("div",[s("a",{attrs:{href:t._f("userPage")(e)}},[s("mk-avatar",{staticClass:"avatar",attrs:{user:e,"disable-link":!0}})],1)]),s("div",[s("header",[s("b",[s("mk-user-name",{attrs:{user:e}})],1),s("span",{staticClass:"username"},[t._v("@"+t._s(t._f("acct")(e)))])]),s("div",[s("a",{on:{click:function(s){return t.remove(e)}}},[t._v(t._s(t.$t("remove-user")))])])])])})),0)],1)]):t._e(),t.list?s("ui-card",{scopedSlots:t._u([{key:"title",fn:function(){return[s("fa",{attrs:{icon:t.faUsers}}),t._v(" "+t._s(t.$t("hosts")))]},proxy:!0}],null,!1,4082006253)},[s("div",{staticStyle:{margin:"8px"}},[s("a",{on:{click:t.addHost}},[t._v(t._s(t.$t("add-host")))])]),s("section",[s("sequential-entrance",{attrs:{animation:"entranceFromTop",delay:"25"}},t._l(t.list.hosts,(function(e){return s("div",{key:e,staticClass:"hostsfl"},[s("div",[t._v("\n\t\t\t\t\t\t"+t._s(e)+"\n\t\t\t\t\t")]),s("div",[s("a",{on:{click:function(s){return t.removeHost(e)}}},[t._v(t._s(t.$t("remove-host")))])])])})),0)],1)]):t._e()],1)}),[],!1,null,"3861eaaa",null).exports,u=i.ZP.extend({components:{XEditor:h},data:()=>({fetching:!0,list:null}),watch:{$route:"fetch"},created(){this.fetch()},methods:{fetch(){a.Z.start(),this.fetching=!0,this.$root.api("users/lists/show",{listId:this.$route.params.list}).then((t=>{this.list=t,this.fetching=!1,a.Z.done()}))}}});const c=(0,d.Z)(u,(function(){var t=this,s=t._self._c;t._self._setupProxy;return s("mk-ui",{scopedSlots:t._u([t.fetching?null:{key:"header",fn:function(){return[s("fa",{attrs:{icon:"list"}}),t._v(t._s(t.list.title))]},proxy:!0}],null,!0)},[t.fetching?t._e():s("main",[s("x-editor",{attrs:{listId:t.list.id}})],1)])}),[],!1,null,null,null).exports},36674:(t,s,e)=>{var i=e(86040);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);(0,e(80950).Z)("da86a9fa",i,!0,{})}}]);