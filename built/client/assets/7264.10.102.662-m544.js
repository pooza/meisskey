(self.webpackChunkmisskey=self.webpackChunkmisskey||[]).push([[7264],{35051:(e,t,i)=>{var s=i(11063),n=i(26143)(s);n.push([e.id,'.prlncendiewqqkrevzeruhndoakghvtx[data-v-9c90ef0e]{background:var(--secondary);width:350px}.prlncendiewqqkrevzeruhndoakghvtx>header[data-v-9c90ef0e]{display:flex}.prlncendiewqqkrevzeruhndoakghvtx>header>button[data-v-9c90ef0e]{color:var(--text);flex:1;font-size:16px;padding:10px 0;transition:color .2s ease}.prlncendiewqqkrevzeruhndoakghvtx>header>button[data-v-9c90ef0e]:hover{color:var(--textHighlighted);transition:color 0s}.prlncendiewqqkrevzeruhndoakghvtx>header>button.active[data-v-9c90ef0e]{color:var(--primary);transition:color 0s}.prlncendiewqqkrevzeruhndoakghvtx>.emojis[data-v-9c90ef0e]{height:350px;overflow-x:hidden;overflow-y:auto}.prlncendiewqqkrevzeruhndoakghvtx>.emojis>header.menu[data-v-9c90ef0e]{padding:.5em}.prlncendiewqqkrevzeruhndoakghvtx>.emojis>header.category[data-v-9c90ef0e]{background:var(--popupBg);color:var(--text);font-size:12px;left:0;padding:8px;position:sticky;top:0;z-index:1}.prlncendiewqqkrevzeruhndoakghvtx>.emojis>header.category>.skinTones[data-v-9c90ef0e]{display:inline-flex;position:absolute;right:8px}.prlncendiewqqkrevzeruhndoakghvtx>.emojis>header.category>.skinTones>.skinTone[data-v-9c90ef0e]{padding:0 3px}.prlncendiewqqkrevzeruhndoakghvtx>.emojis[data-v-9c90ef0e] header.sub{color:var(--text);font-size:12px;padding:4px 8px}.prlncendiewqqkrevzeruhndoakghvtx>.emojis[data-v-9c90ef0e] div.list{display:grid;gap:4px;grid-template-columns:1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;padding:8px}.prlncendiewqqkrevzeruhndoakghvtx>.emojis[data-v-9c90ef0e] div.list>button{padding:0;width:100%}.prlncendiewqqkrevzeruhndoakghvtx>.emojis[data-v-9c90ef0e] div.list>button:before{content:"";display:block;height:0;padding-bottom:100%;width:1px}.prlncendiewqqkrevzeruhndoakghvtx>.emojis[data-v-9c90ef0e] div.list>button:hover>*{transform:scale(1.2);transition:transform 0s}.prlncendiewqqkrevzeruhndoakghvtx>.emojis[data-v-9c90ef0e] div.list>button>*{font-size:28px;height:100%;left:0;object-fit:contain;pointer-events:none;position:absolute;top:0;transition:transform .2s ease;width:100%}',""]),e.exports=n},47264:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>u});var s=i(31508),n=i(46813),o=i(77988),a=i(59966),r=i(32971),c=i(3123),d=i(49733);const l=[null,"🏻","🏼","🏽","🏾","🏿"],h=(0,s.aZ)({i18n:(0,n.Z)("common/views/components/emoji-picker.vue"),props:{reaction:{type:Boolean,required:!1,default:!1}},data(){return{SKIN_TONES_SAMPLE:"👍",SKIN_TONES:l,pinned:!1,emojilist:o.W,getStaticImageUrl:a.e,customEmojis:{},q:null,searchResults:[],skinTone:null,faGlobe:r.g4A,faHistory:r.qO$,categories:[{text:this.$t("custom-emoji"),icon:r.$X1,isActive:!0},{name:"face",text:this.$t("face"),icon:["far","laugh"],isActive:!1},{name:"people",text:this.$t("people"),icon:r.ILF,isActive:!1},{name:"animals_and_nature",text:this.$t("animals-and-nature"),icon:r.XEC,isActive:!1},{name:"food_and_drink",text:this.$t("food-and-drink"),icon:r.fkH,isActive:!1},{name:"activity",text:this.$t("activity"),icon:r.O_4,isActive:!1},{name:"travel_and_places",text:this.$t("travel-and-places"),icon:r.SBo,isActive:!1},{name:"objects",text:this.$t("objects"),icon:r.RJo,isActive:!1},{name:"symbols",text:this.$t("symbols"),icon:c.m6,isActive:!1},{name:"flags",text:this.$t("flags"),icon:c.Rr,isActive:!1}]}},watch:{q(){if(null==this.q||""===this.q)return void(this.searchResults=[]);const e=this.q.replace(/:/g,""),t=Array.from((()=>{const t=(this.$root.getMetaSync()||{emojis:[]}).emojis||[],i=new Set,s=t.find((t=>t.name===e));if(s&&i.add(s),e.includes(" ")){const s=e.split(" ");for(const e of t)if(s.every((t=>e.name.includes(t)))&&(i.add(e),i.size>=8))break;if(i.size>=8)return i;for(const e of t)if(s.every((t=>e.name.includes(t)||e.aliases.some((e=>e.includes(t)))))&&(i.add(e),i.size>=8))break}else{for(const s of t)if(s.name.startsWith(e)&&(i.add(s),i.size>=8))break;if(i.size>=8)return i;for(const s of t)if(s.aliases.some((t=>t.startsWith(e)))&&(i.add(s),i.size>=8))break;if(i.size>=8)return i;for(const s of t)if(s.name.includes(e)&&(i.add(s),i.size>=8))break;if(i.size>=8)return i;for(const s of t)if(s.aliases.some((t=>t.includes(e)))&&(i.add(s),i.size>=8))break}return i})()),i=Array.from((()=>{const t=this.emojilist,i=new Set,s=t.find((t=>t.name===e));if(s&&i.add(s),e.includes(" ")){const s=e.split(" ");for(const e of t)if(s.every((t=>e.name.includes(t)))&&(i.add(e),i.size>=8))break;if(i.size>=8)return i;for(const e of t)if(s.every((t=>e.name.includes(t)||e.keywords.some((e=>e.includes(t)))))&&(i.add(e),i.size>=8))break}else{for(const s of t)if(s.name.startsWith(e)&&(i.add(s),i.size>=8))break;if(i.size>=8)return i;for(const s of t)if(s.keywords.some((t=>t.startsWith(e)))&&(i.add(s),i.size>=8))break;if(i.size>=8)return i;for(const s of t)if(s.name.includes(e)&&(i.add(s),i.size>=8))break;if(i.size>=8)return i;for(const s of t)if(s.keywords.some((t=>t.includes(e)))&&(i.add(s),i.size>=8))break}return i})());this.searchResults=t.concat(i)}},created(){let e=(this.$root.getMetaSync()||{emojis:[]}).emojis||[];e=(0,d.vM)(e,(e=>e.category||"")),this.customEmojis=e,this.$store.state.device.activeEmojiCategoryName&&this.goCategory(this.$store.state.device.activeEmojiCategoryName),l.includes(this.$store.state.device.emojiSkinTone)&&(this.skinTone=this.$store.state.device.emojiSkinTone)},methods:{go(e){this.goCategory(e.name)},goCategory(e){let t=!1;for(const i of this.categories)i.isActive=i.name===e,i.isActive&&(t=!0,this.$store.commit("device/set",{key:"activeEmojiCategoryName",value:i.name}));t||(this.categories[0].isActive=!0)},changeSkinTone(e){this.skinTone=e,this.$store.commit("device/set",{key:"emojiSkinTone",value:e})},emojiToSkinToneModifiedChar(e,t){return 1===e.st?this.getSkinToneModifiedChar(e.char,t):e.char},getSkinToneModifiedChar(e,t){if(!t)return e;let i=Array.from(e);return"️"===i[1]?i.splice(1,1,t):i.splice(1,0,t),i.join("")},chosen(e,t){const i=e=>e.char?1===e.st?this.getSkinToneModifiedChar(e.char,t):e.char:`:${e.name}:`;let s=this.$store.state.device.recentEmojis||[];s=s.filter((t=>i(t)!==i(e))),s.unshift(e),this.$store.commit("device/set",{key:"recentEmojis",value:s.splice(0,16)}),this.$emit("chosen",{emoji:i(e),close:!this.pinned})}}});i(10764);const u=(0,i(26385).Z)(h,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"prlncendiewqqkrevzeruhndoakghvtx"},[t("header",e._l(e.categories,(function(i){return t("button",{key:i.text,class:{active:i.isActive},attrs:{title:i.text},on:{click:function(t){return e.go(i)}}},[t("fa",{attrs:{icon:i.icon,"fixed-width":""}})],1)})),0),t("div",{staticClass:"emojis"},[e.reaction?e._e():t("header",{staticClass:"menu"},[t("ui-switch",{model:{value:e.pinned,callback:function(t){e.pinned=t},expression:"pinned"}},[e._v(e._s(e.$t("pinned")))])],1),t("ui-input",{staticStyle:{margin:"0.8em 0.6em"},attrs:{autofocus:!e.$root.isMobile},model:{value:e.q,callback:function(t){e.q=t},expression:"q"}},[t("span",[e._v(e._s(e.$t("search")))])]),e.searchResults.length>0?t("div",{staticClass:"list"},e._l(e.searchResults||[],(function(i){return t("button",{key:i.char||i.name,attrs:{title:i.sources?i.sources.map((e=>`${e.name}@${e.host}`)).join(",\n"):i.name},on:{click:function(t){return e.chosen(i)}}},[null!=i.char?t("mk-emoji",{attrs:{emoji:i.char,local:i.local}}):t("img",{attrs:{src:e.$store.state.device.disableShowingAnimatedImages?e.getStaticImageUrl(i.url):i.url}})],1)})),0):e._e(),e.categories[0].isActive?[t("header",{staticClass:"category"},[t("fa",{attrs:{icon:e.faHistory,"fixed-width":""}}),e._v(" "+e._s(e.$t("recent-emoji")))],1),t("div",{staticClass:"list"},e._l(e.$store.state.device.recentEmojis||[],(function(i){return t("button",{key:i.char||i.name,attrs:{title:i.sources?i.sources.map((e=>`${e.name}@${e.host}`)).join(",\n"):i.name},on:{click:function(t){return e.chosen(i)}}},[null!=i.char?t("mk-emoji",{attrs:{emoji:i.char,local:i.local}}):t("img",{attrs:{src:e.$store.state.device.disableShowingAnimatedImages?e.getStaticImageUrl(i.url):i.url}})],1)})),0)]:e._e(),t("header",{staticClass:"category"},[t("fa",{attrs:{icon:e.categories.find((e=>e.isActive)).icon,"fixed-width":""}}),e._v("\n\t\t\t"+e._s(e.categories.find((e=>e.isActive)).text)+"\n\t\t\t"),t("div",{staticClass:"skinTones"},e._l(e.SKIN_TONES,(function(i){return t("button",{key:i,staticClass:"skinTone",on:{click:function(t){return e.changeSkinTone(i)}}},[t("mk-emoji",{attrs:{emoji:e.getSkinToneModifiedChar(e.SKIN_TONES_SAMPLE,i)}})],1)})),0)],1),e.categories.find((e=>e.isActive)).name?[t("div",{staticClass:"list"},e._l(e.emojilist.filter((t=>t.category===e.categories.find((e=>e.isActive)).name)),(function(i){return t("button",{key:`${i.name}-${e.skinTone}`,attrs:{title:i.name},on:{click:function(t){return e.chosen(i,e.skinTone)}}},[t("mk-emoji",{attrs:{emoji:e.emojiToSkinToneModifiedChar(i,e.skinTone),local:i.local}})],1)})),0)]:e._l(Object.keys(e.customEmojis),(function(i,s){return t("div",{key:s},[t("header",{staticClass:"sub"},[e._v(e._s(i||e.$t("no-category")))]),t("div",{staticClass:"list"},e._l(e.customEmojis[i],(function(i){return t("button",{key:i.name,attrs:{title:i.name},on:{click:function(t){return e.chosen(i)}}},[t("img",{attrs:{src:e.$store.state.device.disableShowingAnimatedImages?e.getStaticImageUrl(i.url):i.url}})])})),0)])}))],2)])}),[],!1,null,"9c90ef0e",null).exports},10764:(e,t,i)=>{var s=i(35051);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);(0,i(80950).Z)("774fc804",s,!0,{})}}]);