/*! For license information please see 7705.10.102.662-m544.js.LICENSE.txt */
(self.webpackChunkmisskey=self.webpackChunkmisskey||[]).push([[7705],{70090:(e,t)=>{var a;a=function(e){e.version="1.2.2";var t=function(){for(var e=0,t=new Array(256),a=0;256!=a;++a)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=a)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[a]=e;return"undefined"!=typeof Int32Array?new Int32Array(t):t}(),a=function(e){var t=0,a=0,s=0,i="undefined"!=typeof Int32Array?new Int32Array(4096):new Array(4096);for(s=0;256!=s;++s)i[s]=e[s];for(s=0;256!=s;++s)for(a=e[s],t=256+s;t<4096;t+=256)a=i[t]=a>>>8^e[255&a];var r=[];for(s=1;16!=s;++s)r[s-1]="undefined"!=typeof Int32Array?i.subarray(256*s,256*s+256):i.slice(256*s,256*s+256);return r}(t),s=a[0],i=a[1],r=a[2],n=a[3],o=a[4],d=a[5],c=a[6],l=a[7],h=a[8],u=a[9],g=a[10],p=a[11],m=a[12],b=a[13],v=a[14];e.table=t,e.bstr=function(e,a){for(var s=-1^a,i=0,r=e.length;i<r;)s=s>>>8^t[255&(s^e.charCodeAt(i++))];return~s},e.buf=function(e,a){for(var w=-1^a,f=e.length-15,x=0;x<f;)w=v[e[x++]^255&w]^b[e[x++]^w>>8&255]^m[e[x++]^w>>16&255]^p[e[x++]^w>>>24]^g[e[x++]]^u[e[x++]]^h[e[x++]]^l[e[x++]]^c[e[x++]]^d[e[x++]]^o[e[x++]]^n[e[x++]]^r[e[x++]]^i[e[x++]]^s[e[x++]]^t[e[x++]];for(f+=15;x<f;)w=w>>>8^t[255&(w^e[x++])];return~w},e.str=function(e,a){for(var s=-1^a,i=0,r=e.length,n=0,o=0;i<r;)(n=e.charCodeAt(i++))<128?s=s>>>8^t[255&(s^n)]:n<2048?s=(s=s>>>8^t[255&(s^(192|n>>6&31))])>>>8^t[255&(s^(128|63&n))]:n>=55296&&n<57344?(n=64+(1023&n),o=1023&e.charCodeAt(i++),s=(s=(s=(s=s>>>8^t[255&(s^(240|n>>8&7))])>>>8^t[255&(s^(128|n>>2&63))])>>>8^t[255&(s^(128|o>>6&15|(3&n)<<4))])>>>8^t[255&(s^(128|63&o))]):s=(s=(s=s>>>8^t[255&(s^(224|n>>12&15))])>>>8^t[255&(s^(128|n>>6&63))])>>>8^t[255&(s^(128|63&n))];return~s}},"undefined"==typeof DO_NOT_EXPORT_CRC?a(t):a({})},83676:(e,t,a)=>{var s=a(11063),i=a(26143)(s);i.push([e.id,".xqnhankfuuilcwvhgsopeqncafzsquya[data-v-243b1d01]{text-align:center}.xqnhankfuuilcwvhgsopeqncafzsquya>.go-index[data-v-243b1d01]{height:42px;left:0;position:absolute;top:0;width:42px;z-index:1}.xqnhankfuuilcwvhgsopeqncafzsquya>header[data-v-243b1d01]{border-bottom:1px dashed var(--reversiGameHeaderLine);padding:8px}.xqnhankfuuilcwvhgsopeqncafzsquya>header a[data-v-243b1d01]{color:inherit}.xqnhankfuuilcwvhgsopeqncafzsquya>.board[data-v-243b1d01]{margin:0 auto;max-width:500px;width:calc(100% - 16px)}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.labels-x[data-v-243b1d01]{display:flex;height:16px;padding:0 16px}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.labels-x>*[data-v-243b1d01]{align-items:center;display:flex;flex:1;font-size:12px;justify-content:center}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.labels-x[data-v-243b1d01]>:first-child{margin-left:-2px}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.labels-x[data-v-243b1d01]>:last-child{margin-right:-2px}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex[data-v-243b1d01]{display:flex}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.labels-y[data-v-243b1d01]{display:flex;flex-direction:column;width:16px}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.labels-y>*[data-v-243b1d01]{align-items:center;display:flex;flex:1;font-size:12px;justify-content:center}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.labels-y[data-v-243b1d01]>:first-child{margin-top:-2px}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.labels-y[data-v-243b1d01]>:last-child{margin-bottom:-2px}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.cells[data-v-243b1d01]{grid-gap:4px;display:grid;flex:1}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.cells>div[data-v-243b1d01]{background:transparent;border-radius:6px;overflow:hidden}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.cells>div *[data-v-243b1d01]{pointer-events:none;user-select:none}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.cells>div.empty[data-v-243b1d01]{border:2px solid var(--reversiGameEmptyCell)}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.cells>div.empty.can[data-v-243b1d01]{background:var(--reversiGameEmptyCell)}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.cells>div.empty.myTurn[data-v-243b1d01]{border-color:var(--reversiGameEmptyCellMyTurn)}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.cells>div.empty.myTurn.can[data-v-243b1d01]{background:var(--reversiGameEmptyCellCanPut);cursor:pointer}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.cells>div.empty.myTurn.can[data-v-243b1d01]:hover{background:var(--primary);border-color:var(--primaryDarken10)}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.cells>div.empty.myTurn.can[data-v-243b1d01]:active{background:var(--primaryDarken10)}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.cells>div.prev[data-v-243b1d01]{box-shadow:0 0 0 4px var(--primaryAlpha07)}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.cells>div.isEnded[data-v-243b1d01]{border-color:var(--reversiGameEmptyCellMyTurn)}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.cells>div.none[data-v-243b1d01]{border-color:transparent!important}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.cells>div>img[data-v-243b1d01],.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.cells>div>svg[data-v-243b1d01]{display:block;height:100%;width:100%}.xqnhankfuuilcwvhgsopeqncafzsquya>.graph[data-v-243b1d01]{display:grid;grid-template-columns:repeat(61,1fr);height:38px;margin:0 auto 16px;width:300px}.xqnhankfuuilcwvhgsopeqncafzsquya>.graph>div[data-v-243b1d01]:not(:empty){background:#ccc}.xqnhankfuuilcwvhgsopeqncafzsquya>.graph>div>div[data-v-243b1d01]:first-child{background:#333}.xqnhankfuuilcwvhgsopeqncafzsquya>.graph>div>div[data-v-243b1d01]:last-child{background:#ccc}.xqnhankfuuilcwvhgsopeqncafzsquya>.status[data-v-243b1d01]{margin:0;padding:16px 0}.xqnhankfuuilcwvhgsopeqncafzsquya>.actions[data-v-243b1d01]{padding-bottom:16px}.xqnhankfuuilcwvhgsopeqncafzsquya>.player[data-v-243b1d01]{margin:0 auto;max-width:500px;padding:0 16px 32px}.xqnhankfuuilcwvhgsopeqncafzsquya>.player>span[data-v-243b1d01]{display:inline-block;margin:0 8px;min-width:70px}",""]),e.exports=i},87247:(e,t,a)=>{var s=a(11063),i=a(26143)(s);i.push([e.id,".phgnkghfpyvkrvwiajkiuoxyrdaqpzcx>h1[data-v-065dfb4c]{background:linear-gradient(to bottom,var(--reversiBannerGradientStart),var(--reversiBannerGradientEnd));color:#fff;font-size:24px;font-weight:400;margin:0;padding:24px;text-align:center}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx>h1+p[data-v-065dfb4c]{border-bottom:1px solid var(--faceDivider);font-size:14px;margin:0 0 12px;padding:12px;text-align:center}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx>.play[data-v-065dfb4c]{margin:0 auto;max-width:500px;padding:0 16px;text-align:center}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx>.play>input[data-v-065dfb4c]{background:var(--desktopPostFormTextareaBg);border:1px solid var(--primaryAlpha01);border-radius:8px;color:var(--inputText);font-size:16px;margin:1em;padding:1em;width:250px}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx>.play>details[data-v-065dfb4c]{margin:8px 0}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx>.play>details>div[data-v-065dfb4c]{background:var(--reversiDescBg);border-radius:8px;font-size:14px;padding:16px;text-align:left}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx>section[data-v-065dfb4c]{border-top:1px solid var(--faceDivider);margin:0 auto;max-width:500px;padding:0 16px 16px}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx>section>h2[data-v-065dfb4c]{font-size:16px;font-weight:700;margin:0;padding:16px 0 8px}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .invitation[data-v-065dfb4c]{background:var(--face);border-radius:6px;box-shadow:0 2px 16px var(--reversiListItemShadow);color:var(--text);cursor:pointer;margin:8px 0;padding:8px}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .invitation *[data-v-065dfb4c]{pointer-events:none;user-select:none}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .invitation[data-v-065dfb4c]:focus{border-color:var(--primary)}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .invitation[data-v-065dfb4c]:hover{box-shadow:inset 0 0 0 100px rgba(0,0,0,.05)}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .invitation[data-v-065dfb4c]:active{box-shadow:inset 0 0 0 100px rgba(0,0,0,.1)}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .invitation>.avatar[data-v-065dfb4c]{border-radius:100%;height:32px;width:32px}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .invitation>span[data-v-065dfb4c]{line-height:32px;margin:0 8px}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .games[data-v-065dfb4c]{display:flex}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .game[data-v-065dfb4c],.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .re[data-v-065dfb4c]{align-items:center;background:var(--face);border-radius:6px;box-shadow:0 2px 16px var(--reversiListItemShadow);color:var(--text);cursor:pointer;display:inline-flex;margin:4px;padding:8px}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .game *[data-v-065dfb4c],.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .re *[data-v-065dfb4c]{pointer-events:none;user-select:none}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .game[data-v-065dfb4c]:hover,.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .re[data-v-065dfb4c]:hover{box-shadow:inset 0 0 0 100px rgba(0,0,0,.05)}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .game[data-v-065dfb4c]:active,.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .re[data-v-065dfb4c]:active{box-shadow:inset 0 0 0 100px rgba(0,0,0,.1)}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .game>.avatar[data-v-065dfb4c],.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .re>.avatar[data-v-065dfb4c]{border-radius:100%;height:32px;width:32px}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .game>span[data-v-065dfb4c],.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .re>span[data-v-065dfb4c]{line-height:32px;margin:0 8px}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .game[data-v-065dfb4c]{width:100%}",""]),e.exports=i},3358:(e,t,a)=>{var s=a(11063),i=a(26143)(s);i.push([e.id,".urbixznjwwuukfsckrwzwsqzsxornqij[data-v-423c4bee]{background:var(--bg);text-align:center}.urbixznjwwuukfsckrwzwsqzsxornqij>header[data-v-423c4bee]{border-bottom:1px dashed #c4cdd4;padding:8px}.urbixznjwwuukfsckrwzwsqzsxornqij>div[data-v-423c4bee]{padding:0 16px}.urbixznjwwuukfsckrwzwsqzsxornqij>div>.card[data-v-423c4bee]{margin:0 auto 16px}.urbixznjwwuukfsckrwzwsqzsxornqij>div>.card.map>header>select[data-v-423c4bee]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:var(--face);border:1px solid var(--reversiMapSelectBorder);border-radius:4px;color:var(--text);cursor:pointer;padding:12px 14px;transition:border-color .2s cubic-bezier(.645,.045,.355,1);width:100%}.urbixznjwwuukfsckrwzwsqzsxornqij>div>.card.map>header>select[data-v-423c4bee]:hover{border-color:var(--reversiMapSelectHoverBorder)}.urbixznjwwuukfsckrwzwsqzsxornqij>div>.card.map>header>select[data-v-423c4bee]:active,.urbixznjwwuukfsckrwzwsqzsxornqij>div>.card.map>header>select[data-v-423c4bee]:focus{border-color:var(--primary)}.urbixznjwwuukfsckrwzwsqzsxornqij>div>.card.map>div>.random[data-v-423c4bee]{color:var(--text);font-size:64px;opacity:.7;padding:32px 0}.urbixznjwwuukfsckrwzwsqzsxornqij>div>.card.map>div>.board[data-v-423c4bee]{grid-gap:4px;color:var(--text);display:grid;height:300px;margin:0 auto;width:300px}.urbixznjwwuukfsckrwzwsqzsxornqij>div>.card.map>div>.board>div[data-v-423c4bee]{background:transparent;border:2px solid var(--faceDivider);border-radius:6px;cursor:pointer;overflow:hidden}.urbixznjwwuukfsckrwzwsqzsxornqij>div>.card.map>div>.board>div *[data-v-423c4bee]{height:100%;pointer-events:none;user-select:none;width:100%}.urbixznjwwuukfsckrwzwsqzsxornqij>div>.card.map>div>.board>div[data-none][data-v-423c4bee]{border-color:transparent}.urbixznjwwuukfsckrwzwsqzsxornqij>div>.card.form>div>.card+.card[data-v-423c4bee]{margin-top:16px}.urbixznjwwuukfsckrwzwsqzsxornqij>div>.card.form>div input[type=range][data-v-423c4bee]{width:100%}.urbixznjwwuukfsckrwzwsqzsxornqij>div .card[data-v-423c4bee]{background:var(--face);border-radius:4px;box-shadow:0 2px 12px 0 var(--reversiRoomFormShadow);color:var(--text);max-width:400px}.urbixznjwwuukfsckrwzwsqzsxornqij>div .card>header[data-v-423c4bee]{border-bottom:1px solid var(--faceDivider);padding:18px 20px}.urbixznjwwuukfsckrwzwsqzsxornqij>div .card>div[data-v-423c4bee]{color:var(--text);padding:20px}.urbixznjwwuukfsckrwzwsqzsxornqij>footer[data-v-423c4bee]{background:var(--reversiRoomFooterBg);border-top:1px solid var(--faceDivider);bottom:0;padding:16px;position:sticky}.urbixznjwwuukfsckrwzwsqzsxornqij>footer>.status[data-v-423c4bee]{margin:0 0 16px}",""]),e.exports=i},68373:(e,t,a)=>{var s=a(11063),i=a(26143)(s);i.push([e.id,".vchtoekanapleubgzioubdtmlkribzfd[data-v-db1a81b8]{background:var(--face);color:var(--text)}.vchtoekanapleubgzioubdtmlkribzfd>.matching>h1[data-v-db1a81b8]{font-size:20px;font-weight:400;margin:0;padding:24px;text-align:center}.vchtoekanapleubgzioubdtmlkribzfd>.matching>.cancel[data-v-db1a81b8]{border-top:1px dashed #c4cdd4;margin:0 auto;max-width:200px;padding:24px 0 0;text-align:center}",""]),e.exports=i},97705:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Ae});var s={};a.r(s),a.d(s,{arena:()=>se,bigBoard:()=>ge,charX:()=>Y,charY:()=>V,checker:()=>ee,circle:()=>N,cpu:()=>K,cross:()=>Q,dealWithIt:()=>he,eighteight:()=>_,eighteightH1:()=>q,eighteightH12:()=>j,eighteightH16:()=>P,eighteightH2:()=>z,eighteightH20:()=>A,eighteightH28:()=>S,eighteightH3:()=>C,eighteightH4:()=>$,eighteightWithNotch:()=>U,eighteightWithSomeHoles:()=>B,experiment:()=>ue,fourfour:()=>f,galaxy:()=>de,grid:()=>W,hole:()=>F,iphonex:()=>le,islands:()=>oe,japaneseCurry:()=>te,lackOfBlack:()=>Z,minesweeper:()=>R,mosaic:()=>ae,parallel:()=>G,reactor:()=>ie,reserved:()=>O,roundedEighteight:()=>I,roundedEighteight2:()=>E,roundedEighteight3:()=>T,roundedSixsix:()=>y,roundedSixsix2:()=>k,sixeight:()=>re,sixsix:()=>x,smile:()=>L,spark:()=>ne,squareParty:()=>H,tenthtenth:()=>X,test1:()=>me,test2:()=>be,test3:()=>ve,test4:()=>we,test5:()=>fe,triangle:()=>ce,twoBoard:()=>pe,walls:()=>J,window:()=>M,x:()=>D});var i=a(31508),r=a(46813),n=a(70090),o=a(49733);const d=!0,c=!1,l=null;class h{constructor(e,t){this.turn=d,this.prevPos=-1,this.prevColor=null,this.logs=[],this.put=this.put.bind(this),this.opts=t,null==this.opts.isLlotheo&&(this.opts.isLlotheo=!1),null==this.opts.canPutEverywhere&&(this.opts.canPutEverywhere=!1),null==this.opts.loopedBoard&&(this.opts.loopedBoard=!1),this.mapWidth=e[0].length,this.mapHeight=e.length;const a=e.join("");this.board=a.split("").map((e=>"-"===e?null:"b"===e?d:"w"===e?c:void 0)),this.map=a.split("").map((e=>"-"===e||"b"===e||"w"===e?"empty":"null")),this.canPutSomewhere(d)||(this.canPutSomewhere(c)?this.turn=c:this.turn=l)}get blackCount(){return(0,o.QX)(d,this.board)}get whiteCount(){return(0,o.QX)(c,this.board)}transformPosToXy(e){return[e%this.mapWidth,Math.floor(e/this.mapWidth)]}transformXyToPos(e,t){return e+t*this.mapWidth}put(e,t){this.prevPos=t,this.prevColor=e,this.board[t]=e;const a=this.effects(e,t);for(const t of a)this.board[t]=e;const s=this.turn;this.logs.push({color:e,pos:t,effects:a,turn:s}),this.calcTurn()}calcTurn(){this.turn=this.canPutSomewhere(!this.prevColor)?!this.prevColor:this.canPutSomewhere(this.prevColor)?this.prevColor:l}undo(){const e=this.logs.pop();this.prevColor=e.color,this.prevPos=e.pos,this.board[e.pos]=null;for(const t of e.effects){const e=this.board[t];this.board[t]=!e}this.turn=e.turn}mapDataGet(e){const[t,a]=this.transformPosToXy(e);return t<0||a<0||t>=this.mapWidth||a>=this.mapHeight?"null":this.map[e]}puttablePlaces(e){return Array.from(this.board.keys()).filter((t=>this.canPut(e,t)))}canPutSomewhere(e){return this.puttablePlaces(e).length>0}canPut(e,t){return null===this.board[t]&&(this.opts.canPutEverywhere?"empty"==this.mapDataGet(t):0!==this.effects(e,t).length)}effects(e,t){const a=!e;return(0,o.zo)([[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1]].map((([s,i])=>{const r=(e,t)=>[e+s,t+i],n=[];let[o,d]=this.transformPosToXy(t);for(;;){if([o,d]=r(o,d),this.opts.loopedBoard&&this.transformXyToPos(o=(o%this.mapWidth+this.mapWidth)%this.mapWidth,d=(d%this.mapHeight+this.mapHeight)%this.mapHeight)==t)return n;if(-1==o||-1==d||o==this.mapWidth||d==this.mapHeight)return[];const s=this.transformXyToPos(o,d);if("null"===this.mapDataGet(s))return[];const i=this.board[s];if(null===i)return[];if(i===a&&n.push(s),i===e)return n}})))}get isEnded(){return this.turn===l}get winner(){return this.isEnded?this.blackCount>this.whiteCount?this.xor(d,this.opts.isLlotheo):this.blackCount<this.whiteCount?this.xor(c,this.opts.isLlotheo):null:void 0}xor(e,t){return(e||t)&&!(e&&t)}}var u=a(87114),g=a(32971),p=a(3123);const m=i.ZP.extend({i18n:(0,r.Z)("common/views/components/games/reversi/reversi.game.vue"),props:{initGame:{type:Object,require:!0},connection:{type:Object,require:!0},selfNav:{type:Boolean,require:!0}},data:()=>({game:null,o:null,logs:[],logPos:0,pollingClock:null,faAngleDoubleLeft:g.UXu,faAngleLeft:g.EyR,faAngleRight:g.yOZ,faAngleDoubleRight:g.cLY,fasCircle:g.diR,farCircle:p.di}),computed:{iAmPlayer(){return!!this.$store.getters.isSignedIn&&(this.game.user1Id==this.$store.state.i.id||this.game.user2Id==this.$store.state.i.id)},myColor(){return this.iAmPlayer?this.game.user1Id==this.$store.state.i.id&&1==this.game.black||this.game.user2Id==this.$store.state.i.id&&2==this.game.black:null},opColor(){return this.iAmPlayer?!0!==this.myColor:null},blackUser(){return 1==this.game.black?this.game.user1:this.game.user2},whiteUser(){return 1==this.game.black?this.game.user2:this.game.user1},turnUser(){return!0===this.o.turn?1==this.game.black?this.game.user1:this.game.user2:!1===this.o.turn?1==this.game.black?this.game.user2:this.game.user1:null},isMyTurn(){return!!this.iAmPlayer&&(null!=this.turnUser&&this.turnUser.id==this.$store.state.i.id)},cellsStyle(){return{"grid-template-rows":`repeat(${this.game.settings.map.length}, 1fr)`,"grid-template-columns":`repeat(${this.game.settings.map[0].length}, 1fr)`}}},watch:{logPos(e){if(this.game.isEnded){this.o=new h(this.game.settings.map,{isLlotheo:this.game.settings.isLlotheo,canPutEverywhere:this.game.settings.canPutEverywhere,loopedBoard:this.game.settings.loopedBoard});for(const t of this.logs.slice(0,e))this.o.put(t.color,t.pos);this.$forceUpdate()}}},created(){this.game=this.initGame,this.o=new h(this.game.settings.map,{isLlotheo:this.game.settings.isLlotheo,canPutEverywhere:this.game.settings.canPutEverywhere,loopedBoard:this.game.settings.loopedBoard});for(const e of this.game.logs)this.o.put(e.color,e.pos);this.logs=this.game.logs,this.logPos=this.logs.length,this.game.isStarted&&!this.game.isEnded&&(this.pollingClock=setInterval((()=>{const e=n.str(this.logs.map((e=>e.pos.toString())).join(""));this.connection.send("check",{crc32:e})}),3e3))},mounted(){this.connection.on("set",this.onSet),this.connection.on("rescue",this.onRescue),this.connection.on("ended",this.onEnded)},beforeDestroy(){this.connection.off("set",this.onSet),this.connection.off("rescue",this.onRescue),this.connection.off("ended",this.onEnded),clearInterval(this.pollingClock)},methods:{set(e){if(!this.game.isEnded&&this.iAmPlayer&&this.isMyTurn&&this.o.canPut(this.myColor,e)){if(this.o.put(this.myColor,e),this.$store.state.device.enableSounds){const e=new Audio(`${u.HQ}/assets/reversi-put-me.mp3`);e.volume=this.$store.state.device.soundVolume,e.play()}this.connection.send("set",{pos:e}),this.checkEnd(),this.$forceUpdate()}},onSet(e){if(this.logs.push(e),this.logPos++,this.o.put(e.color,e.pos),this.checkEnd(),this.$forceUpdate(),this.$store.state.device.enableSounds&&e.color!=this.myColor){const e=new Audio(`${u.HQ}/assets/reversi-put-you.mp3`);e.volume=this.$store.state.device.soundVolume,e.play()}},onEnded(e){this.game=e.game},checkEnd(){this.game.isEnded=this.o.isEnded,this.game.isEnded&&(!0===this.o.winner?(this.game.winnerId=1==this.game.black?this.game.user1Id:this.game.user2Id,this.game.winner=1==this.game.black?this.game.user1:this.game.user2):!1===this.o.winner?(this.game.winnerId=1==this.game.black?this.game.user2Id:this.game.user1Id,this.game.winner=1==this.game.black?this.game.user2:this.game.user1):(this.game.winnerId=null,this.game.winner=null))},onRescue(e){this.game=e,this.o=new h(this.game.settings.map,{isLlotheo:this.game.settings.isLlotheo,canPutEverywhere:this.game.settings.canPutEverywhere,loopedBoard:this.game.settings.loopedBoard});for(const e of this.game.logs)this.o.put(e.color,e.pos,!0);this.logs=this.game.logs,this.logPos=this.logs.length,this.checkEnd(),this.$forceUpdate()},surrender(){this.$root.api("games/reversi/games/surrender",{gameId:this.game.id})},goIndex(){this.$emit("go-index")}}}),b=m;a(55827);var v=a(26385);const w=(0,v.Z)(b,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"xqnhankfuuilcwvhgsopeqncafzsquya"},[e.selfNav?t("button",{staticClass:"go-index",on:{click:e.goIndex}},[t("fa",{attrs:{icon:"arrow-left"}})],1):e._e(),t("header",[t("b",[t("router-link",{attrs:{to:e._f("userPage")(e.blackUser)}},[t("mk-user-name",{attrs:{user:e.blackUser}})],1)],1),t("span",[t("fa",{attrs:{icon:e.fasCircle}})],1),e._v(" vs "),t("b",[t("router-link",{attrs:{to:e._f("userPage")(e.whiteUser)}},[t("mk-user-name",{attrs:{user:e.whiteUser}})],1)],1),t("span",[t("fa",{attrs:{icon:e.farCircle}})],1)]),t("div",{staticStyle:{overflow:"hidden","line-height":"16px"}},[e.iAmPlayer||e.game.isEnded?e._e():t("p",{staticClass:"turn"},[t("mfm",{key:"turn:"+e.$options.filters.userName(e.turnUser),attrs:{text:e.$t("@.reversi.turn-of",{name:e.$options.filters.userName(e.turnUser)}),plain:!0,"custom-emojis":e.turnUser.emojis}}),t("mk-ellipsis")],1),e.logPos!=e.logs.length?t("p",{staticClass:"turn"},[t("mfm",{key:"past-turn-of:"+e.$options.filters.userName(e.turnUser),attrs:{text:e.$t("@.reversi.past-turn-of",{name:e.$options.filters.userName(e.turnUser)}),plain:!0,"custom-emojis":e.turnUser.emojis}})],1):e._e(),!e.iAmPlayer||e.game.isEnded||e.isMyTurn?e._e():t("p",{staticClass:"turn1"},[e._v(e._s(e.$t("@.reversi.opponent-turn"))),t("mk-ellipsis")],1),e.iAmPlayer&&!e.game.isEnded&&e.isMyTurn?t("p",{directives:[{name:"animate-css",rawName:"v-animate-css",value:{classes:"tada",iteration:"infinite"},expression:"{ classes: 'tada', iteration: 'infinite' }"}],staticClass:"turn2"},[e._v(e._s(e.$t("@.reversi.my-turn")))]):e._e(),e.game.isEnded&&e.logPos==e.logs.length?t("p",{staticClass:"result"},[e.game.winner?[t("mfm",{key:"won",attrs:{text:e.$t("@.reversi.won",{name:e.$options.filters.userName(e.game.winner)}),plain:!0,"custom-emojis":e.game.winner.emojis}}),null!=e.game.surrendered?t("span",[e._v(" ("+e._s(e.$t("surrendered"))+")")]):e._e()]:[e._v(e._s(e.$t("@.reversi.drawn")))]],2):e._e()]),t("div",{staticClass:"board"},[this.$store.state.settings.games.reversi.showBoardLabels?t("div",{staticClass:"labels-x"},e._l(e.game.settings.map[0].length,(function(a){return t("span",[e._v(e._s(String.fromCharCode(64+a)))])})),0):e._e(),t("div",{staticClass:"flex"},[this.$store.state.settings.games.reversi.showBoardLabels?t("div",{staticClass:"labels-y"},e._l(e.game.settings.map.length,(function(a){return t("div",[e._v(e._s(a))])})),0):e._e(),t("div",{staticClass:"cells",style:e.cellsStyle},e._l(e.o.board,(function(a,s){return t("div",{class:{empty:null==a,none:"null"==e.o.map[s],isEnded:e.game.isEnded,myTurn:!e.game.isEnded&&e.isMyTurn,can:e.turnUser?e.o.canPut(e.turnUser.id==e.blackUser.id,s):null,prev:e.o.prevPos==s},attrs:{title:`${String.fromCharCode(65+e.o.transformPosToXy(s)[0])}${e.o.transformPosToXy(s)[1]+1}`},on:{click:function(t){return e.set(s)}}},[e.$store.state.settings.games.reversi.useAvatarStones?[!0===a?t("img",{attrs:{src:e.blackUser.avatarUrl,alt:"black"}}):e._e(),!1===a?t("img",{attrs:{src:e.whiteUser.avatarUrl,alt:"white"}}):e._e()]:[!0===a?t("fa",{attrs:{icon:e.fasCircle}}):e._e(),!1===a?t("fa",{attrs:{icon:e.farCircle}}):e._e()]],2)})),0),this.$store.state.settings.games.reversi.showBoardLabels?t("div",{staticClass:"labels-y"},e._l(e.game.settings.map.length,(function(a){return t("div",[e._v(e._s(a))])})),0):e._e()]),this.$store.state.settings.games.reversi.showBoardLabels?t("div",{staticClass:"labels-x"},e._l(e.game.settings.map[0].length,(function(a){return t("span",[e._v(e._s(String.fromCharCode(64+a)))])})),0):e._e()]),t("p",{staticClass:"status"},[t("b",[e._v(e._s(e.$t("@.reversi.this-turn",{count:e.logPos})))]),t("fa",{staticStyle:{"margin-left":"0.5em"},attrs:{icon:e.fasCircle}}),e._v(":"+e._s(e.o.blackCount)+" "),t("fa",{attrs:{icon:e.farCircle}}),e._v(":"+e._s(e.o.whiteCount)+" "+e._s(e.$t("@.reversi.total"))+":"+e._s(e.o.blackCount+e.o.whiteCount))],1),!e.game.isEnded&&e.iAmPlayer?t("div",{staticClass:"actions"},[t("form-button",{on:{click:e.surrender}},[e._v(e._s(e.$t("surrender")))])],1):e._e(),e.game.isEnded?t("div",{staticClass:"player"},[t("span",[e._v(e._s(e.logPos)+" / "+e._s(e.logs.length))]),t("ui-horizon-group",[t("ui-button",{attrs:{disabled:0==e.logPos},on:{click:function(t){e.logPos=0}}},[t("fa",{attrs:{icon:e.faAngleDoubleLeft}})],1),t("ui-button",{attrs:{disabled:0==e.logPos},on:{click:function(t){e.logPos--}}},[t("fa",{attrs:{icon:e.faAngleLeft}})],1),t("ui-button",{attrs:{disabled:e.logPos==e.logs.length},on:{click:function(t){e.logPos++}}},[t("fa",{attrs:{icon:e.faAngleRight}})],1),t("ui-button",{attrs:{disabled:e.logPos==e.logs.length},on:{click:function(t){e.logPos=e.logs.length}}},[t("fa",{attrs:{icon:e.faAngleDoubleRight}})],1)],1)],1):e._e(),t("div",{staticClass:"info"},[e.game.settings.isLlotheo?t("p",[e._v(e._s(e.$t("is-llotheo")))]):e._e(),e.game.settings.loopedBoard?t("p",[e._v(e._s(e.$t("looped-map")))]):e._e(),e.game.settings.canPutEverywhere?t("p",[e._v(e._s(e.$t("can-put-everywhere")))]):e._e()])])}),[],!1,null,"243b1d01",null).exports;const f={name:"4x4",category:"4x4",data:["----","-wb-","-bw-","----"]},x={name:"6x6",category:"6x6",data:["------","------","--wb--","--bw--","------","------"]},y={name:"6x6 rounded",category:"6x6",author:"syuilo",data:[" ---- ","------","--wb--","--bw--","------"," ---- "]},k={name:"6x6 rounded 2",category:"6x6",author:"syuilo",data:["  --  "," ---- ","--wb--","--bw--"," ---- ","  --  "]},_={name:"8x8",category:"8x8",data:["--------","--------","--------","---wb---","---bw---","--------","--------","--------"]},q={name:"8x8 handicap 1",category:"8x8",data:["b-------","--------","--------","---wb---","---bw---","--------","--------","--------"]},z={name:"8x8 handicap 2",category:"8x8",data:["b-------","--------","--------","---wb---","---bw---","--------","--------","-------b"]},C={name:"8x8 handicap 3",category:"8x8",data:["b------b","--------","--------","---wb---","---bw---","--------","--------","-------b"]},$={name:"8x8 handicap 4",category:"8x8",data:["b------b","--------","--------","---wb---","---bw---","--------","--------","b------b"]},j={name:"8x8 handicap 12",category:"8x8",data:["bb----bb","b------b","--------","---wb---","---bw---","--------","b------b","bb----bb"]},P={name:"8x8 handicap 16",category:"8x8",data:["bbb---bb","b------b","-------b","---wb---","---bw---","b-------","b------b","bb---bbb"]},A={name:"8x8 handicap 20",category:"8x8",data:["bbb--bbb","b------b","b------b","---wb---","---bw---","b------b","b------b","bbb---bb"]},S={name:"8x8 handicap 28",category:"8x8",data:["bbbbbbbb","b------b","b------b","b--wb--b","b--bw--b","b------b","b------b","bbbbbbbb"]},I={name:"8x8 rounded",category:"8x8",author:"syuilo",data:[" ------ ","--------","--------","---wb---","---bw---","--------","--------"," ------ "]},E={name:"8x8 rounded 2",category:"8x8",author:"syuilo",data:["  ----  "," ------ ","--------","---wb---","---bw---","--------"," ------ ","  ----  "]},T={name:"8x8 rounded 3",category:"8x8",author:"syuilo",data:["   --   ","  ----  "," ------ ","---wb---","---bw---"," ------ ","  ----  ","   --   "]},U={name:"8x8 with notch",category:"8x8",author:"syuilo",data:["---  ---","--------","--------"," --wb-- "," --bw-- ","--------","--------","---  ---"]},B={name:"8x8 with some holes",category:"8x8",author:"syuilo",data:["--- ----","----- --","-- -----","---wb---","---bw- -"," -------","--- ----","--------"]},N={name:"Circle",category:"8x8",author:"syuilo",data:["   --   "," ------ "," ------ ","---wb---","---bw---"," ------ "," ------ ","   --   "]},L={name:"Smile",category:"8x8",author:"syuilo",data:[" ------ ","--------","-- -- --","---wb---","-- bw --","---  ---","--------"," ------ "]},M={name:"Window",category:"8x8",author:"syuilo",data:["--------","-  --  -","-  --  -","---wb---","---bw---","-  --  -","-  --  -","--------"]},O={name:"Reserved",category:"8x8",author:"Aya",data:["w------b","--------","--------","---wb---","---bw---","--------","--------","b------w"]},D={name:"X",category:"8x8",author:"Aya",data:["w------b","-w----b-","--w--b--","---wb---","---bw---","--b--w--","-b----w-","b------w"]},G={name:"Parallel",category:"8x8",author:"Aya",data:["--------","--------","--------","---bb---","---ww---","--------","--------","--------"]},Z={name:"Lack of Black",category:"8x8",data:["--------","--------","--------","---w----","---bw---","--------","--------","--------"]},H={name:"Square Party",category:"8x8",author:"syuilo",data:["--------","-wwwbbb-","-w-wb-b-","-wwwbbb-","-bbbwww-","-b-bw-w-","-bbbwww-","--------"]},R={name:"Minesweeper",category:"8x8",author:"syuilo",data:["b-b--w-w","-w-wb-b-","w-b--w-b","-b-wb-w-","-w-bw-b-","b-w--b-w","-b-bw-w-","w-w--b-b"]},X={name:"10x10",category:"10x10",data:["----------","----------","----------","----------","----wb----","----bw----","----------","----------","----------","----------"]},F={name:"The Hole",category:"10x10",author:"syuilo",data:["----------","----------","--wb--wb--","--bw--bw--","----  ----","----  ----","--wb--wb--","--bw--bw--","----------","----------"]},W={name:"Grid",category:"10x10",author:"syuilo",data:["----------","- - -- - -","----------","- - -- - -","----wb----","----bw----","- - -- - -","----------","- - -- - -","----------"]},Q={name:"Cross",category:"10x10",author:"Aya",data:["   ----   ","   ----   ","   ----   ","----------","----wb----","----bw----","----------","   ----   ","   ----   ","   ----   "]},Y={name:"Char X",category:"10x10",author:"syuilo",data:["---    ---","----  ----","----------"," -------- ","  --wb--  ","  --bw--  "," -------- ","----------","----  ----","---    ---"]},V={name:"Char Y",category:"10x10",author:"syuilo",data:["---    ---","----  ----","----------"," -------- ","  --wb--  ","  --bw--  ","  ------  ","  ------  ","  ------  ","  ------  "]},J={name:"Walls",category:"10x10",author:"Aya",data:[" bbbbbbbb ","w--------w","w--------w","w--------w","w---wb---w","w---bw---w","w--------w","w--------w","w--------w"," bbbbbbbb "]},K={name:"CPU",category:"10x10",author:"syuilo",data:[" b b  b b ","w--------w"," -------- ","w--------w"," ---wb--- "," ---bw--- ","w--------w"," -------- ","w--------w"," b b  b b "]},ee={name:"Checker",category:"10x10",author:"Aya",data:["----------","----------","----------","---wbwb---","---bwbw---","---wbwb---","---bwbw---","----------","----------","----------"]},te={name:"Japanese curry",category:"10x10",author:"syuilo",data:["w-b-b-b-b-","-w-b-b-b-b","w-w-b-b-b-","-w-w-b-b-b","w-w-wwb-b-","-w-wbb-b-b","w-w-w-b-b-","-w-w-w-b-b","w-w-w-w-b-","-w-w-w-w-b"]},ae={name:"Mosaic",category:"10x10",author:"syuilo",data:["- - - - - "," - - - - -","- - - - - "," - w w - -","- - b b - "," - w w - -","- - b b - "," - - - - -","- - - - - "," - - - - -"]},se={name:"Arena",category:"10x10",author:"syuilo",data:["- - -- - -"," - -  - - ","- ------ -"," -------- ","- --wb-- -","- --bw-- -"," -------- ","- ------ -"," - -  - - ","- - -- - -"]},ie={name:"Reactor",category:"10x10",author:"syuilo",data:["-w------b-","b- -  - -w","- --wb-- -","---b  w---","- b wb w -","- w bw b -","---w  b---","- --bw-- -","w- -  - -b","-b------w-"]},re={name:"6x8",category:"Special",data:["------","------","------","--wb--","--bw--","------","------","------"]},ne={name:"Spark",category:"Special",author:"syuilo",data:[" -      - ","----------"," -------- "," -------- "," ---wb--- "," ---bw--- "," -------- "," -------- ","----------"," -      - "]},oe={name:"Islands",category:"Special",author:"syuilo",data:["--------  ","---wb---  ","---bw---  ","--------  ","  -    -  ","  -    -  ","  --------","  --------","  --------","  --------"]},de={name:"Galaxy",category:"Special",author:"syuilo",data:["   ------   ","  --www---  "," ------w--- ","---bbb--w---","--b---b-w-b-","-b--wwb-w-b-","-b-w-bww--b-","-b-w-b---b--","---w--bbb---"," ---w------ ","  ---www--  ","   ------   "]},ce={name:"Triangle",category:"Special",author:"syuilo",data:["    --    ","    --    ","   ----   ","   ----   ","  --wb--  ","  --bw--  "," -------- "," -------- ","----------","----------"]},le={name:"iPhone X",category:"Special",author:"syuilo",data:[" --  -- ","--------","--------","--------","--------","---wb---","---bw---","--------","--------","--------","--------"," ------ "]},he={name:"Deal with it!",category:"Special",author:"syuilo",data:["------------","--w-b-------"," --b-w------","  --w-b---- ","   -------  "]},ue={name:"Let's experiment",category:"Special",author:"syuilo",data:[" ------------ ","------wb------","------bw------","--------------","    -    -    ","------  ------","bbbbbb  wwwwww","bbbbbb  wwwwww","bbbbbb  wwwwww","bbbbbb  wwwwww","wwwwww  bbbbbb"]},ge={name:"Big board",category:"Special",data:["----------------","----------------","----------------","----------------","----------------","----------------","----------------","-------wb-------","-------bw-------","----------------","----------------","----------------","----------------","----------------","----------------","----------------"]},pe={name:"Two board",category:"Special",author:"Aya",data:["-------- --------","-------- --------","-------- --------","---wb--- ---wb---","---bw--- ---bw---","-------- --------","-------- --------","-------- --------"]},me={name:"Test1",category:"Test",data:["--------","---wb---","---bw---","--------"]},be={name:"Test2",category:"Test",data:["------","------","-b--w-","-w--b-","-w--b-"]},ve={name:"Test3",category:"Test",data:["-w-","--w","w--","-w-","--w","w--","-w-","--w","w--","-w-","---","b--"]},we={name:"Test4",category:"Test",data:["-w--b-","-w--b-","------","-w--b-","-w--b-"]},fe={name:"Test5",category:"Test",data:["--wwwwww--","--wwwbwwww","-bwwbwbwww","-bwwwbwbww","-bwwbwbwbw","-bwbwbwb-w","bwbwwbbb-w","w-wbbbbb--","--w-b-w---","----------"]},xe=i.ZP.extend({i18n:(0,r.Z)("common/views/components/games/reversi/reversi.room.vue"),props:["game","connection"],data:()=>({o:null,isLlotheo:!1,mapName:_.name,maps:s,form:null,messages:[],fasCircle:g.diR,farCircle:p.di}),computed:{mapCategories(){const e=Object.values(s).map((e=>e.category));return e.filter(((t,a)=>e.indexOf(t)==a))},isAccepted(){return!(this.game.user1Id!=this.$store.state.i.id||!this.game.user1Accepted)||!(this.game.user2Id!=this.$store.state.i.id||!this.game.user2Accepted)},isOpAccepted(){return!(this.game.user1Id==this.$store.state.i.id||!this.game.user1Accepted)||!(this.game.user2Id==this.$store.state.i.id||!this.game.user2Accepted)}},created(){this.connection.on("changeAccepts",this.onChangeAccepts),this.connection.on("updateSettings",this.onUpdateSettings),this.connection.on("initForm",this.onInitForm),this.connection.on("message",this.onMessage),this.game.user1Id!=this.$store.state.i.id&&this.game.settings.form1&&(this.form=this.game.settings.form1),this.game.user2Id!=this.$store.state.i.id&&this.game.settings.form2&&(this.form=this.game.settings.form2)},beforeDestroy(){this.connection.off("changeAccepts",this.onChangeAccepts),this.connection.off("updateSettings",this.onUpdateSettings),this.connection.off("initForm",this.onInitForm),this.connection.off("message",this.onMessage)},methods:{exit(){},accept(){this.connection.send("accept",{})},cancel(){this.connection.send("cancelAccept",{})},onChangeAccepts(e){this.game.user1Accepted=e.user1,this.game.user2Accepted=e.user2,this.$forceUpdate()},updateSettings(){this.connection.send("updateSettings",{settings:this.game.settings})},onUpdateSettings(e){if(this.game.settings=e,null==this.game.settings.map)this.mapName=null;else{const e=Object.values(s).find((e=>e.data.join("")==this.game.settings.map.join("")));this.mapName=e?e.name:"-Custom-"}},onInitForm(e){e.userId!=this.$store.state.i.id&&(this.form=e.form)},onMessage(e){e.userId!=this.$store.state.i.id&&this.messages.unshift(e.message)},onChangeForm(e){this.connection.send("updateForm",{id:e.id,value:e.value})},onMapChange(){null==this.mapName?this.game.settings.map=null:this.game.settings.map=Object.values(s).find((e=>e.name==this.mapName)).data,this.$forceUpdate(),this.updateSettings()},onPixelClick(e,t){const a=e%this.game.settings.map[0].length,s=Math.floor(e/this.game.settings.map[0].length),i=" "==t?"-":"-"==t?"b":"b"==t?"w":" ",r=this.game.settings.map[s].split("");r[a]=i,this.$set(this.game.settings.map,s,r.join("")),this.$forceUpdate(),this.updateSettings()}}}),ye=xe;a(5081);var ke=(0,v.Z)(ye,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"urbixznjwwuukfsckrwzwsqzsxornqij"},[t("header",[t("b",[t("mk-user-name",{attrs:{user:e.game.user1}})],1),e._v(" vs "),t("b",[t("mk-user-name",{attrs:{user:e.game.user2}})],1)]),t("div",[t("p",[e._v(e._s(e.$t("settings-of-the-game")))]),t("div",{staticClass:"card map"},[t("header",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.mapName,expression:"mapName"}],attrs:{placeholder:e.$t("choose-map")},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.mapName=t.target.multiple?a:a[0]},e.onMapChange]}},["-Custom-"==e.mapName?t("option",{attrs:{label:"-Custom-"},domProps:{value:e.mapName}}):e._e(),t("option",{attrs:{label:e.$t("random")},domProps:{value:null}}),e._l(e.mapCategories,(function(a){return t("optgroup",{key:a,attrs:{label:a}},e._l(e.maps,(function(s){return s.category==a?t("option",{key:s.name,attrs:{label:s.name},domProps:{value:s.name}},[e._v(e._s(s.name))]):e._e()})),0)}))],2)]),t("div",[null==e.game.settings.map?t("div",{staticClass:"random"},[t("fa",{attrs:{icon:"dice"}})],1):t("div",{staticClass:"board",style:{"grid-template-rows":`repeat(${e.game.settings.map.length}, 1fr)`,"grid-template-columns":`repeat(${e.game.settings.map[0].length}, 1fr)`}},e._l(e.game.settings.map.join(""),(function(a,s){return t("div",{attrs:{"data-none":" "==a},on:{click:function(t){return e.onPixelClick(s,a)}}},["b"==a?t("fa",{attrs:{icon:e.fasCircle}}):e._e(),"w"==a?t("fa",{attrs:{icon:e.farCircle}}):e._e()],1)})),0)])]),t("div",{staticClass:"card"},[t("header",[t("span",[e._v(e._s(e.$t("black-or-white")))])]),t("div",[t("form-radio",{attrs:{value:"random"},on:{change:e.updateSettings},model:{value:e.game.settings.bw,callback:function(t){e.$set(e.game.settings,"bw",t)},expression:"game.settings.bw"}},[e._v(e._s(e.$t("random")))]),t("form-radio",{attrs:{value:1},on:{change:e.updateSettings},model:{value:e.game.settings.bw,callback:function(t){e.$set(e.game.settings,"bw",t)},expression:"game.settings.bw"}},[t("b",[t("mk-user-name",{attrs:{user:e.game.user1}})],1)]),t("form-radio",{attrs:{value:2},on:{change:e.updateSettings},model:{value:e.game.settings.bw,callback:function(t){e.$set(e.game.settings,"bw",t)},expression:"game.settings.bw"}},[t("b",[t("mk-user-name",{attrs:{user:e.game.user2}})],1)])],1)]),t("div",{staticClass:"card"},[t("header",[t("span",[e._v(e._s(e.$t("rules")))])]),t("div",[t("ui-switch",{on:{change:e.updateSettings},model:{value:e.game.settings.isLlotheo,callback:function(t){e.$set(e.game.settings,"isLlotheo",t)},expression:"game.settings.isLlotheo"}},[e._v(e._s(e.$t("is-llotheo")))]),t("ui-switch",{on:{change:e.updateSettings},model:{value:e.game.settings.loopedBoard,callback:function(t){e.$set(e.game.settings,"loopedBoard",t)},expression:"game.settings.loopedBoard"}},[e._v(e._s(e.$t("looped-map")))]),t("ui-switch",{on:{change:e.updateSettings},model:{value:e.game.settings.canPutEverywhere,callback:function(t){e.$set(e.game.settings,"canPutEverywhere",t)},expression:"game.settings.canPutEverywhere"}},[e._v(e._s(e.$t("can-put-everywhere")))])],1)]),e.form?t("div",{staticClass:"card form"},[t("header",[t("span",[e._v(e._s(e.$t("settings-of-the-bot")))])]),t("div",[e._l(e.form,(function(a){return["switch"==a.type?t("ui-switch",{key:a.id,on:{change:function(t){return e.onChangeForm(a)}},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}},[e._v(e._s(a.label||a.desc||""))]):e._e(),"radio"==a.type?t("div",{key:a.id,staticClass:"card"},[t("header",[t("span",[e._v(e._s(a.label))])]),t("div",e._l(a.items,(function(s,i){return t("form-radio",{key:a.id+":"+i,attrs:{value:s.value},on:{change:function(t){return e.onChangeForm(a)}},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}},[e._v(e._s(s.label))])})),1)]):e._e(),"slider"==a.type?t("div",{key:a.id,staticClass:"card"},[t("header",[t("span",[e._v(e._s(a.label))])]),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],attrs:{type:"range",min:a.min,max:a.max,step:a.step||1},domProps:{value:a.value},on:{change:function(t){return e.onChangeForm(a)},__r:function(t){return e.$set(a,"value",t.target.value)}}})])]):e._e(),"textbox"==a.type?t("div",{key:a.id,staticClass:"card"},[t("header",[t("span",[e._v(e._s(a.label))])]),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],domProps:{value:a.value},on:{change:function(t){return e.onChangeForm(a)},input:function(t){t.target.composing||e.$set(a,"value",t.target.value)}}})])]):e._e()]}))],2)]):e._e()]),t("footer",[t("p",{staticClass:"status"},[e.isAccepted&&e.isOpAccepted?[e._v(e._s(e.$t("this-game-is-started-soon"))),t("mk-ellipsis")]:e._e(),e.isAccepted&&!e.isOpAccepted?[e._v(e._s(e.$t("waiting-for-other"))),t("mk-ellipsis")]:e._e(),!e.isAccepted&&e.isOpAccepted?[e._v(e._s(e.$t("waiting-for-me")))]:e._e(),e.isAccepted||e.isOpAccepted?e._e():[e._v(e._s(e.$t("waiting-for-both"))),t("mk-ellipsis")]],2),t("div",{staticClass:"actions"},[t("form-button",{on:{click:e.exit}},[e._v(e._s(e.$t("cancel")))]),e.isAccepted?e._e():t("form-button",{attrs:{primary:""},on:{click:e.accept}},[e._v(e._s(e.$t("ready")))]),e.isAccepted?t("form-button",{attrs:{primary:""},on:{click:e.cancel}},[e._v(e._s(e.$t("cancel-ready")))]):e._e()],1)])])}),[],!1,null,"423c4bee",null);const _e=ke.exports,qe=i.ZP.extend({i18n:(0,r.Z)("common/views/components/games/reversi/reversi.gameroom.vue"),components:{XGame:w,XRoom:_e},props:{game:{type:Object,required:!0},selfNav:{type:Boolean,require:!0}},data:()=>({connection:null,g:null}),created(){this.g=this.game,this.connection=this.$root.stream.connectToChannel("gamesReversiGame",{gameId:this.game.id}),this.connection.on("started",this.onStarted)},beforeDestroy(){this.connection.dispose()},methods:{onStarted(e){Object.assign(this.g,e),this.$forceUpdate()},goIndex(){this.$emit("go-index")}}});const ze=(0,v.Z)(qe,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[e.g.isStarted?t("x-game",{attrs:{"init-game":e.g,connection:e.connection,"self-nav":e.selfNav},on:{"go-index":e.goIndex}}):t("x-room",{attrs:{game:e.g,connection:e.connection}})],1)}),[],!1,null,null,null).exports;const Ce=i.ZP.extend({i18n:(0,r.Z)("common/views/components/games/reversi/reversi.index.vue"),data:()=>({q:"",games:[],gamesFetching:!0,gamesMoreFetching:!1,myGames:[],matching:null,invitations:[],connection:null}),mounted(){this.$store.getters.isSignedIn&&(this.connection=this.$root.stream.useSharedConnection("gamesReversi"),this.connection.on("invited",this.onInvited),this.$root.api("games/reversi/games",{my:!0}).then((e=>{this.myGames=e})),this.$root.api("games/reversi/invitations").then((e=>{this.invitations=this.invitations.concat(e)}))),this.$root.api("games/reversi/games").then((e=>{this.games=e,this.gamesFetching=!1}))},beforeDestroy(){this.connection&&this.connection.dispose()},methods:{go(e){this.$emit("go",e)},match(){const e=this.q.match(/^@(\w+)/);if(!e)return;const t=e[1];this.$root.api("users/show",{username:t}).catch((e=>{this.$root.dialog({type:"error",text:e.message})})).then((e=>{this.matchWith(e)}))},matchWith(e){this.$root.api("games/reversi/match",{userId:e.id}).then((t=>{null==t?this.$emit("matching",e):this.$emit("go",t)}))},accept(e){this.$root.api("games/reversi/match",{userId:e.parent.id}).then((e=>{e&&this.$emit("go",e)}))},getOtherUser(e){return e.user1.id==this.$store.state.i.id?e.user2:e.user1},onInvited(e){this.invitations.unshift(e)}}});a(27138);const $e=(0,v.Z)(Ce,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"phgnkghfpyvkrvwiajkiuoxyrdaqpzcx"},[t("h1",[e._v(e._s(e.$t("title")))]),t("p",[e._v(e._s(e.$t("sub-title")))]),t("div",{staticClass:"play"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.q,expression:"q"},{name:"autocomplete",rawName:"v-autocomplete",value:{model:"q",userOnly:!0,localOnly:!0},expression:"{ model: 'q', userOnly: true, localOnly: true }"}],attrs:{type:"search",placeholder:"@user"},domProps:{value:e.q},on:{input:function(t){t.target.composing||(e.q=t.target.value)}}}),t("form-button",{attrs:{primary:"",round:""},on:{click:e.match}},[e._v(e._s(e.$t("invite")))]),t("details",[t("summary",[e._v(e._s(e.$t("rule")))]),t("div",[t("p",[e._v(e._s(e.$t("rule-desc")))]),t("dl",[t("dt",[t("b",[e._v(e._s(e.$t("mode-invite")))])]),t("dd",[e._v(e._s(e.$t("mode-invite-desc")))])])])])],1),e.invitations.length>0?t("section",[t("h2",[e._v(e._s(e.$t("invitations")))]),e._l(e.invitations,(function(a){return t("div",{key:a.id,staticClass:"invitation",attrs:{tabindex:"-1"},on:{click:function(t){return e.accept(a)}}},[t("mk-avatar",{staticClass:"avatar",attrs:{user:a.parent}}),t("span",{staticClass:"name"},[t("b",[t("mk-user-name",{attrs:{user:a.parent}})],1)]),t("span",{staticClass:"username"},[e._v("@"+e._s(a.parent.username))]),t("mk-time",{attrs:{time:a.createdAt}})],1)}))],2):e._e(),e.myGames.length>0?t("section",[t("h2",[e._v(e._s(e.$t("my-games")))]),e._l(e.myGames,(function(a){return t("div",{key:a.id,staticClass:"games"},[t("a",{staticClass:"game",attrs:{tabindex:"-1",href:`/games/reversi/${a.id}`},on:{click:function(t){return t.preventDefault(),e.go(a)}}},[t("mk-avatar",{staticClass:"avatar",attrs:{user:e.getOtherUser(a)}}),t("span",[t("b",[t("mk-user-name",{attrs:{user:e.getOtherUser(a)}})],1)]),t("span",{staticClass:"state"},[e._v(e._s(a.isEnded?e.$t("game-state.ended"):e.$t("game-state.playing")))]),t("mk-time",{attrs:{time:a.createdAt}})],1),t("a",{staticClass:"re",on:{click:function(t){e.matchWith(e.getOtherUser(a))}}},[t("fa",{attrs:{icon:"gamepad"}})],1)])}))],2):e._e(),e.games.length>0?t("section",[t("h2",[e._v(e._s(e.$t("all-games")))]),e._l(e.games,(function(a){return t("a",{key:a.id,staticClass:"game",attrs:{tabindex:"-1",href:`/games/reversi/${a.id}`},on:{click:function(t){return t.preventDefault(),e.go(a)}}},[t("mk-avatar",{staticClass:"avatar",attrs:{user:a.user1}}),t("mk-avatar",{staticClass:"avatar",attrs:{user:a.user2}}),t("span",[t("b",[t("mk-user-name",{attrs:{user:a.user1}})],1),e._v(" vs "),t("b",[t("mk-user-name",{attrs:{user:a.user2}})],1)]),t("span",{staticClass:"state"},[e._v(e._s(a.isEnded?e.$t("game-state.ended"):e.$t("game-state.playing")))]),t("mk-time",{attrs:{time:a.createdAt}})],1)}))],2):e._e()])}),[],!1,null,"065dfb4c",null).exports;var je=a(87186);const Pe=i.ZP.extend({i18n:(0,r.Z)("common/views/components/games/reversi/reversi.vue"),components:{XGameroom:ze,XIndex:$e},props:{gameId:{type:String,required:!1},selfNav:{type:Boolean,require:!1,default:!0}},data:()=>({game:null,matching:null,connection:null,pingClock:null}),watch:{game(){this.$emit("gamed",this.game)},gameId(){this.fetch()}},mounted(){this.fetch(),this.$store.getters.isSignedIn&&(this.connection=this.$root.stream.useSharedConnection("gamesReversi"),this.connection.on("matched",this.onMatched),this.pingClock=setInterval((()=>{this.matching&&this.connection.send("ping",{id:this.matching.id})}),3e3))},beforeDestroy(){this.connection&&(this.connection.dispose(),clearInterval(this.pingClock))},methods:{fetch(){null==this.gameId?this.game=null:(je.Z.start(),this.$root.api("games/reversi/games/show",{gameId:this.gameId}).then((e=>{this.game=e,je.Z.done()})))},async nav(e,t=!0){this.selfNav?(null==e||null!=e.settings&&null!=e.settings.map||(e=await this.$root.api("games/reversi/games/show",{gameId:e.id})),this.game=e):this.$emit("nav",e,t)},onMatching(e){this.matching=e},cancel(){this.matching=null,this.$root.api("games/reversi/match/cancel")},accept(e){this.$root.api("games/reversi/match",{userId:e.parent.id}).then((e=>{e&&(this.matching=null,this.nav(e))}))},onMatched(e){this.matching=null,this.game=e,this.nav(e,!1)},goIndex(){this.nav(null)}}});a(64220);const Ae=(0,v.Z)(Pe,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"vchtoekanapleubgzioubdtmlkribzfd"},[e.game?t("div",[t("x-gameroom",{attrs:{game:e.game,"self-nav":e.selfNav},on:{"go-index":e.goIndex}})],1):e.matching?t("div",{staticClass:"matching"},[t("h1",[e._v(e._s(this.$t("matching.waiting-for").split("{}")[0])),t("b",[t("mk-user-name",{attrs:{user:e.matching}})],1),e._v(e._s(this.$t("matching.waiting-for").split("{}")[1])),t("mk-ellipsis")],1),t("div",{staticClass:"cancel"},[t("form-button",{attrs:{round:""},on:{click:e.cancel}},[e._v(e._s(e.$t("matching.cancel")))])],1)]):e.gameId?t("div",[e._v("\n\t\t...\n\t")]):t("div",{staticClass:"index"},[t("x-index",{on:{go:e.nav,matching:e.onMatching}})],1)])}),[],!1,null,"db1a81b8",null).exports},55827:(e,t,a)=>{var s=a(83676);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);(0,a(80950).Z)("05d592b1",s,!0,{})},27138:(e,t,a)=>{var s=a(87247);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);(0,a(80950).Z)("4a6a334a",s,!0,{})},5081:(e,t,a)=>{var s=a(3358);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);(0,a(80950).Z)("1e87226c",s,!0,{})},64220:(e,t,a)=>{var s=a(68373);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);(0,a(80950).Z)("565d0c67",s,!0,{})}}]);