{"version":3,"sources":["index.js"],"names":["processLabel","getWorkerStrategies","Error","stackTraceLimit","Infinity","require","EventEmitter","defaultMaxListeners","process","env","UV_THREADPOOL_SIZE","uvThreadpoolSize","cpus","length","toString","on","console","log","JSON","stringify","memoryUsage","logger","Logger","bootLogger","createSubLogger","clusterLogger","ev","Xev","workerIndex","main","configLogger","config","loadConfig","exception","error","exit","code","succ","st","disableClustering","onlyServer","onlyQueue","cluster","isMaster","WORKER_TYPE","title","masterMain","then","mount","envOption","noDaemons","serverStats","queueStats","workerMain","socket","addr","port","undefined","send","spawnWorkers","greet","quiet","NODE_ENV","v","version","os","hostname","pid","info","init","e","workerType","default","isWorker","setInterval","restartMin","workerStrategies","serverWorkerRestartMin","queueWorkerRestartMin","workerWorkerRestartMin","uptimeMin","uptime","toFixed","runningNodejsVersion","slice","split","map","x","parseInt","showEnvironment","warn","nodejsLogger","join","showMachineInfo","checkMongoDB","workers","workerWorkers","Promise","all","Array","spawnWorker","worker","id","servers","serverWorkers","queues","queueWorkers","workerWorkerCount","serverWorkerCount","queueWorkerCount","type","res","rej","fork","message","debug","w","dir","err"],"mappings":"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","file":"index.js","sourceRoot":"../built"}