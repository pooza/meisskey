{"version":3,"sources":["index.js"],"names":["processLabel","getWorkerStrategies","Error","stackTraceLimit","Infinity","require","EventEmitter","defaultMaxListeners","process","env","UV_THREADPOOL_SIZE","uvThreadpoolSize","cpus","length","toString","logger","Logger","bootLogger","createSubLogger","clusterLogger","ev","Xev","workerIndex","main","configLogger","config","loadConfig","exception","error","exit","code","succ","st","disableClustering","onlyServer","onlyQueue","cluster","isMaster","WORKER_TYPE","title","masterMain","then","mount","envOption","noDaemons","serverStats","queueStats","workerMain","socket","addr","port","undefined","send","spawnWorkers","greet","quiet","NODE_ENV","v","version","console","log","os","hostname","pid","info","init","e","workerType","default","isWorker","setInterval","restartMin","workerStrategies","serverWorkerRestartMin","queueWorkerRestartMin","workerWorkerRestartMin","uptimeMin","uptime","toFixed","runningNodejsVersion","slice","split","map","x","parseInt","showEnvironment","warn","nodejsLogger","join","showMachineInfo","workers","workerWorkers","Promise","all","Array","spawnWorker","worker","id","servers","serverWorkers","queues","queueWorkers","workerWorkerCount","serverWorkerCount","queueWorkerCount","type","res","rej","fork","on","message","debug","w","dir","err"],"mappings":"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","file":"index.js","sourceRoot":"../built"}