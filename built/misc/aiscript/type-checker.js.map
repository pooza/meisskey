{"version":3,"sources":["misc/aiscript/type-checker.js"],"names":["ASTypeChecker","typeCheck","v","isLiteralBlock","def","funcDefs","type","Error","generic","i","in","length","arg","infer","args","undefined","expect","actual","getExpectedType","slot","variable","variables","find","va","name","value","pageVar","pageVars","envVar","envVarsDef","startsWith","out","getVarByName","x","getVarsByType","filter","getEnvVarsByType","Object","keys","entries","k","map","getPageVarsByType","isUsedName","some","constructor","autobind"],"mappings":";+BAYaA;;;eAAAA;;;mCAZQ;kBACgE;;;;;;;;;;;;;;;;;;;;;;;AAW9E,IAAA,AAAMA,gBAAN,MAAMA;IAULC,UAAUC,CAAQ,EAAoB;QAC5C,IAAIC,IAAAA,gBAAc,EAACD,IAAI,OAAO;QAE9B,MAAME,MAAMC,UAAQ,CAACH,EAAEI,IAAI,CAAC;QAC5B,IAAIF,OAAO,MAAM;YAChB,MAAM,IAAIG,MAAM,mBAAmBL,EAAEI,IAAI;QAC1C;QAEA,MAAME,UAAkB,EAAE;QAE1B,IAAK,IAAIC,IAAI,GAAGA,IAAIL,IAAIM,EAAE,CAACC,MAAM,EAAEF,IAAK;YACvC,MAAMG,MAAMR,IAAIM,EAAE,CAACD,EAAE;YACrB,MAAMH,OAAO,IAAI,CAACO,KAAK,CAACX,EAAEY,IAAI,CAACL,EAAE;YACjC,IAAIH,SAAS,MAAM;YAEnB,IAAI,OAAOM,QAAQ,UAAU;gBAC5B,IAAIJ,OAAO,CAACI,IAAI,KAAKG,WAAW;oBAC/BP,OAAO,CAACI,IAAI,GAAGN;gBAChB,OAAO,IAAIA,SAASE,OAAO,CAACI,IAAI,EAAE;oBACjC,OAAO;wBACNA,KAAKH;wBACLO,QAAQR,OAAO,CAACI,IAAI;wBACpBK,QAAQX;oBACT;gBACD;YACD,OAAO,IAAIA,SAASM,KAAK;gBACxB,OAAO;oBACNA,KAAKH;oBACLO,QAAQJ;oBACRK,QAAQX;gBACT;YACD;QACD;QAEA,OAAO;IACR;IAGOY,gBAAgBhB,CAAQ,EAAEiB,IAAY,EAAQ;QACpD,MAAMf,MAAMC,UAAQ,CAACH,EAAEI,IAAI,CAAC;QAC5B,IAAIF,OAAO,MAAM;YAChB,MAAM,IAAIG,MAAM,mBAAmBL,EAAEI,IAAI;QAC1C;QAEA,MAAME,UAAkB,EAAE;QAE1B,IAAK,IAAIC,IAAI,GAAGA,IAAIL,IAAIM,EAAE,CAACC,MAAM,EAAEF,IAAK;YACvC,MAAMG,MAAMR,IAAIM,EAAE,CAACD,EAAE;YACrB,MAAMH,OAAO,IAAI,CAACO,KAAK,CAACX,EAAEY,IAAI,CAACL,EAAE;YACjC,IAAIH,SAAS,MAAM;YAEnB,IAAI,OAAOM,QAAQ,UAAU;gBAC5B,IAAIJ,OAAO,CAACI,IAAI,KAAKG,WAAW;oBAC/BP,OAAO,CAACI,IAAI,GAAGN;gBAChB;YACD;QACD;QAEA,IAAI,OAAOF,IAAIM,EAAE,CAACS,KAAK,KAAK,UAAU;YACrC,OAAOX,OAAO,CAACJ,IAAIM,EAAE,CAACS,KAAK,CAAC,IAAI;QACjC,OAAO;YACN,OAAOf,IAAIM,EAAE,CAACS,KAAK;QACpB;IACD;IAGON,MAAMX,CAAQ,EAAQ;QAC5B,IAAIA,EAAEI,IAAI,KAAK,MAAM,OAAO;QAC5B,IAAIJ,EAAEI,IAAI,KAAK,QAAQ,OAAO;QAC9B,IAAIJ,EAAEI,IAAI,KAAK,iBAAiB,OAAO;QACvC,IAAIJ,EAAEI,IAAI,KAAK,YAAY,OAAO;QAClC,IAAIJ,EAAEI,IAAI,KAAK,UAAU,OAAO;QAChC,IAAIJ,EAAEI,IAAI,KAAK,OAAO;YACrB,MAAMc,WAAW,IAAI,CAACC,SAAS,CAACC,IAAI,CAACC,CAAAA,KAAMA,GAAGC,IAAI,KAAKtB,EAAEuB,KAAK;YAC9D,IAAIL,UAAU;gBACb,OAAO,IAAI,CAACP,KAAK,CAACO;YACnB;YAEA,MAAMM,UAAU,IAAI,CAACC,QAAQ,CAACL,IAAI,CAACC,CAAAA,KAAMA,GAAGC,IAAI,KAAKtB,EAAEuB,KAAK;YAC5D,IAAIC,SAAS;gBACZ,OAAOA,QAAQpB,IAAI;YACpB;YAEA,MAAMsB,SAASC,YAAU,CAAC3B,EAAEuB,KAAK,CAAC;YAClC,IAAIG,WAAWb,WAAW;gBACzB,OAAOa;YACR;YAEA,OAAO;QACR;QACA,IAAI1B,EAAEI,IAAI,KAAK,MAAM,OAAO,MAAM,OAAO;QACzC,IAAIJ,EAAEI,IAAI,CAACwB,UAAU,CAAC,QAAQ,OAAO,MAAM,OAAO;QAElD,MAAMtB,UAAkB,EAAE;QAE1B,MAAMJ,MAAMC,UAAQ,CAACH,EAAEI,IAAI,CAAC;QAE5B,IAAK,IAAIG,IAAI,GAAGA,IAAIL,IAAIM,EAAE,CAACC,MAAM,EAAEF,IAAK;YACvC,MAAMG,MAAMR,IAAIM,EAAE,CAACD,EAAE;YACrB,IAAI,OAAOG,QAAQ,UAAU;gBAC5B,MAAMN,OAAO,IAAI,CAACO,KAAK,CAACX,EAAEY,IAAI,CAACL,EAAE;gBAEjC,IAAID,OAAO,CAACI,IAAI,KAAKG,WAAW;oBAC/BP,OAAO,CAACI,IAAI,GAAGN;gBAChB,OAAO;oBACN,IAAIA,SAASE,OAAO,CAACI,IAAI,EAAE;wBAC1BJ,OAAO,CAACI,IAAI,GAAG;oBAChB;gBACD;YACD;QACD;QAEA,IAAI,OAAOR,IAAI2B,GAAG,KAAK,UAAU;YAChC,OAAOvB,OAAO,CAACJ,IAAI2B,GAAG,CAAC;QACxB,OAAO;YACN,OAAO3B,IAAI2B,GAAG;QACf;IACD;IAGOC,aAAaR,IAAY,EAAY;QAC3C,MAAMtB,IAAI,IAAI,CAACmB,SAAS,CAACC,IAAI,CAACW,CAAAA,IAAKA,EAAET,IAAI,KAAKA;QAC9C,IAAItB,MAAMa,WAAW;YACpB,OAAOb;QACR,OAAO;YACN,MAAM,IAAIK,MAAM,CAAC,kBAAkB,EAAEiB,KAAK,CAAC,CAAC;QAC7C;IACD;IAGOU,cAAc5B,IAAU,EAAc;QAC5C,IAAIA,QAAQ,MAAM,OAAO,IAAI,CAACe,SAAS;QACvC,OAAO,IAAI,CAACA,SAAS,CAACc,MAAM,CAACF,CAAAA,IAAK,AAAC,IAAI,CAACpB,KAAK,CAACoB,OAAO,QAAU,IAAI,CAACpB,KAAK,CAACoB,OAAO3B;IAClF;IAGO8B,iBAAiB9B,IAAU,EAAY;QAC7C,IAAIA,QAAQ,MAAM,OAAO+B,OAAOC,IAAI,CAACT,YAAU;QAC/C,OAAOQ,OAAOE,OAAO,CAACV,YAAU,EAAEM,MAAM,CAAC,CAAC,CAACK,GAAGtC,EAAE,GAAKA,MAAM,QAAQI,SAASJ,GAAGuC,GAAG,CAAC,CAAC,CAACD,GAAGtC,EAAE,GAAKsC;IAChG;IAGOE,kBAAkBpC,IAAU,EAAY;QAC9C,IAAIA,QAAQ,MAAM,OAAO,IAAI,CAACqB,QAAQ,CAACc,GAAG,CAACvC,CAAAA,IAAKA,EAAEsB,IAAI;QACtD,OAAO,IAAI,CAACG,QAAQ,CAACQ,MAAM,CAACjC,CAAAA,IAAKI,SAASJ,EAAEI,IAAI,EAAEmC,GAAG,CAACvC,CAAAA,IAAKA,EAAEsB,IAAI;IAClE;IAGOmB,WAAWnB,IAAY,EAAE;QAC/B,IAAI,IAAI,CAACH,SAAS,CAACuB,IAAI,CAAC1C,CAAAA,IAAKA,EAAEsB,IAAI,KAAKA,OAAO;YAC9C,OAAO;QACR;QAEA,IAAI,IAAI,CAACG,QAAQ,CAACiB,IAAI,CAAC1C,CAAAA,IAAKA,EAAEsB,IAAI,KAAKA,OAAO;YAC7C,OAAO;QACR;QAEA,IAAIK,YAAU,CAACL,KAAK,EAAE;YACrB,OAAO;QACR;QAEA,OAAO;IACR;IAxKAqB,YAAYxB,YAAwC,EAAE,EAAEM,WAAsC,EAAE,CAAE;QAHlG,uBAAON,aAAP,KAAA;QACA,uBAAOM,YAAP,KAAA;QAGC,IAAI,CAACN,SAAS,GAAGA;QACjB,IAAI,CAACM,QAAQ,GAAGA;IACjB;AAsKD;;IApKEmB,0BAAQ;;;eACW,OAAK,4BAAL,OAAK;;GAVb9C;;IA+CX8C,0BAAQ;;;eACiB,OAAK,4BAAL,OAAK;;;GAhDnB9C;;IA2EX8C,0BAAQ;;;eACO,OAAK,4BAAL,OAAK;;GA5ET9C;;IAiIX8C,0BAAQ;;;;;GAjIG9C;;IA2IX8C,0BAAQ;;;eACkB,MAAI,4BAAJ,MAAI;;GA5InB9C;;IAiJX8C,0BAAQ;;;eACqB,MAAI,4BAAJ,MAAI;;GAlJtB9C;;IAuJX8C,0BAAQ;;;eACsB,MAAI,4BAAJ,MAAI;;GAxJvB9C;;IA6JX8C,0BAAQ;;;;;GA7JG9C","file":"type-checker.js","sourceRoot":"../../../built"}