{"version":3,"sources":["misc/pack-emojis.js"],"names":["packEmojis","packAvatarEmoji","packAvatarEmojis","packCustomEmoji","packCustomEmojis","getEmojiUrl","SELF_HOST","emojis","ownerHost","custom","avatar","Promise","all","concat","str","match","queryHost","isSelfHost","usernameLower","toLowerCase","host","normalizeHost","resolvable","normalizeAsciiHost","user","User","findOne","name","url","sanitizeUrl","avatarId","getDriveFileUrl","DriveFile","_id","config","driveUrl","strs","map","filter","x","undefined","emoji","Emoji","fields","e","direction","names","toUnicode","toASCII","saved","query"],"mappings":"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","file":"pack-emojis.js","sourceRoot":"../../built"}