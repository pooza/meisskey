{"version":3,"sources":["models/notification.js"],"names":["packMany","pack","Notification","db","get","createIndex","sparse","notifications","Promise","all","map","n","notification","_notification","isObjectId","findOne","_id","mongo","ObjectID","deepcopy","id","userId","notifierId","me","notifieeId","user","packUser","type","note","packNote","noteId","dbLogger","warn","message","packMessagingMessage","messageId","error","reaction","decodeReaction"],"mappings":";;;;;;;;IAaA,OAA4B;eAA5B;;IAsDaA,QAAQ;eAARA;;IASAC,IAAI;eAAJA;;;yBA5EU;0BACG;0BACX;4BACQ;sBACiB;sBACP;kCACY;wBACpB;6BACM;AAE/B,MAAMC,eAAeC,iBAAE,CAACC,GAAG,CAAgB;AAC3CF,aAAaG,WAAW,CAAC;AACzBH,aAAaG,WAAW,CAAC,UAAU;IAAEC,QAAQ;AAAK;MAClD,WAAeJ;AAsDR,MAAMF,WAAW,CACvBO;IAEA,OAAOC,QAAQC,GAAG,CAACF,cAAcG,GAAG,CAACC,CAAAA,IAAKV,KAAKU;AAChD;AAKO,MAAMV,OAAO,OAAOW;IAC1B,IAAIC;IAEJ,oDAAoD;IACpD,IAAIC,IAAAA,mBAAU,EAACF,eAAe;QAC7BC,gBAAgB,MAAMX,aAAaa,OAAO,CAAC;YAC1CC,KAAKJ;QACN;IACD,OAAO,IAAI,OAAOA,iBAAiB,UAAU;QAC5CC,gBAAgB,MAAMX,aAAaa,OAAO,CAAC;YAC1CC,KAAK,IAAIC,SAAMC,QAAQ,CAACN;QACzB;IACD,OAAO;QACNC,gBAAgBM,UAASP;IAC1B;IAEA,mBAAmB;IACnBC,cAAcO,EAAE,GAAGP,cAAcG,GAAG;IACpC,OAAOH,cAAcG,GAAG;IAExB,8BAA8B;IAC9BH,cAAcQ,MAAM,GAAGR,cAAcS,UAAU;IAC/C,OAAOT,cAAcS,UAAU;IAE/B,MAAMC,KAAKV,cAAcW,UAAU;IACnC,OAAOX,cAAcW,UAAU;IAE/B,oBAAoB;IACpBX,cAAcY,IAAI,GAAG,MAAMC,IAAAA,UAAQ,EAACb,cAAcQ,MAAM,EAAEE;IAE1D,OAAQV,cAAcc,IAAI;QACzB,KAAK;QACL,KAAK;YAEJ;QACD,KAAK;QACL,KAAK;QACL,KAAK;QACL,KAAK;QACL,KAAK;QACL,KAAK;QACL,KAAK;QACL,KAAK;YACJ,gBAAgB;YAChBd,cAAce,IAAI,GAAG,MAAMC,IAAAA,UAAQ,EAAChB,cAAciB,MAAM,EAAEP;YAE1D,8BAA8B;YAC9B,IAAIV,cAAce,IAAI,IAAI,MAAM;gBAC/BG,gBAAQ,CAACC,IAAI,CAAC,CAAC,oDAAoD,EAAEnB,cAAcO,EAAE,CAAC,OAAO,EAAEP,cAAciB,MAAM,CAAC,CAAC,CAAC;gBACtHjB,cAAcc,IAAI,GAAG;gBACrB,OAAOd,cAAciB,MAAM;gBAC3B,OAAOjB,cAAce,IAAI;YAC1B;YACA;QACD,KAAK;YACJf,cAAcoB,OAAO,GAAG,MAAMC,IAAAA,sBAAoB,EAACrB,cAAcsB,SAAS,EAAEZ;YAE5E,8BAA8B;YAC9B,IAAIV,cAAcoB,OAAO,IAAI,MAAM;gBAClCF,gBAAQ,CAACC,IAAI,CAAC,CAAC,uDAAuD,EAAEnB,cAAcO,EAAE,CAAC,OAAO,EAAEP,cAAcsB,SAAS,CAAC,CAAC,CAAC;gBAC5HtB,cAAcc,IAAI,GAAG;gBACrB,OAAOd,cAAcsB,SAAS;gBAC9B,OAAOtB,cAAcoB,OAAO;YAC7B;YAEA;QACD;YACCF,gBAAQ,CAACK,KAAK,CAAC,CAAC,cAAc,EAAEvB,cAAcc,IAAI,CAAC,CAAC;YACpD;IACF;IAEA,IAAId,cAAcwB,QAAQ,EAAExB,cAAcwB,QAAQ,GAAGC,IAAAA,2BAAc,EAACzB,cAAcwB,QAAQ;IAE1F,OAAOxB;AACR","file":"notification.js","sourceRoot":"../../built"}