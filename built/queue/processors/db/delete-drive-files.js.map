{"version":3,"sources":["queue/processors/db/delete-drive-files.js"],"names":["deleteDriveFiles","logger","queueLogger","createSubLogger","job","info","data","user","_id","User","findOne","mongo","ObjectID","toString","deletedCount","cursor","total","DriveFile","count","files","find","$gt","limit","sort","length","progress","file","deleteFile","catch","e","warn","then"],"mappings":";+BAWsBA;;;eAAAA;;;yBAVC;wBAEK;sBACX;2BACK;4BACC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGvB,MAAMC,SAASC,mBAAW,CAACC,eAAe,CAAC;AAEpC,eAAeH,iBAAiBI,GAA4B;IAClEH,OAAOI,IAAI,CAAC,CAAC,wBAAwB,EAAED,IAAIE,IAAI,CAACC,IAAI,CAACC,GAAG,CAAC,IAAI,CAAC;IAE9D,MAAMD,OAAO,MAAME,aAAI,CAACC,OAAO,CAAC;QAC/BF,KAAK,IAAIG,SAAMC,QAAQ,CAACR,IAAIE,IAAI,CAACC,IAAI,CAACC,GAAG,CAACK,QAAQ;IACnD;IAEA,IAAIN,QAAQ,MAAM;QACjB,OAAO,CAAC,oBAAoB,CAAC;IAC9B;IAEA,IAAIO,eAAe;IACnB,IAAIC,SAAc;IAElB,MAAMC,QAAQ,MAAMC,kBAAS,CAACC,KAAK,CAAC;QACnC,mBAAmBX,KAAKC,GAAG;IAC5B;IAEA,MAAO,KAAM;QACZ,MAAMW,QAAQ,MAAMF,kBAAS,CAACG,IAAI,CAAC;YAClC,mBAAmBb,KAAKC,GAAG;WACvBO,SAAS;YAAEP,KAAK;gBAAEa,KAAKN;YAAO;QAAE,IAAI,CAAC,IACvC;YACFO,OAAO;YACPC,MAAM;gBACLf,KAAK;YACN;QACD;QAEA,IAAIW,MAAMK,MAAM,KAAK,GAAG;YACvBpB,IAAIqB,QAAQ,CAAC;YACb;QACD;QAEAV,SAASI,KAAK,CAACA,MAAMK,MAAM,GAAG,EAAE,CAAChB,GAAG;QAEpC,KAAK,MAAMkB,QAAQP,MAAO;YACzB,MAAMQ,IAAAA,mBAAU,EAACD,MAAME,KAAK,CAACC,CAAAA;gBAC5B5B,OAAO6B,IAAI,CAAC,CAAC,eAAe,EAAEvB,KAAKC,GAAG,CAAC,EAAE,EAAEkB,KAAKlB,GAAG,CAAC,CAAC,EAAEqB,EAAE,CAAC;YAC3D,GAAGE,IAAI,CAAC;gBACP9B,OAAOI,IAAI,CAAC,CAAC,SAAS,EAAEE,KAAKC,GAAG,CAAC,EAAE,EAAEkB,KAAKlB,GAAG,CAAC,CAAC;YAChD;YACAM;QACD;QAEAV,IAAIqB,QAAQ,CAACX,eAAeE;IAC7B;IAEA,OAAO,CAAC,qBAAqB,EAAEF,aAAa,KAAK,EAAEP,KAAKC,GAAG,CAAC,kBAAkB,CAAC;AAChF","file":"delete-drive-files.js","sourceRoot":"../../../../built"}