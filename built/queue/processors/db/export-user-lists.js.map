{"version":3,"sources":["queue/processors/db/export-user-lists.js"],"names":["exportUserLists","logger","queueLogger","createSubLogger","job","info","data","user","_id","User","findOne","mongo","ObjectID","toString","lists","UserList","find","userId","path","cleanup","Promise","res","rej","tmp","file","e","fd","stream","fs","createWriteStream","flags","list","users","$in","userIds","fields","username","host","u","acct","getFullApAccount","content","title","write","err","error","end","succ","fileName","format","Date","driveFile","addFile","name","force"],"mappings":";+BAesBA;;;eAAAA;;;qBAdD;oBACD;yBACG;wBAEK;yBACJ;sBACP;yBACM;0BACF;6BACY;AAGjC,MAAMC,SAASC,mBAAW,CAACC,eAAe,CAAC;AAEpC,eAAeH,gBAAgBI,GAA4B;IACjEH,OAAOI,IAAI,CAAC,CAAC,wBAAwB,EAAED,IAAIE,IAAI,CAACC,IAAI,CAACC,GAAG,CAAC,IAAI,CAAC;IAE9D,MAAMD,OAAO,MAAME,aAAI,CAACC,OAAO,CAAC;QAC/BF,KAAK,IAAIG,SAAMC,QAAQ,CAACR,IAAIE,IAAI,CAACC,IAAI,CAACC,GAAG,CAACK,QAAQ;IACnD;IAEA,IAAIN,QAAQ,MAAM;QACjB,OAAO,CAAC,oBAAoB,CAAC;IAC9B;IAEA,MAAMO,QAAQ,MAAMC,iBAAQ,CAACC,IAAI,CAAC;QACjCC,QAAQV,KAAKC,GAAG;IACjB;IAEA,mBAAmB;IACnB,MAAM,CAACU,MAAMC,QAAQ,GAAG,MAAM,IAAIC,QAAuB,CAACC,KAAKC;QAC9DC,KAAIC,IAAI,CAAC,CAACC,GAAGP,MAAMQ,IAAIP;YACtB,IAAIM,GAAG,OAAOH,IAAIG;YAClBJ,IAAI;gBAACH;gBAAMC;aAAQ;QACpB;IACD;IAEAlB,OAAOI,IAAI,CAAC,CAAC,aAAa,EAAEa,KAAK,CAAC;IAElC,MAAMS,SAASC,IAAGC,iBAAiB,CAACX,MAAM;QAAEY,OAAO;IAAI;IAEvD,KAAK,MAAMC,QAAQjB,MAAO;QACzB,MAAMkB,QAAQ,MAAMvB,aAAI,CAACO,IAAI,CAAC;YAC7BR,KAAK;gBAAEyB,KAAKF,KAAKG,OAAO;YAAC;QAC1B,GAAG;YACFC,QAAQ;gBACPC,UAAU;gBACVC,MAAM;YACP;QACD;QAEA,KAAK,MAAMC,KAAKN,MAAO;YACtB,MAAMO,OAAOC,IAAAA,6BAAgB,EAACF,EAAEF,QAAQ,EAAEE,EAAED,IAAI;YAChD,MAAMI,UAAU,CAAC,EAAEV,KAAKW,KAAK,CAAC,CAAC,EAAEH,KAAK,CAAC;YACvC,MAAM,IAAInB,QAAQ,CAACC,KAAKC;gBACvBK,OAAOgB,KAAK,CAACF,UAAU,MAAMG,CAAAA;oBAC5B,IAAIA,KAAK;wBACR3C,OAAO4C,KAAK,CAACD;wBACbtB,IAAIsB;oBACL,OAAO;wBACNvB;oBACD;gBACD;YACD;QACD;IACD;IAEAM,OAAOmB,GAAG;IACV7C,OAAO8C,IAAI,CAAC,CAAC,aAAa,EAAE7B,KAAK,CAAC;IAElC,MAAM8B,WAAW,gBAAgBC,IAAAA,eAAM,EAAC,IAAIC,QAAQ,yBAAyB;IAC7E,MAAMC,YAAY,MAAMC,IAAAA,gBAAO,EAAC;QAAE7C;QAAMW;QAAMmC,MAAML;QAAUM,OAAO;IAAK;IAE1EnC;IACA,OAAO,CAAC,aAAa,EAAEgC,UAAU3C,GAAG,CAAC,CAAC;AACvC","file":"export-user-lists.js","sourceRoot":"../../../../built"}