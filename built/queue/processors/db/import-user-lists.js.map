{"version":3,"sources":["queue/processors/db/import-user-lists.js"],"names":["importUserLists","logger","queueLogger","createSubLogger","job","info","data","user","_id","User","findOne","mongo","ObjectID","toString","file","DriveFile","fileId","url","getOriginalUrl","csv","downloadTextFile","linenum","line","trim","split","listName","username","host","parseAcct","list","UserList","userId","title","insert","createdAt","Date","userIds","target","isSelfHost","usernameLower","toLowerCase","toDbHost","resolveUser","some","id","equals","pushUserToUserList","e","warn"],"mappings":";+BAiBsBA;;;eAAAA;;;yBAhBC;wBAEK;sBACX;0BACI;2BACC;iCACS;uBACT;6BACE;sBACW;kCACF;6BACI;AAGrC,MAAMC,SAASC,mBAAW,CAACC,eAAe,CAAC;AAEpC,eAAeH,gBAAgBI,GAAkC;IACvEH,OAAOI,IAAI,CAAC,CAAC,wBAAwB,EAAED,IAAIE,IAAI,CAACC,IAAI,CAACC,GAAG,CAAC,IAAI,CAAC;IAE9D,MAAMD,OAAO,MAAME,aAAI,CAACC,OAAO,CAAC;QAC/BF,KAAK,IAAIG,SAAMC,QAAQ,CAACR,IAAIE,IAAI,CAACC,IAAI,CAACC,GAAG,CAACK,QAAQ;IACnD;IAEA,IAAIN,QAAQ,MAAM;QACjB,OAAO,CAAC,oBAAoB,CAAC;IAC9B;IAEA,MAAMO,OAAO,MAAMC,kBAAS,CAACL,OAAO,CAAC;QACpCF,KAAK,IAAIG,SAAMC,QAAQ,CAACR,IAAIE,IAAI,CAACU,MAAM,CAACH,QAAQ;IACjD;IAEA,IAAIC,QAAQ,MAAM;QACjB,OAAO,CAAC,oBAAoB,CAAC;IAC9B;IAEA,MAAMG,MAAMC,IAAAA,+BAAc,EAACJ;IAE3B,MAAMK,MAAM,MAAMC,IAAAA,kCAAgB,EAACH;IAEnC,IAAII,UAAU;IAEd,KAAK,MAAMC,QAAQH,IAAII,IAAI,GAAGC,KAAK,CAAC,MAAO;QAC1CH;QAEA,IAAI;YACH,MAAMI,WAAWH,KAAKE,KAAK,CAAC,IAAI,CAAC,EAAE,CAACD,IAAI;YACxC,MAAM,EAAEG,QAAQ,EAAEC,IAAI,EAAE,GAAGC,IAAAA,cAAS,EAACN,KAAKE,KAAK,CAAC,IAAI,CAAC,EAAE,CAACD,IAAI;YAE5D,IAAIM,OAAO,MAAMC,iBAAQ,CAACpB,OAAO,CAAC;gBACjCqB,QAAQxB,KAAKC,GAAG;gBAChBwB,OAAOP;YACR;YAEA,IAAII,QAAQ,MAAM;gBACjBA,OAAO,MAAMC,iBAAQ,CAACG,MAAM,CAAC;oBAC5BC,WAAW,IAAIC;oBACfJ,QAAQxB,KAAKC,GAAG;oBAChBwB,OAAOP;oBACPW,SAAS,EAAE;gBACZ;YACD;YAEA,IAAIC,SAASC,IAAAA,uBAAU,EAACX,QAAQ,MAAMlB,aAAI,CAACC,OAAO,CAAC;gBAClDiB,MAAM;gBACNY,eAAeb,SAASc,WAAW;YACpC,KAAK,MAAM/B,aAAI,CAACC,OAAO,CAAC;gBACvBiB,MAAMc,IAAAA,qBAAQ,EAACd;gBACfY,eAAeb,SAASc,WAAW;YACpC;YAEA,IAAIb,QAAQ,QAAQU,UAAU,MAAM;YAEpC,IAAIA,UAAU,MAAM;gBACnBA,SAAS,MAAMK,IAAAA,oBAAW,EAAChB,UAAUC;YACtC;YAEA,IAAIE,KAAKO,OAAO,CAACO,IAAI,CAACC,CAAAA,KAAMA,GAAGC,MAAM,CAACR,OAAO7B,GAAG,IAAI;YAEpDsC,IAAAA,wBAAkB,EAACT,QAAQR;QAC5B,EAAE,OAAOkB,GAAG;YACX9C,OAAO+C,IAAI,CAAC,CAAC,cAAc,EAAE3B,QAAQ,CAAC,EAAE0B,EAAE,CAAC;QAC5C;IACD;IAEA,OAAO,CAAC,YAAY,CAAC;AACtB","file":"import-user-lists.js","sourceRoot":"../../../../built"}