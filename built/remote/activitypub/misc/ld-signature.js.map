{"version":3,"sources":["remote/activitypub/misc/ld-signature.js"],"names":["randomBytesAsync","LdSignature","util","promisify","crypto","randomBytes","isRsaSignature2017","signature","type","signRsaSignature2017","data","privateKeyPem","creator","domain","created","options","nonce","toString","Date","toISOString","privateKey","createPrivateKey","asymmetricKeyType","Error","toBeSigned","createVerifyData","sign","Buffer","from","signatureValue","verifyRsaSignature2017","publicKeyPem","publicKey","createPublicKey","verify","transformedOptions","canonizedOptions","normalize","optionsHash","sha256","transformedData","cannonidedData","documentHash","verifyData","customLoader","getLoader","jsonld","algorithm","documentLoader","url","match","preLoad","CONTEXTS","debug","console","contextUrl","document","documentUrl","fetchFunc","hash","createHash","update","digest","toLowerCase","constructor"],"mappings":"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","file":"ld-signature.js","sourceRoot":"../../../../built"}