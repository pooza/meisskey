{"version":3,"sources":["remote/activitypub/models/image.js"],"names":["createImage","resolveImage","logger","apLogger","actor","value","file","isSuspended","isDeleted","image","Resolver","resolve","isDocument","url","Error","info","instance","fetchMeta","cache","cacheRemoteFiles","uploadFromUrl","user","uri","sensitive","isLink","e","StatusError","isClientError","warn","statusCode","metadata","isRemote","DriveFile","findOneAndUpdate","_id","$set","returnNewDocument"],"mappings":";;;;;;;;IAcsBA,WAAW;eAAXA;;IAwDAC,YAAY;eAAZA;;;+BAtEQ;2BAEQ;0BACjB;2BACC;wBACG;sBACW;uBACR;AAE5B,MAAMC,SAASC,gBAAQ;AAKhB,eAAeH,YAAYI,KAAkB,EAAEC,KAAc;QAgC/DC;IA/BJ,sBAAsB;IACtB,IAAIF,MAAMG,WAAW,IAAIH,MAAMI,SAAS,EAAE;QACzC,OAAO;IACR;IAEA,MAAMC,QAAQ,MAAM,IAAIC,iBAAQ,GAAGC,OAAO,CAACN;IAE3C,IAAI,CAACO,IAAAA,gBAAU,EAACH,QAAQ,OAAO;IAE/B,IAAI,OAAOA,MAAMI,GAAG,KAAK,UAAU;QAClC,MAAM,IAAIC,MAAM;IACjB;IAEAZ,OAAOa,IAAI,CAAC,CAAC,oBAAoB,EAAEN,MAAMI,GAAG,CAAC,CAAC;IAE9C,MAAMG,WAAW,MAAMC,IAAAA,kBAAS;IAChC,MAAMC,QAAQF,SAASG,gBAAgB;IAEvC,IAAIb;IACJ,IAAI;QACHA,OAAO,MAAMc,IAAAA,4BAAa,EAAC;YAAEP,KAAKJ,MAAMI,GAAG;YAAEQ,MAAMjB;YAAOkB,KAAKb,MAAMI,GAAG;YAAEU,WAAW,CAAC,CAACd,MAAMc,SAAS;YAAEC,QAAQ,CAACN;QAAM;IACxH,EAAE,OAAOO,GAAG;QACX,wBAAwB;QACxB,IAAIA,aAAaC,kBAAW,IAAID,EAAEE,aAAa,EAAE;YAChDzB,OAAO0B,IAAI,CAAC,CAAC,eAAe,EAAEnB,MAAMI,GAAG,CAAC,GAAG,EAAEY,EAAEI,UAAU,CAAC,CAAC;YAC3D,OAAO;QACR;QAEA,MAAMJ;IACP;IAEA,KAAInB,iBAAAA,KAAKwB,QAAQ,cAAbxB,qCAAAA,eAAeyB,QAAQ,EAAE;QAC5B,+CAA+C;QAC/C,WAAW;QACX,IAAIzB,KAAKwB,QAAQ,CAACjB,GAAG,KAAKJ,MAAMI,GAAG,EAAE;YACpCP,OAAO,MAAM0B,kBAAS,CAACC,gBAAgB,CAAC;gBAAEC,KAAK5B,KAAK4B,GAAG;YAAC,GAAG;gBAC1DC,MAAM;oBACL,gBAAgB1B,MAAMI,GAAG;oBACzB,gBAAgBJ,MAAMI,GAAG;gBAC1B;YACD,GAAG;gBACFuB,mBAAmB;YACpB;QACD;IACD;IAEA,OAAO9B;AACR;AAQO,eAAeL,aAAaG,KAAkB,EAAEC,KAAc;IACpE,OAAO;IAEP,uBAAuB;IACvB,OAAO,MAAML,YAAYI,OAAOC;AACjC","file":"image.js","sourceRoot":"../../../../built"}