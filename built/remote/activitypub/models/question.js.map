{"version":3,"sources":["remote/activitypub/models/question.js"],"names":["extractPollFromQuestion","updateQuestion","source","resolver","Resolver","question","resolve","isQuestion","Error","multiple","oneOf","expiresAt","endTime","Date","closed","anyOf","choices","map","x","i","id","text","name","votes","replies","totalItems","_misskey_votes","length","value","uri","startsWith","config","url","note","Note","findOne","apLogger","debug","JSON","stringify","type","apChoices","dbChoices","poll","changed","db","oldCount","newCount","filter","ap","update","_id","$set","updatedAt"],"mappings":";;;;;;;;IAMsBA,uBAAuB;eAAvBA;;IAqCAC,cAAc;eAAdA;;;wBA3CH;sBACkB;0BAChB;sBAC4B;wBACxB;AAElB,eAAeD,wBAAwBE,MAAwB,EAAEC,QAAmB;IAC1F,IAAIA,YAAY,MAAMA,WAAW,IAAIC,iBAAQ;IAE7C,MAAMC,WAAW,MAAMF,SAASG,OAAO,CAACJ;IAExC,IAAI,CAACK,IAAAA,gBAAU,EAACF,WAAW;QAC1B,MAAM,IAAIG,MAAM;IACjB;IAEA,MAAMC,WAAW,CAACJ,SAASK,KAAK;IAChC,MAAMC,YAAYN,SAASO,OAAO,GAAG,IAAIC,KAAKR,SAASO,OAAO,IAAIP,SAASS,MAAM,GAAG,IAAID,KAAKR,SAASS,MAAM,IAAI;IAEhH,IAAIL,YAAY,CAACJ,SAASU,KAAK,EAAE;QAChC,MAAM;IACP;IAEA,MAAMC,UAAU,AAACX,CAAAA,QAAQ,CAACI,WAAW,UAAU,QAAQ,IAAI,EAAE,AAAD,EAC1DQ,GAAG,CAAC,CAACC,GAAGC,IAAO,CAAA;YACfC,IAAID;YACJE,MAAMH,EAAEI,IAAI;YACZC,OAAOL,EAAEM,OAAO,IAAIN,EAAEM,OAAO,CAACC,UAAU,IAAIP,EAAEQ,cAAc,IAAI;QACjE,CAAA;IAED,IAAIV,QAAQW,MAAM,GAAG,KAAK,MAAM;IAEhC,OAAO;QACNX;QACAP;QACAE;IACD;AACD;AAOO,eAAeV,eAAe2B,KAAU,EAAEzB,QAAmB;IACnE,MAAM0B,MAAM,OAAOD,SAAS,WAAWA,QAAQA,MAAMR,EAAE;IAEvD,yBAAyB;IACzB,IAAIS,IAAIC,UAAU,CAACC,eAAM,CAACC,GAAG,GAAG,MAAM,MAAM;IAE5C,2BAA2B;IAC3B,MAAMC,OAAO,MAAMC,aAAI,CAACC,OAAO,CAAC;QAAEN;IAAI;IAEtC,IAAII,QAAQ,MAAM,MAAM;IACxB,YAAY;IAEZ,8BAA8B;IAC9B,IAAI9B,YAAY,MAAMA,WAAW,IAAIC,iBAAQ;IAC7C,MAAMC,WAAW,MAAMF,SAASG,OAAO,CAACsB;IACxCQ,gBAAQ,CAACC,KAAK,CAAC,CAAC,kBAAkB,EAAEC,KAAKC,SAAS,CAAClC,UAAU,MAAM,GAAG,CAAC;IAEvE,IAAIA,SAASmC,IAAI,KAAK,YAAY,MAAM;IAExC,MAAMC,YAAYpC,SAASK,KAAK,IAAIL,SAASU,KAAK;IAClD,MAAM2B,YAAYT,KAAKU,IAAI,CAAC3B,OAAO;IAEnC,IAAI4B,UAAU;IAEd,KAAK,MAAMC,MAAMH,UAAW;QAC3B,MAAMI,WAAWD,GAAGtB,KAAK;QACzB,MAAMwB,WAAWN,UAAUO,MAAM,CAACC,CAAAA,KAAMA,GAAG3B,IAAI,KAAKuB,GAAGxB,IAAI,CAAC,CAAC,EAAE,CAACG,OAAO,CAACC,UAAU;QAElF,IAAIqB,YAAYC,UAAU;YACzBH,UAAU;YACVC,GAAGtB,KAAK,GAAGwB;QACZ;IACD;IAEA,MAAMb,aAAI,CAACgB,MAAM,CAAC;QACjBC,KAAKlB,KAAKkB,GAAG;IACd,GAAG;QACFC,MAAM;YACL,gBAAgBV;YAChBW,WAAW,IAAIxC;QAChB;IACD;IAEA,OAAO+B;AACR","file":"question.js","sourceRoot":"../../../../built"}