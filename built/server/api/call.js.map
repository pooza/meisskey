{"version":3,"sources":["server/api/call.js"],"names":["accessDenied","message","code","id","endpoint","user","app","data","ctx","isSecure","ep","endpoints","find","e","name","ApiError","httpStatusCode","meta","secure","requireCredential","isDeleted","reason","isSuspended","requireAdmin","isAdmin","requireModerator","isModerator","kind","permission","some","p","toArray","includes","limit","limiter","ip","catch","canDenyPost","config","denyStatsPost","method","requireFile","params","k","Object","keys","param","validator","JSON","parse","split","before","performance","now","exec","file","console","error","apiLogger","ps","stack","finally","after","time","warn","username","activeUsersChart","update"],"mappings":"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","file":"call.js","sourceRoot":"../../../built"}