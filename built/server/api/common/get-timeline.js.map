{"version":3,"sources":["server/api/common/get-timeline.js"],"names":["getPackedTimeline","explainTimeline","getStages","query","sort","limit","$match","$and","$exists","$sort","$limit","$lookup","from","let","userId","pipeline","$expr","$eq","$project","name","username","host","avatarId","emojis","isCat","isBot","isAdmin","isVerified","borderColor","tags","as","$unwind","path","me","hint","undefined","createdAt","$gt","id","mongo","ObjectID","genMeid7","_id","$lt","begin","performance","now","timeline","Note","aggregate","maxTimeMS","queryEnd","packed","packMany","packEnd","apiLogger","warn","toFixed","explain"],"mappings":";;;;;;;;IAuDsBA,iBAAiB;eAAjBA;;IAsCAC,eAAe;eAAfA;;;yBA7FC;sBACe;wBAEZ;4BACE;uBACH;AAEzB,SAASC,UAAUC,KAAU,EAAEC,IAA4B,EAAEC,KAAa;IACzE,OAAO;QACN;YACCC,QAAQ;gBAAEC,MAAM;oBACfJ;oBACA;wBAAC,eAAe;4BAAEK,SAAS;wBAAM;oBAAC;iBAClC;YAAA;QACF;QAAG;YACFC,OAAOL;QACR;QAAG;YACFM,QAAQL;QACT;QAAG;YACFM,SAAS;gBACRC,MAAM;gBACNC,KAAK;oBAAEC,QAAQ;gBAAU;gBACzBC,UAAU;oBACT;wBACCT,QAAQ;4BACPU,OAAO;gCACNC,KAAK;oCAAE;oCAAQ;iCAAY;4BAC5B;wBACD;oBACD;oBAAG;wBACFC,UAAU;4BACTC,MAAM;4BACNC,UAAU;4BACVC,MAAM;4BACNC,UAAU;4BACVC,QAAQ;4BACRC,OAAO;4BACPC,OAAO;4BACPC,SAAS;4BACTC,YAAY;4BACZC,aAAa;4BACbC,MAAM;wBACP,EAAE,uBAAuB;oBAC1B;iBACA;gBACDC,IAAI;YACL,EAAE,UAAU;QACb;QAAG;YACFC,SAAS;gBACRC,MAAM;YACP;QACD;KACA;AACF;AAEO,eAAehC,kBAAkBiC,EAAqB,EAAE9B,KAAU,EAAEC,IAA4B,EAAEC,KAAa,EAAE6B,OAA2BC,SAAS;QACvJhC,kBAOAA;IAPJ,KAAIA,mBAAAA,MAAMiC,SAAS,cAAfjC,uCAAAA,iBAAiBkC,GAAG,EAAE;QACzB,MAAMC,KAAK,IAAIC,SAAMC,QAAQ,CAACC,IAAAA,eAAQ,EAACtC,MAAMiC,SAAS,CAACC,GAAG;QAC1D,OAAOlC,MAAMiC,SAAS,CAACC,GAAG;QAC1B,OAAOlC,MAAMiC,SAAS;QACtBjC,MAAMuC,GAAG,GAAG;YAAEL,KAAKC;QAAG;IACvB;IAEA,KAAInC,oBAAAA,MAAMiC,SAAS,cAAfjC,wCAAAA,kBAAiBwC,GAAG,EAAE;QACzB,MAAML,KAAK,IAAIC,SAAMC,QAAQ,CAACC,IAAAA,eAAQ,EAACtC,MAAMiC,SAAS,CAACO,GAAG;QAC1D,OAAOxC,MAAMiC,SAAS,CAACO,GAAG;QAC1B,OAAOxC,MAAMiC,SAAS;QACtBjC,MAAMuC,GAAG,GAAG;YAAEC,KAAKL;QAAG;IACvB;IAEA,MAAMM,QAAQC,uBAAW,CAACC,GAAG;IAE7B,QAAQ;IACR,MAAMC,WAAW,MAAMC,aAAI,CAACC,SAAS,CAAU/C,UAAUC,OAAOC,MAAMC,QACtE;QACC6C,WAAW;QACXhB;IACD;IAEA,MAAMiB,WAAWN,uBAAW,CAACC,GAAG;IAEhC,OAAO;IACP,MAAMM,SAAS,MAAMC,IAAAA,cAAQ,EAACN,UAAUd;IAExC,MAAMqB,UAAUT,uBAAW,CAACC,GAAG;IAE/B,IAAIK,WAAWP,QAAQ,MAAM;QAC5BW,iBAAS,CAACC,IAAI,CAAC,CAAC,cAAc,EAAE,AAACL,CAAAA,WAAWP,KAAI,EAAGa,OAAO,GAAG,OAAO,EAAE,AAACH,CAAAA,UAAUH,QAAO,EAAGM,OAAO,GAAG,CAAC;IACvG;IAEA,OAAOL;AACR;AAEO,eAAenD,gBAAgBgC,EAAqB,EAAE9B,KAAU,EAAEC,IAA4B,EAAEC,KAAa,EAAE6B,OAA2BC,SAAS;IACzJ,OAAO,MAAMa,aAAI,CAACC,SAAS,CAAU/C,UAAUC,OAAOC,MAAMC,QAC5D;QACCqD,SAAS;QACTxB;IACD;AACD","file":"get-timeline.js","sourceRoot":"../../../../built"}