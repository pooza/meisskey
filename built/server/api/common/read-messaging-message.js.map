{"version":3,"sources":["server/api/common/read-messaging-message.js"],"names":["user","otherparty","message","userId","isObjectId","mongo","ObjectID","otherpartyId","ids","Array","isArray","map","m","_id","toRead","Message","find","$in","recipientId","isRead","length","update","x","$set","multi","publishMessagingStream","toString","publishMessagingIndexStream","count","limit","User","hasUnreadMessagingMessage","publishMainStream"],"mappings":";+BASA;;CAEC,GACD;;;eAAA;;;yBAZuB;4BACA;kCACH;wBAEc;sBAGjB;MAKjB,WAAe,OACdA,MACAC,YACAC;IAEA,sCAAsC;IACtC,MAAMC,SAASC,IAAAA,mBAAU,EAACJ,QACvBA,OACA,IAAIK,SAAMC,QAAQ,CAACN;IAEtB,sDAAsD;IACtD,MAAMO,eAAeH,IAAAA,mBAAU,EAACH,cAC7BA,aACA,IAAII,SAAMC,QAAQ,CAACL;IAEtB,8BAA8B;IAC9B,MAAMO,MAAwBC,MAAMC,OAAO,CAACR,WACzCE,IAAAA,mBAAU,EAACF,OAAO,CAAC,EAAE,IACnBA,UACD,OAAOA,OAAO,CAAC,EAAE,KAAK,WACrB,AAACA,QAAqBS,GAAG,CAACC,CAAAA,IAAK,IAAIP,SAAMC,QAAQ,CAACM,MAClD,AAACV,QAAuBS,GAAG,CAACC,CAAAA,IAAKA,EAAEC,GAAG,IACxCT,IAAAA,mBAAU,EAACF,WACV;QAAEA;KAA2B,GAC7B,OAAOA,YAAY,WAClB;QAAC,IAAIG,SAAMC,QAAQ,CAACJ;KAAS,GAC7B;QAAEA,QAAqBW,GAAG;KAAC;IAEhC,0BAA0B;IAC1B,MAAMC,SAAS,MAAMC,yBAAO,CAACC,IAAI,CAAC;QACjCH,KAAK;YAAEI,KAAKT;QAAI;QAChBL,QAAQI;QACRW,aAAaf;QACbgB,QAAQ;IACT;IAEA,IAAIL,OAAOM,MAAM,KAAK,GAAG,OAAO,EAAE;IAElC,aAAa;IACb,MAAML,yBAAO,CAACM,MAAM,CAAC;QACpBR,KAAK;YAAEI,KAAKH,OAAOH,GAAG,CAACW,CAAAA,IAAKA,EAAET,GAAG;QAAE;IACpC,GAAG;QACDU,MAAM;YACLJ,QAAQ;QACT;IACD,GAAG;QACFK,OAAO;IACR;IAED,gBAAgB;IAChBC,IAAAA,8BAAsB,EAAClB,cAAcJ,QAAQ,QAAQW,OAAOH,GAAG,CAACW,CAAAA,IAAKA,EAAET,GAAG,CAACa,QAAQ;IACnFC,IAAAA,mCAA2B,EAACxB,QAAQ,QAAQW,OAAOH,GAAG,CAACW,CAAAA,IAAKA,EAAET,GAAG,CAACa,QAAQ;IAE1E,mCAAmC;IACnC,MAAME,QAAQ,MAAMb,yBAAO,CACzBa,KAAK,CAAC;QACNV,aAAaf;QACbgB,QAAQ;IACT,GAAG;QACDU,OAAO;IACR;IAEF,IAAID,SAAS,GAAG;QACf,cAAc;QACdE,aAAI,CAACT,MAAM,CAAC;YAAER,KAAKV;QAAO,GAAG;YAC5BoB,MAAM;gBACLQ,2BAA2B;YAC5B;QACD;QAEA,iDAAiD;QACjDC,IAAAA,yBAAiB,EAAC7B,QAAQ;IAC3B;IAEA,OAAOW;AACR","file":"read-messaging-message.js","sourceRoot":"../../../../built"}