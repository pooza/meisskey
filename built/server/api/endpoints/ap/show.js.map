{"version":3,"sources":["server/api/endpoints/ap/show.js"],"names":["meta","tags","desc","requireCredential","limit","duration","ms","max","params","uri","validator","$","str","errors","noSuchObject","message","code","id","define","ps","object","fetchAny","ApiError","e","RejectedError","StatusError","startsWith","config","url","result","processLocal","packed","processRemote","disableFederation","isBlockedHost","extractApHost","resolver","Resolver","resolve","isActor","user","createPerson","getApId","mergePack","isPost","note","createNote","isEmoji","emojis","extractEmojis","emoji","localIdRegex","RegExp","escapeRegexp","matchLocalId","match","type","User","findOne","_id","Note","Emoji","name","host","localNameRegex","matchLocalName","username","usernameLower","toLowerCase","Promise","all","opts","isDeleted","isSuspended","packUser","detail","packedNote","packNote","isHidden","Error","constructor"],"mappings":"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","file":"show.js","sourceRoot":"../../../../../built"}