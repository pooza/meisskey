{"version":3,"sources":["server/api/endpoints/drive/files/show.js"],"names":["meta","stability","desc","tags","requireCredential","kind","params","fileId","validator","$","optional","type","ID","transform","url","str","res","errors","noSuchFile","message","code","id","accessDenied","fileIdOrUrlRequired","define","ps","user","file","DriveFile","findOne","_id","$exists","isInternalStorageUrl","startsWith","config","driveUrl","mongo","ObjectID","replace","$or","ApiError","isAdmin","isModerator","metadata","userId","equals","pack","detail","self"],"mappings":";;;;;;;;IAQaA,IAAI;eAAJA;;IA0Db,OA+CG;eA/CH;;;sBAlEc;yBACS;wBACO;2BACc;wBACzB;wBACA;uBACM;AAElB,MAAMA,OAAO;IACnBC,WAAW;IAEXC,MAAM;QACL,SAAS;QACT,SAAS;IACV;IAEAC,MAAM;QAAC;KAAQ;IAEfC,mBAAmB;IAEnBC,MAAM;QAAC;QAAc;KAAa;IAElCC,QAAQ;QACPC,QAAQ;YACPC,WAAWC,aAAC,CAACC,QAAQ,CAACC,IAAI,CAACC,eAAE;YAC7BC,WAAWA,iBAAS;YACpBX,MAAM;gBACL,SAAS;gBACT,SAAS;YACV;QACD;QAEAY,KAAK;YACJN,WAAWC,aAAC,CAACC,QAAQ,CAACK,GAAG;YACzBb,MAAM;gBACL,SAAS;gBACT,SAAS;YACV;QACD;IACD;IAEAc,KAAK;QACJL,MAAM;IACP;IAEAM,QAAQ;QACPC,YAAY;YACXC,SAAS;YACTC,MAAM;YACNC,IAAI;QACL;QAEAC,cAAc;YACbH,SAAS;YACTC,MAAM;YACNC,IAAI;QACL;QAEAE,qBAAqB;YACpBJ,SAAS;YACTC,MAAM;YACNC,IAAI;QACL;IACD;AACD;MAEA,WAAeG,IAAAA,eAAM,EAACxB,MAAM,OAAOyB,IAAIC;IACtC,IAAIC;IAEJ,IAAIF,GAAGlB,MAAM,EAAE;QACdoB,OAAO,MAAMC,kBAAS,CAACC,OAAO,CAAC;YAC9BC,KAAKL,GAAGlB,MAAM;YACd,sBAAsB;gBAAEwB,SAAS;YAAM;QACxC;IACD,OAAO,IAAIN,GAAGX,GAAG,EAAE;QAClB,MAAMkB,uBAAuBP,GAAGX,GAAG,CAACmB,UAAU,CAACC,eAAM,CAACC,QAAQ;QAC9D,IAAIH,sBAAsB;YACzB,2BAA2B;YAC3B,OAAO;YACP,sDAAsD;YACtD,MAAMzB,SAAS,IAAI6B,SAAMC,QAAQ,CAACZ,GAAGX,GAAG,CAACwB,OAAO,CAACJ,eAAM,CAACC,QAAQ,EAAE,IAAIG,OAAO,CAAC,WAAW,IAAIA,OAAO,CAAC,OAAO;YAC5GX,OAAO,MAAMC,kBAAS,CAACC,OAAO,CAAC;gBAC9BC,KAAKvB;gBACL,sBAAsB;oBAAEwB,SAAS;gBAAM;YACxC;QACD,OAAO;YACNJ,OAAO,MAAMC,kBAAS,CAACC,OAAO,CAAC;gBAC9BU,KAAK;oBAAC;wBACL,gBAAgBd,GAAGX,GAAG;oBACvB;oBAAG;wBACF,yBAAyBW,GAAGX,GAAG;oBAChC;oBAAG;wBACF,yBAAyBW,GAAGX,GAAG;oBAChC;iBAAE;gBACF,sBAAsB;oBAAEiB,SAAS;gBAAM;YACxC;QACD;IACD,OAAO;QACN,MAAM,IAAIS,eAAQ,CAACxC,KAAKiB,MAAM,CAACM,mBAAmB;IACnD;IAEA,IAAI,CAACG,KAAKe,OAAO,IAAI,CAACf,KAAKgB,WAAW,IAAI,CAACf,KAAKgB,QAAQ,CAACC,MAAM,CAACC,MAAM,CAACnB,KAAKI,GAAG,GAAG;QACjF,MAAM,IAAIU,eAAQ,CAACxC,KAAKiB,MAAM,CAACK,YAAY;IAC5C;IAEA,IAAIK,SAAS,MAAM;QAClB,MAAM,IAAIa,eAAQ,CAACxC,KAAKiB,MAAM,CAACC,UAAU;IAC1C;IAEA,OAAO,MAAM4B,IAAAA,eAAI,EAACnB,MAAM;QACvBoB,QAAQ;QACRC,MAAM;IACP;AACD","file":"show.js","sourceRoot":"../../../../../../built"}