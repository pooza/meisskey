{"version":3,"sources":["server/api/endpoints/hashtags/trend.js"],"names":["meta","rangeA","rangeB","coefficient","requiredUsers","max","tags","requireCredential","allowGet","cacheSec","define","instance","fetchMeta","hidedTags","map","t","toLowerCase","data","Note","aggregate","$match","createdAt","$gt","Date","now","tagsLower","$exists","$ne","$unwind","$group","_id","tag","userId","length","x","filter","includes","i","findIndex","name","count","push","limitedTags","hotsPromises","passedCount","distinct","$lt","hots","erase","Promise","all","sort","a","b","slice","concat","indexOf","countPromises","range","interval","countsLog","totalCounts","stats","chart","counts","usersCount"],"mappings":"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","file":"trend.js","sourceRoot":"../../../../../built"}