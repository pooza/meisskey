{"version":3,"sources":["server/api/endpoints/i/update-email.js"],"names":["meta","requireCredential","secure","limit","duration","ms","max","params","password","validator","$","str","email","optional","nullable","define","ps","user","same","bcrypt","compare","Error","User","update","_id","$set","emailVerified","emailVerifyCode","iObj","pack","detail","includeSecrets","publishMainStream","code","rndstr","fetchMeta","enableAuth","smtpUser","transporter","nodemailer","createTransport","host","smtpHost","port","smtpPort","smtpSecure","ignoreTLS","proxy","config","proxySmtp","auth","pass","smtpPass","undefined","link","url","sendMail","from","to","subject","name","text","error","info","apiLogger","messageId"],"mappings":";;;;;;;;IAYaA,IAAI;eAAJA;;IAqBb,OAmEG;eAnEH;;;sBAjCc;sBACa;wBACO;wBACf;4BACS;2BACN;wBACH;wBACA;oBACC;0BACI;wBACE;AAEnB,MAAMA,OAAO;IACnBC,mBAAmB;IAEnBC,QAAQ;IAERC,OAAO;QACNC,UAAUC,IAAG;QACbC,KAAK;IACN;IAEAC,QAAQ;QACPC,UAAU;YACTC,WAAWC,aAAC,CAACC,GAAG;QACjB;QAEAC,OAAO;YACNH,WAAWC,aAAC,CAACG,QAAQ,CAACC,QAAQ,CAACH,GAAG;QACnC;IACD;AACD;MAEA,WAAeI,IAAAA,eAAM,EAACf,MAAM,OAAOgB,IAAIC;IACtC,mBAAmB;IACnB,MAAMC,OAAO,MAAMC,UAAOC,OAAO,CAACJ,GAAGR,QAAQ,EAAES,KAAKT,QAAQ;IAE5D,IAAI,CAACU,MAAM;QACV,MAAM,IAAIG,MAAM;IACjB;IAEA,MAAMC,aAAI,CAACC,MAAM,CAACN,KAAKO,GAAG,EAAE;QAC3BC,MAAM;YACLb,OAAOI,GAAGJ,KAAK;YACfc,eAAe;YACfC,iBAAiB;QAClB;IACD;IAEA,MAAMC,OAAO,MAAMC,IAAAA,UAAI,EAACZ,KAAKO,GAAG,EAAEP,MAAM;QACvCa,QAAQ;QACRC,gBAAgB;IACjB;IAEA,0BAA0B;IAC1BC,IAAAA,yBAAiB,EAACf,KAAKO,GAAG,EAAE,aAAaI;IAEzC,IAAIZ,GAAGJ,KAAK,IAAI,MAAM;QACrB,MAAMqB,OAAOC,IAAAA,eAAM,EAAC,UAAU;QAE9B,MAAMZ,aAAI,CAACC,MAAM,CAACN,KAAKO,GAAG,EAAE;YAC3BC,MAAM;gBACLE,iBAAiBM;YAClB;QACD;QAEA,MAAMjC,OAAO,MAAMmC,IAAAA,kBAAS;QAE5B,MAAMC,aAAapC,KAAKqC,QAAQ,IAAI,QAAQrC,KAAKqC,QAAQ,KAAK;QAE9D,MAAMC,cAAcC,YAAWC,eAAe,CAAC;YAC9CC,MAAMzC,KAAK0C,QAAQ;YACnBC,MAAM3C,KAAK4C,QAAQ;YACnB1C,QAAQF,KAAK6C,UAAU;YACvBC,WAAW,CAACV;YACZW,OAAOC,eAAM,CAACC,SAAS;YACvBC,MAAMd,aAAa;gBAClBnB,MAAMjB,KAAKqC,QAAQ;gBACnBc,MAAMnD,KAAKoD,QAAQ;YACpB,IAAIC;QACL;QAEA,MAAMC,OAAO,CAAC,EAAEN,eAAM,CAACO,GAAG,CAAC,cAAc,EAAEtB,KAAK,CAAC;QAEjDK,YAAYkB,QAAQ,CAAC;YACpBC,MAAMzD,KAAKY,KAAK;YAChB8C,IAAI1C,GAAGJ,KAAK;YACZ+C,SAAS3D,KAAK4D,IAAI;YAClBC,MAAM,CAAC,yCAAyC,EAAEP,KAAK,CAAC;QACzD,GAAG,CAACQ,OAAOC;YACV,IAAID,OAAO;gBACVE,iBAAS,CAACF,KAAK,CAACA;gBAChB;YACD;YAEAE,iBAAS,CAACD,IAAI,CAAC,oBAAoBA,KAAKE,SAAS;QAClD;IACD;IAEA,OAAOrC;AACR","file":"update-email.js","sourceRoot":"../../../../../built"}