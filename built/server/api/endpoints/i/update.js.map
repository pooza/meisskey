{"version":3,"sources":["server/api/endpoints/i/update.js"],"names":["meta","desc","tags","requireCredential","kind","params","name","validator","$","optional","nullable","str","pipe","isValidName","description","isValidDescription","location","isValidLocation","birthday","isValidBirthday","borderColor","avatarId","type","ID","transform","bannerId","wallpaperId","isLocked","bool","carefulBot","carefulRemote","carefulMassive","autoAcceptFollowed","refuseFollow","avoidSearchIndex","isExplorable","searchableBy","or","hideFollows","noFederation","isBot","isCat","autoWatch","alwaysMarkNsfw","fields","arr","object","range","pushNotifications","follow","mention","reply","renote","quote","reaction","poll_vote","poll_finished","highlight","unreadMessagingMessage","errors","noSuchAvatar","message","code","id","noSuchBanner","avatarNotAnImage","bannerNotAnImage","define","ps","user","app","isSecure","updates","undefined","config","minimumAge","d","Date","toString","a","calcAge","isVerified","match","avatar","DriveFile","findOne","_id","ApiError","contentType","startsWith","metadata","deletedAt","avatarUrl","getDriveFileUrl","banner","bannerUrl","wallpaperUrl","wallpaperColor","wallpaper","Error","filter","x","value","map","emojis","tokens","parseBasic","concat","extractEmojis","extractHashtags","tag","normalizeTag","slice","updateUsertags","User","update","$set","iObj","pack","detail","includeSecrets","publishMainStream","acceptAllFollowRequests","sendDeleteActivity","doPostUnsuspend","publishToFollowers"],"mappings":"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","file":"update.js","sourceRoot":"../../../../../built"}