{"version":3,"sources":["server/api/endpoints/messaging/history.js"],"names":["meta","desc","tags","requireCredential","kind","params","limit","validator","$","optional","num","range","default","res","type","items","define","ps","user","mute","Mute","find","$or","expiresAt","$gt","Date","muterId","_id","deletedAt","$exists","history","i","found","map","m","userId","equals","recipientId","message","Message","findOne","$and","$nin","muteeId","sort","createdAt","push","Promise","all","h","pack"],"mappings":";;;;;;;;IAKaA,IAAI;eAAJA;;IA2Bb,OA0CG;eA1CH;;;sBAhCc;sBACG;kCACgC;wBAC9B;AAEZ,MAAMA,OAAO;IACnBC,MAAM;QACL,SAAS;QACT,SAAS;IACV;IAEAC,MAAM;QAAC;KAAY;IAEnBC,mBAAmB;IAEnBC,MAAM;QAAC;QAAkB;KAAiB;IAE1CC,QAAQ;QACPC,OAAO;YACNC,WAAWC,aAAC,CAACC,QAAQ,CAACC,GAAG,CAACC,KAAK,CAAC,GAAG;YACnCC,SAAS;QACV;IACD;IAEAC,KAAK;QACJC,MAAM;QACNC,OAAO;YACND,MAAM;QACP;IACD;AACD;MAEA,WAAeE,IAAAA,eAAM,EAAChB,MAAM,OAAOiB,IAAIC;IACtC,MAAMC,OAAO,MAAMC,aAAI,CAACC,IAAI,CAAC;QAC5BC,KAAK;YACJ;gBAAEC,WAAW;YAAK;YAClB;gBAAEA,WAAW;oBAAEC,KAAK,IAAIC;gBAAO;YAAC;SAChC;QACDC,SAASR,KAAKS,GAAG;QACjBC,WAAW;YAAEC,SAAS;QAAM;IAC7B;IAEA,MAAMC,UAA+B,EAAE;IAEvC,IAAK,IAAIC,IAAI,GAAGA,IAAId,GAAGX,KAAK,EAAEyB,IAAK;QAClC,MAAMC,QAAQF,QAAQG,GAAG,CAACC,CAAAA,IAAKA,EAAEC,MAAM,CAACC,MAAM,CAAClB,KAAKS,GAAG,IAAIO,EAAEG,WAAW,GAAGH,EAAEC,MAAM;QAEnF,MAAMG,UAAU,MAAMC,yBAAO,CAACC,OAAO,CAAC;YACrClB,KAAK;gBAAC;oBACLa,QAAQjB,KAAKS,GAAG;gBACjB;gBAAG;oBACFU,aAAanB,KAAKS,GAAG;gBACtB;aAAE;YACFc,MAAM;gBAAC;oBACNN,QAAQ;wBAAEO,MAAMV;oBAAM;oBACtBK,aAAa;wBAAEK,MAAMV;oBAAM;gBAC5B;gBAAG;oBACFG,QAAQ;wBAAEO,MAAMvB,KAAKc,GAAG,CAACC,CAAAA,IAAKA,EAAES,OAAO;oBAAE;oBACzCN,aAAa;wBAAEK,MAAMvB,KAAKc,GAAG,CAACC,CAAAA,IAAKA,EAAES,OAAO;oBAAE;gBAC/C;aAAE;QACH,GAAG;YACFC,MAAM;gBACLC,WAAW,CAAC;YACb;QACD;QAEA,IAAIP,SAAS;YACZR,QAAQgB,IAAI,CAACR;QACd,OAAO;YACN;QACD;IACD;IAEA,OAAO,MAAMS,QAAQC,GAAG,CAAClB,QAAQG,GAAG,CAACgB,CAAAA,IAAKC,IAAAA,sBAAI,EAACD,EAAEtB,GAAG,EAAET;AACvD","file":"history.js","sourceRoot":"../../../../../built"}