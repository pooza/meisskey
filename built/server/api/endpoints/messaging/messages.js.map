{"version":3,"sources":["server/api/endpoints/messaging/messages.js"],"names":["meta","desc","tags","requireCredential","kind","params","userId","validator","$","type","ID","transform","limit","optional","num","range","default","sinceId","untilId","markAsRead","bool","res","items","errors","noSuchUser","message","code","id","define","ps","user","recipient","getUser","catch","e","ApiError","query","$or","_id","recipientId","sort","$gt","$lt","messages","Message","find","read","Promise","all","map","pack","populateRecipient"],"mappings":";;;;;;;;IASaA,IAAI;eAAJA;;IA2Db,OA8CG;eA9CH;;;sBApEc;wBACgB;kCACV;sCAEH;wBACE;uBACM;yBACD;AAEjB,MAAMA,OAAO;IACnBC,MAAM;QACL,SAAS;QACT,SAAS;IACV;IAEAC,MAAM;QAAC;KAAY;IAEnBC,mBAAmB;IAEnBC,MAAM;QAAC;QAAkB;KAAiB;IAE1CC,QAAQ;QACPC,QAAQ;YACPC,WAAWC,aAAC,CAACC,IAAI,CAACC,eAAE;YACpBC,WAAWA,iBAAS;YACpBV,MAAM;gBACL,SAAS;gBACT,SAAS;YACV;QACD;QAEAW,OAAO;YACNL,WAAWC,aAAC,CAACK,QAAQ,CAACC,GAAG,CAACC,KAAK,CAAC,GAAG;YACnCC,SAAS;QACV;QAEAC,SAAS;YACRV,WAAWC,aAAC,CAACK,QAAQ,CAACJ,IAAI,CAACC,eAAE;YAC7BC,WAAWA,iBAAS;QACrB;QAEAO,SAAS;YACRX,WAAWC,aAAC,CAACK,QAAQ,CAACJ,IAAI,CAACC,eAAE;YAC7BC,WAAWA,iBAAS;QACrB;QAEAQ,YAAY;YACXZ,WAAWC,aAAC,CAACK,QAAQ,CAACO,IAAI;YAC1BJ,SAAS;QACV;IACD;IAEAK,KAAK;QACJZ,MAAM;QACNa,OAAO;YACNb,MAAM;QACP;IACD;IAEAc,QAAQ;QACPC,YAAY;YACXC,SAAS;YACTC,MAAM;YACNC,IAAI;QACL;IACD;AACD;MAEA,WAAeC,IAAAA,eAAM,EAAC5B,MAAM,OAAO6B,IAAIC;IACtC,kBAAkB;IAClB,MAAMC,YAAY,MAAMC,IAAAA,gBAAO,EAACH,GAAGvB,MAAM,EAAE2B,KAAK,CAACC,CAAAA;QAChD,IAAIA,EAAEP,EAAE,KAAK,wCAAwC,MAAM,IAAIQ,eAAQ,CAACnC,KAAKuB,MAAM,CAACC,UAAU;QAC9F,MAAMU;IACP;IAEA,MAAME,QAAQ;QACbC,KAAK;YAAC;gBACL/B,QAAQwB,KAAKQ,GAAG;gBAChBC,aAAaR,UAAUO,GAAG;YAC3B;YAAG;gBACFhC,QAAQyB,UAAUO,GAAG;gBACrBC,aAAaT,KAAKQ,GAAG;YACtB;SAAE;IACH;IAEA,MAAME,OAAO;QACZF,KAAK,CAAC;IACP;IAEA,IAAIT,GAAGZ,OAAO,EAAE;QACfuB,KAAKF,GAAG,GAAG;QACXF,MAAME,GAAG,GAAG;YACXG,KAAKZ,GAAGZ,OAAO;QAChB;IACD,OAAO,IAAIY,GAAGX,OAAO,EAAE;QACtBkB,MAAME,GAAG,GAAG;YACXI,KAAKb,GAAGX,OAAO;QAChB;IACD;IAEA,MAAMyB,WAAW,MAAMC,yBAAO,CAC5BC,IAAI,CAACT,OAAO;QACZxB,OAAOiB,GAAGjB,KAAK;QACf4B,MAAMA;IACP;IAED,mBAAmB;IACnB,IAAIX,GAAGV,UAAU,EAAE;QAClB,MAAM2B,IAAAA,6BAAI,EAAChB,KAAKQ,GAAG,EAAEP,UAAUO,GAAG,EAAEK;IACrC;IAEA,OAAO,MAAMI,QAAQC,GAAG,CAACL,SAASM,GAAG,CAACxB,CAAAA,UAAWyB,IAAAA,sBAAI,EAACzB,SAASK,MAAM;YACpEqB,mBAAmB;QACpB;AACD","file":"messages.js","sourceRoot":"../../../../../built"}