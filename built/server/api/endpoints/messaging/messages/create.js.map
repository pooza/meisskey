{"version":3,"sources":["server/api/endpoints/messaging/messages/create.js"],"names":["meta","desc","tags","requireCredential","kind","params","userId","validator","$","type","ID","transform","text","optional","str","pipe","isValidText","fileId","res","errors","recipientIsYourself","message","code","id","noSuchUser","remoteNotSupported","noSuchFile","contentRequired","define","ps","user","equals","_id","ApiError","recipient","getUser","catch","e","isRemoteUser","file","DriveFile","findOne","createMessage"],"mappings":";;;;;;;;IAUaA,IAAI;eAAJA;;IAqEb,OAoCG;eApCH;;;sBA/Ec;wBACgB;kCACF;2BACN;wBACH;uBACM;yBACD;wBACM;sBACM;AAE7B,MAAMA,OAAO;IACnBC,MAAM;QACL,SAAS;QACT,SAAS;IACV;IAEAC,MAAM;QAAC;KAAY;IAEnBC,mBAAmB;IAEnBC,MAAM;QAAC;QAAmB;KAAkB;IAE5CC,QAAQ;QACPC,QAAQ;YACPC,WAAWC,aAAC,CAACC,IAAI,CAACC,eAAE;YACpBC,WAAWA,iBAAS;YACpBV,MAAM;gBACL,SAAS;gBACT,SAAS;YACV;QACD;QAEAW,MAAM;YACLL,WAAWC,aAAC,CAACK,QAAQ,CAACC,GAAG,CAACC,IAAI,CAACC,6BAAW;QAC3C;QAEAC,QAAQ;YACPV,WAAWC,aAAC,CAACK,QAAQ,CAACJ,IAAI,CAACC,eAAE;YAC7BC,WAAWA,iBAAS;QACrB;IACD;IAEAO,KAAK;QACJT,MAAM;IACP;IAEAU,QAAQ;QACPC,qBAAqB;YACpBC,SAAS;YACTC,MAAM;YACNC,IAAI;QACL;QAEAC,YAAY;YACXH,SAAS;YACTC,MAAM;YACNC,IAAI;QACL;QAEAE,oBAAoB;YACnBJ,SAAS;YACTC,MAAM;YACNC,IAAI;QACL;QAEAG,YAAY;YACXL,SAAS;YACTC,MAAM;YACNC,IAAI;QACL;QAEAI,iBAAiB;YAChBN,SAAS;YACTC,MAAM;YACNC,IAAI;QACL;IACD;AACD;MAEA,WAAeK,IAAAA,eAAM,EAAC5B,MAAM,OAAO6B,IAAIC;IACtC,SAAS;IACT,IAAID,GAAGvB,MAAM,CAACyB,MAAM,CAACD,KAAKE,GAAG,GAAG;QAC/B,MAAM,IAAIC,eAAQ,CAACjC,KAAKmB,MAAM,CAACC,mBAAmB;IACnD;IAEA,kBAAkB;IAClB,MAAMc,YAAY,MAAMC,IAAAA,gBAAO,EAACN,GAAGvB,MAAM,EAAE8B,KAAK,CAACC,CAAAA;QAChD,IAAIA,EAAEd,EAAE,KAAK,wCAAwC,MAAM,IAAIU,eAAQ,CAACjC,KAAKmB,MAAM,CAACK,UAAU;QAC9F,MAAMa;IACP;IAEA,SAAS;IACT,IAAIC,IAAAA,kBAAY,EAACJ,YAAY;QAC5B,MAAM,IAAID,eAAQ,CAACjC,KAAKmB,MAAM,CAACM,kBAAkB;IAClD;IAGA,IAAIc,OAAO;IACX,IAAIV,GAAGZ,MAAM,IAAI,MAAM;QACtBsB,OAAO,MAAMC,kBAAS,CAACC,OAAO,CAAC;YAC9BT,KAAKH,GAAGZ,MAAM;YACd,mBAAmBa,KAAKE,GAAG;QAC5B;QAEA,IAAIO,SAAS,MAAM;YAClB,MAAM,IAAIN,eAAQ,CAACjC,KAAKmB,MAAM,CAACO,UAAU;QAC1C;IACD;IAEA,2BAA2B;IAC3B,IAAIG,GAAGjB,IAAI,IAAI,QAAQ2B,QAAQ,MAAM;QACpC,MAAM,IAAIN,eAAQ,CAACjC,KAAKmB,MAAM,CAACQ,eAAe;IAC/C;IAEA,OAAO,MAAMe,IAAAA,qBAAa,EAACZ,MAAMI,WAAWL,GAAGjB,IAAI,EAAE2B;AACtD","file":"create.js","sourceRoot":"../../../../../../built"}