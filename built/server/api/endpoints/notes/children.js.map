{"version":3,"sources":["server/api/endpoints/notes/children.js"],"names":["meta","desc","tags","requireCredential","allowGet","cacheSec","params","noteId","validator","$","type","ID","transform","limit","optional","num","range","default","sinceId","untilId","res","items","define","ps","user","followings","hideUserIds","Promise","all","getFriends","_id","getHideUserIds","visibleQuery","visibility","$in","userId","visibleUserIds","$or","map","f","id","mentions","q","$and","replyId","renoteId","text","$ne","fileIds","poll","length","$nin","sort","$gt","$lt","notes","Note","find","maxTimeMS","packMany"],"mappings":"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","file":"children.js","sourceRoot":"../../../../../built"}