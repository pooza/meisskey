{"version":3,"sources":["server/api/endpoints/notes/user-list-timeline.js"],"names":["meta","desc","tags","requireCredential","params","listId","validator","$","type","ID","transform","limit","optional","num","range","default","sinceId","untilId","sinceDate","untilDate","includeMyRenotes","bool","includeRenotedMyNotes","includeLocalRenotes","includeForeignReply","excludeRenote","withFiles","fileType","arr","str","excludeNsfw","excludeSfw","mediaOnly","deprecated","res","items","errors","noSuchList","message","code","id","define","ps","user","list","followingIds","hideUserIds","hideRenoteUserIds","Promise","all","UserList","findOne","_id","userId","getFriendIds","getHideUserIds","getHideRenoteUserIds","ApiError","medias","length","intersection","sort","listQuery","userIds","map","u","hosts","some","x","push","$in","isSelfHost","visibleQuery","visibility","visibleUserIds","query","$and","deletedAt","$or","$nin","replyId","$expr","$eq","console","log","renoteId","text","$ne","fileIds","poll","$exists","$gt","$lt","createdAt","Date","getPackedTimeline"],"mappings":"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","file":"user-list-timeline.js","sourceRoot":"../../../../../built"}