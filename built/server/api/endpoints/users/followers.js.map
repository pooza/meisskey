{"version":3,"sources":["server/api/endpoints/users/followers.js"],"names":["meta","desc","tags","requireCredential","params","userId","validator","$","optional","type","ID","transform","username","str","host","nullable","limit","num","range","default","cursor","sinceId","untilId","v11compatible","bool","iknow","diff","res","properties","users","items","next","format","errors","noSuchUser","message","code","id","define","ps","me","q","_id","usernameLower","toLowerCase","user","User","findOne","ApiError","canShowFollows","query","followeeId","myFriends","getFriendIds","followerId","$in","equals","followingIds","$nin","sort","$lt","$gt","following","Following","aggregate","$match","$sort","$limit","$lookup","from","localField","foreignField","as","$unwind","inStock","length","pop","Promise","all","map","f","pack","_user","detail","packFollower","x","toOidString","createdAt","toISODateOrNull","follower","packUser"],"mappings":"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","file":"followers.js","sourceRoot":"../../../../../built"}