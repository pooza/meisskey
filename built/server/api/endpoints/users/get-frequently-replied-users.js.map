{"version":3,"sources":["server/api/endpoints/users/get-frequently-replied-users.js"],"names":["meta","tags","requireCredential","allowGet","cacheSec","params","userId","validator","$","type","ID","transform","desc","limit","optional","num","range","default","res","items","errors","noSuchUser","message","code","id","define","ps","me","user","getUser","catch","e","ApiError","recentNotes","Note","find","_id","deletedAt","$exists","visibility","$in","replyId","$ne","sort","fields","length","hideUserIds","getHideUserIds","push","replyTargetNotes","map","p","$nin","repliedUsers","x","toString","peak","maximum","Object","values","repliedUsersSorted","keys","a","b","topRepliedUsers","slice","repliesObj","Promise","all","pack","detail","weight"],"mappings":"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","file":"get-frequently-replied-users.js","sourceRoot":"../../../../../built"}