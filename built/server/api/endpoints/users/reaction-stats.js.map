{"version":3,"sources":["server/api/endpoints/users/reaction-stats.js"],"names":["meta","tags","params","target","validator","$","optional","str","desc","userId","type","ID","transform","limit","num","range","default","days","offset","min","requireCredential","allowGet","cacheSec","define","ps","me","date","Date","now","id","genMeid7","queryReactions","NoteReaction","aggregate","$match","createdAt","$gt","$group","_id","count","$sum","$sort","$skip","$limit","queryReacteds","Note","mongo","ObjectID","reactionCounts","$ne","$lookup","from","localField","foreignField","as","$unwind","xs","ys","Promise","all","reactions","map","x","reaction","decodeReaction","reacteds","n","r","reacteds2","Object","keys","sort","a","b","splice","reactionNames","unique","concat","emojis","packEmojis","replace"],"mappings":"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","file":"reaction-stats.js","sourceRoot":"../../../../../built"}