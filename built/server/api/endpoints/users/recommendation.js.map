{"version":3,"sources":["server/api/endpoints/users/recommendation.js"],"names":["meta","nonnull","$ne","desc","tags","requireCredential","kind","params","limit","validator","$","optional","num","range","default","offset","min","origin","str","or","res","type","items","define","ps","me","hideUserIds","getHideUserIds","push","_id","matchQuery","followeeId","$nin","myFollowings","Following","find","followerId","followingIds","map","f","localIds","filter","_followee","host","length","$in","concat","followings","aggregate","$match","$group","count","$sum","$lookup","from","localField","foreignField","as","$unwind","$gt","Date","now","$sort","$skip","$limit","users","x","_user","Promise","all","user","pack","detail"],"mappings":"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","file":"recommendation.js","sourceRoot":"../../../../../built"}