{"version":3,"sources":["server/api/endpoints/users/search.js"],"names":["meta","desc","tags","requireCredential","allowGet","cacheSec","params","query","validator","$","str","offset","optional","num","min","default","limit","range","localOnly","boolean","detail","res","type","items","define","ps","me","isName","startsWith","replace","match","isUsername","isHostname","users","hideInstances","Instance","find","$or","isBlocked","fields","host","hideHosts","map","x","toDbHost","hideHostsForRemote","concat","name","usertags","Usertag","ownerId","_id","User","$in","targetId","isDeleted","$ne","isSuspended","length","otherUsers","RegExp","escapeRegexp","skip","$nin","usernameLower","toLowerCase","sort","updatedAt","ids","user","isSelfHost","Promise","all","pack"],"mappings":"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","file":"search.js","sourceRoot":"../../../../../built"}