{"version":3,"sources":["server/api/endpoints/words/trend.js"],"names":["meta","rangeA","rangeB","coefficient","requiredUsers","max","tags","requireCredential","allowGet","cacheSec","define","data","Note","aggregate","$match","createdAt","$gt","Date","now","visibility","trendWords","$exists","$ne","$unwind","$group","_id","tag","userId","length","x","map","i","findIndex","name","count","push","limitedTags","filter","hotsPromises","passedCount","distinct","$lt","hots","erase","Promise","all","sort","a","b","slice","concat","indexOf","countPromises","range","interval","countsLog","totalCounts","stats","chart","counts","usersCount"],"mappings":"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","file":"trend.js","sourceRoot":"../../../../../built"}