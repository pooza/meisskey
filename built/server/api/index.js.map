{"version":3,"sources":["server/api/index.js"],"names":["app","Koa","use","ctx","next","err","code","throw","emit","config","disableApiCors","cors","origin","set","bodyParser","detectJSON","is","upload","multer","storage","diskStorage","limits","fileSize","maxFileSize","files","router","Router","endpoint","endpoints","meta","requireFile","post","name","single","handler","bind","includes","replace","allowGet","get","status","signup","signin","discord","routes","github","twitter","disableFederation","instances","Instance","find","host","punyCodes","unique","map","instance","toApHost","body","all"],"mappings":"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","file":"index.js","sourceRoot":"../../../built"}