{"version":3,"sources":["server/api/limiter.js"],"names":["incrementAndCheck","logger","Logger","endpoint","user","ip","limiterDB","limitation","meta","limit","target","genTargetKey","key","genEpKey","minInterval","limiter","Limiter","db","duration","max","info","get","id","debug","remaining","Error","_id","addrToPeer","name"],"mappings":";;;;;;;;IAasBA,iBAAiB;eAAjBA;;IA+DtB,OAAiC;eAAjC;;;kCA5EyB;uBACH;wBAGH;4BACQ;AAE3B,MAAMC,SAAS,IAAIC,eAAM,CAAC;AAMnB,eAAeF,kBAAkBG,QAAmB,EAAEC,IAA8B,EAAEC,EAAW;IACvG,IAAIC,cAAS,IAAI,MAAM,QAAQ,8BAA8B;IAE7D,MAAMC,aAAaJ,SAASK,IAAI,CAACC,KAAK;IACtC,IAAIF,cAAc,MAAM,QAAQ,uBAAuB;IAEvD,kBAAkB;IAClB,MAAMG,SAASC,aAAaP,MAAMC;IAClC,MAAMO,MAAMC,SAASV;IAErB,gDAAgD;IAChD,IAAI,OAAOI,WAAWO,WAAW,KAAK,UAAU;QAC/C,MAAMC,UAAU,IAAIC,kBAAQ;YAC3BC,IAAIX,cAAS;YACbY,UAAUX,WAAWO,WAAW;YAChCK,KAAK;QACN;QAEA,MAAMC,OAAO,MAAML,QAAQM,GAAG,CAAC;YAC9BC,IAAI,CAAC,EAAEZ,OAAO,CAAC,EAAEE,IAAI,IAAI,CAAC;QAC3B;QAEAX,OAAOsB,KAAK,CAAC,CAAC,EAAEb,OAAO,CAAC,EAAEE,IAAI,gBAAgB,EAAEQ,KAAKI,SAAS,CAAC,CAAC;QAEhE,IAAIJ,KAAKI,SAAS,KAAK,GAAG,MAAM,IAAIC,MAAM;IAC3C;IAEA,gDAAgD;IAChD,IAAI,OAAOlB,WAAWW,QAAQ,KAAK,YAAY,OAAOX,WAAWY,GAAG,KAAK,UAAU;QAClF,MAAMJ,UAAU,IAAIC,kBAAQ;YAC3BC,IAAIX,cAAS;YACbY,UAAUX,WAAWW,QAAQ;YAC7BC,KAAKZ,WAAWY,GAAG;QACpB;QAEA,MAAMC,OAAO,MAAML,QAAQM,GAAG,CAAC;YAC9BC,IAAI,CAAC,EAAEZ,OAAO,CAAC,EAAEE,IAAI,CAAC;QACvB;QAEAX,OAAOsB,KAAK,CAAC,CAAC,EAAEb,OAAO,CAAC,EAAEE,IAAI,gBAAgB,EAAEQ,KAAKI,SAAS,CAAC,CAAC;QAEhE,IAAIJ,KAAKI,SAAS,KAAK,GAAG,MAAM,IAAIC,MAAM;IAC3C;IAEA,QAAQ,yBAAyB;AAClC;AAEA;;CAEC,GACD,SAASd,aAAaP,IAA8B,EAAEC,EAA6B;IAClF,IAAID,MAAM,OAAOA,KAAKsB,GAAG;QACVC;IAAf,IAAItB,IAAI,OAAOsB,CAAAA,cAAAA,IAAAA,sBAAU,EAACtB,iBAAXsB,yBAAAA,cAAkB;IACjC,OAAO;AACR;AAEA;;CAEC,GACD,SAASd,SAASV,QAAmB;QAC7BA;QAAAA;IAAP,OAAOA,CAAAA,4BAAAA,uBAAAA,SAASK,IAAI,CAACC,KAAK,cAAnBN,2CAAAA,qBAAqBS,GAAG,cAAxBT,sCAAAA,2BAA4BA,SAASyB,IAAI;AACjD;MAEA,WAAe5B","file":"limiter.js","sourceRoot":"../../../built"}