{"version":3,"sources":["server/api/limiter.js"],"names":["logger","Logger","endpoint","user","ip","Promise","ok","reject","limiterDB","limitation","meta","limit","target","_id","addrToPeer","targetName","getAcct","key","hasOwnProperty","name","hasShortTermLimit","hasLongTermLimit","min","max","minIntervalLimiter","Limiter","id","duration","minInterval","db","get","err","info","debug","remaining","limiter"],"mappings":";+BAUA;;;eAAA;;;6BAVyB;uBACH;wBAEF;wBAED;4BACQ;AAE3B,MAAMA,SAAS,IAAIC,eAAM,CAAC;MAE1B,WAAe,CAACC,UAAqBC,MAAgCC,KAAgB,IAAIC,QAAQ,CAACC,IAAIC;QACrG,2BAA2B;QAC3B,IAAIC,cAAS,IAAI,MAAM;YACtBF;YACA;QACD;QAEA,MAAMG,aAAaP,SAASQ,IAAI,CAACC,KAAK;QACtC,IAAIF,cAAc,MAAM;YACvBH;YACA;QACD;QAEA,MAAMM,SAAST,OAAOA,KAAKU,GAAG,GAAGT,KAAKU,IAAAA,sBAAU,EAACV,MAAM;QACvD,MAAMW,aAAaZ,OAAO,CAAC,CAAC,EAAEa,IAAAA,eAAO,EAACb,MAAM,CAAC,GAAGC,KAAKU,IAAAA,sBAAU,EAACV,MAAM;QAEtE,MAAMa,MAAMR,WAAWS,cAAc,CAAC,SACnCT,WAAWQ,GAAG,GACdf,SAASiB,IAAI;QAEhB,MAAMC,oBACLX,WAAWS,cAAc,CAAC;QAE3B,MAAMG,mBACLZ,WAAWS,cAAc,CAAC,eAC1BT,WAAWS,cAAc,CAAC;QAE3B,IAAIE,mBAAmB;YACtBE;QACD,OAAO,IAAID,kBAAkB;YAC5BE;QACD,OAAO;YACNjB;QACD;QAEA,mBAAmB;QACnB,SAASgB;YACR,MAAME,qBAAqB,IAAIC,aAAQ;gBACtCC,IAAI,CAAC,EAAEd,OAAO,CAAC,EAAEK,IAAI,IAAI,CAAC;gBAC1BU,UAAUlB,WAAYmB,WAAW;gBACjCL,KAAK;gBACLM,IAAIrB,cAAS;YACd;YAEAgB,mBAAmBM,GAAG,CAAC,CAACC,KAAKC;gBAC5B,IAAID,KAAK;oBACR,OAAOxB,OAAO;gBACf;gBAEAP,OAAOiC,KAAK,CAAC,CAAC,EAAElB,WAAW,CAAC,EAAEb,SAASiB,IAAI,CAAC,gBAAgB,EAAEa,KAAKE,SAAS,CAAC,CAAC;gBAE9E,IAAIF,KAAKE,SAAS,KAAK,GAAG;oBACzB3B,OAAO;gBACR,OAAO;oBACN,IAAIc,kBAAkB;wBACrBE;oBACD,OAAO;wBACNjB;oBACD;gBACD;YACD;QACD;QAEA,kBAAkB;QAClB,SAASiB;YACR,MAAMY,UAAU,IAAIV,aAAQ;gBAC3BC,IAAI,CAAC,EAAEd,OAAO,CAAC,EAAEK,IAAI,CAAC;gBACtBU,UAAUlB,WAAYkB,QAAQ;gBAC9BJ,KAAKd,WAAYc,GAAG;gBACpBM,IAAIrB,cAAS;YACd;YAEA2B,QAAQL,GAAG,CAAC,CAACC,KAAKC;gBACjB,IAAID,KAAK;oBACR,OAAOxB,OAAO;gBACf;gBAEAP,OAAOiC,KAAK,CAAC,CAAC,EAAElB,WAAW,CAAC,EAAEb,SAASiB,IAAI,CAAC,gBAAgB,EAAEa,KAAKE,SAAS,CAAC,CAAC;gBAE9E,IAAIF,KAAKE,SAAS,KAAK,GAAG;oBACzB3B,OAAO;gBACR,OAAO;oBACND;gBACD;YACD;QACD;IACD","file":"limiter.js","sourceRoot":"../../../built"}