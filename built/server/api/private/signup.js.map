{"version":3,"sources":["server/api/private/signup.js"],"names":["ctx","instance","body","request","fetchMeta","process","env","NODE_ENV","enableRecaptcha","recaptchaSecretKey","verifyRecaptcha","catch","e","throw","username","password","invitationCode","ticket","lastTicket","disableRegistration","status","RegistrationTicket","findOne","code","expiresAt","Date","restCount","validateUsername","validatePassword","usersCount","User","count","usernameExist","usernameLower","toLowerCase","host","limit","salt","bcrypt","genSalt","hash","secret","generateUserToken","keyPair","genRsaKeyPair","account","insert","avatarId","bannerId","createdAt","description","followersCount","followingCount","name","notesCount","keypair","privateKey","token","isAdmin","config","autoAdmin","carefulMassive","refuseFollow","autoAcceptFollowed","profile","bio","birthday","location","settings","autoWatch","remove","_id","update","$push","inviteeIds","$inc","Meta","upsert","usersChart","res","pack","detail","includeSecrets"],"mappings":"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","file":"signup.js","sourceRoot":"../../../../built"}