{"version":3,"sources":["server/api/stream/channels/home-timeline.js"],"names":["Channel","init","params","updateFollowing","updateFilter","includeForeignReply","subscriber","on","onNote","user","_id","onServerEvent","followings","Following","find","followerId","followingIds","map","x","followeeId","lists","UserList","userId","hideFromHome","hideFromUsers","concat","list","userIds","toString","hideFromHosts","hosts","isSelfHost","hideRenotes","UserFilter","ownerId","hideRenote","hideRenoteUsers","targetId","data","type","note","oidEquals","oidIncludes","mentions","includes","visibility","pack","id","detail","isHidden","replyId","reply","renoteId","renote","shouldMuteThisNote","mutedUserIds","text","fileIds","length","poll","send","dispose","off","chName","requireCredential","autobind"],"mappings":"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","file":"home-timeline.js","sourceRoot":"../../../../../built"}