{"version":3,"sources":["server/api/stream/channels/hybrid-timeline.js"],"names":["Channel","init","params","meta","fetchMeta","disableLocalTimeline","updateFollowing","updateFilter","includeForeignReply","subscriber","on","onNewNote","user","_id","onServerEvent","followings","Following","find","followerId","followingIds","map","x","followeeId","lists","UserList","userId","hideFromHome","hideFromUsers","concat","list","userIds","toString","hideFromHosts","hosts","isSelfHost","hideRenotes","UserFilter","ownerId","hideRenote","hideRenoteUsers","targetId","data","type","note","host","visibility","oidEquals","oidIncludes","mentions","includes","pack","id","detail","isHidden","replyId","reply","renoteId","renote","shouldMuteThisNote","mutedUserIds","text","fileIds","length","poll","send","dispose","off","chName","requireCredential","autobind"],"mappings":"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","file":"hybrid-timeline.js","sourceRoot":"../../../../../built"}