{"version":3,"sources":["server/api/streaming.js"],"names":["streamLogger","Logger","module","exports","server","wss","WebSocket","WebSocketServer","noServer","on","request","socket","head","user","app","auth","isSuspended","write","destroy","isDeleted","handleUpgrade","ws","client","emit","e","AuthenticationError","error","userHash","rndstr","debug","username","lastActive","Date","now","updateLastActive","data","toString","send","ev","EventEmitter","onServerMessage","parsed","channel","message","serverEventEmitter","main","MainStreamConnection","intervalId","setInterval","ping","warn","terminate","intervalId2","activeUsersChart","update","once","removeAllListeners","dispose","off","clearInterval","url","Error","qs","split","q","querystring","parse","i","authenticate"],"mappings":";+BAcaA;;;eAAAA;;;oBAbc;oCAC6B;wBAEvB;8BACiB;wBACrB;wBACV;6BACU;6BACA;wBAGV;AAEZ,MAAMA,eAAe,IAAIC,eAAM,CAAC,UAAU;AAOjDC,OAAOC,OAAO,GAAG,CAACC;IACjB,MAAMC,MAAM,IAAIC,IAAUC,eAAe,CAAC;QAAEC,UAAU;IAAK;IAE3D,QAAQ;IACRJ,OAAOK,EAAE,CAAC,WAAW,OAAOC,SAASC,QAAQC;QAC5C,OAAO;QACP,IAAI;gBAGCC,OAMAA;YARJ,MAAM,CAACA,MAAMC,IAAI,GAAG,MAAMC,KAAKL;YAE/B,KAAIG,QAAAA,kBAAAA,4BAAAA,MAAMG,WAAW,EAAE;gBACtBL,OAAOM,KAAK,CAAC;gBACbN,OAAOO,OAAO;gBACd;YACD;YAEA,KAAIL,SAAAA,kBAAAA,6BAAAA,OAAMM,SAAS,EAAE;gBACpBR,OAAOM,KAAK,CAAC;gBACbN,OAAOO,OAAO;gBACd;YACD;YAEAb,IAAIe,aAAa,CAACV,SAASC,QAAQC,MAAM,CAACS;gBACzC,MAAMC,SAAqB;oBAAET;oBAAMC;gBAAI;gBACvCT,IAAIkB,IAAI,CAAC,cAAcF,IAAIX,SAASY;YACrC;QACD,EAAE,OAAOE,GAAQ;YAChB,IAAIA,aAAaC,iCAAmB,EAAE;gBACrCd,OAAOM,KAAK,CAAC;gBACbN,OAAOO,OAAO;gBACd;YACD,OAAO;gBACNlB,aAAa0B,KAAK,CAACF;gBACnBb,OAAOM,KAAK,CAAC;gBACbN,OAAOO,OAAO;gBACd;YACD;QACD;IACD;IAEA,mBAAmB;IACnBb,IAAII,EAAE,CAAC,cAAc,CAACY,IAAyBX,SAA+BY;YAE3BA;QADlD,MAAMK,WAAWC,IAAAA,eAAM,EAAC;QACxB5B,aAAa6B,KAAK,CAAC,CAAC,CAAC,EAAEF,SAAS,gBAAgB,GAAEL,eAAAA,OAAOT,IAAI,cAAXS,mCAAAA,aAAaQ,QAAQ,CAAC,CAAC;QAEzE,kBAAkB;QAClB,IAAIC,aAAaC,KAAKC,GAAG;QACzB,MAAMC,mBAAmB;YACxBH,aAAaC,KAAKC,GAAG;QACtB;QACAC;QAEAb,GAAGZ,EAAE,CAAC,SAASe,CAAAA,IAAKxB,aAAa0B,KAAK,CAACF;QAEvCH,GAAGZ,EAAE,CAAC,WAAW0B,CAAAA;YAChBnC,aAAa6B,KAAK,CAAC,CAAC,CAAC,EAAEF,SAAS,OAAO,EAAEQ,KAAK,CAAC;YAC/CD;YAEA,2BAA2B;YAC3B,IAAIC,KAAKC,QAAQ,OAAO,QAAQ;gBAC/BpC,aAAa6B,KAAK,CAAC,CAAC,CAAC,EAAEF,SAAS,UAAU,CAAC;gBAC3CN,GAAGgB,IAAI,CAAC;YACT;QACD;QAEA,yCAAyC;QACzChB,GAAGZ,EAAE,CAAC,QAAQ;YACbT,aAAa6B,KAAK,CAAC,CAAC,CAAC,EAAEF,SAAS,WAAW,CAAC;YAC5CO;QACD;QAEA,eAAe;QACf,MAAMI,KAAK,IAAIC,oBAAY;QAE3B,MAAMC,kBAAkB,CAACC;YACxBH,GAAGf,IAAI,CAACkB,OAAOC,OAAO,EAAED,OAAOE,OAAO;QACvC;QAEAC,sCAAkB,CAACnC,EAAE,CAAC,WAAW+B;QAEjC,MAAMK,OAAO,IAAIC,eAAoB,CAACzB,IAAIiB,IAAIhB,OAAOT,IAAI,EAAES,OAAOR,GAAG;QAErE,oBAAoB;QACpB,MAAMiC,aAAaC,YAAY;YAC9BhD,aAAa6B,KAAK,CAAC,CAAC,CAAC,EAAEF,SAAS,WAAW,CAAC;YAC5CN,GAAG4B,IAAI;YAEP,IAAIjB,KAAKC,GAAG,KAAKF,aAAa,KAAK,KAAK,MAAM;oBACLT;gBAAxCtB,aAAakD,IAAI,CAAC,CAAC,CAAC,EAAEvB,SAAS,OAAO,GAAEL,eAAAA,OAAOT,IAAI,cAAXS,mCAAAA,aAAaQ,QAAQ,CAAC,QAAQ,CAAC;gBACvET,GAAG8B,SAAS;YACb;QACD,GAAG,IAAI,KAAK;QAEZ,qBAAqB;QACrB,MAAMC,cAAcJ,YAAY;YAC/B,IAAI1B,OAAOT,IAAI,EAAE;gBAChBb,aAAa6B,KAAK,CAAC,CAAC,CAAC,EAAEF,SAAS,oBAAoB,CAAC;gBACrD0B,oBAAgB,CAACC,MAAM,CAAChC,OAAOT,IAAI;YACpC;QACD,GAAG,IAAI,KAAK;QAEZQ,GAAGkC,IAAI,CAAC,SAAS;YAChBvD,aAAa6B,KAAK,CAAC,CAAC,CAAC,EAAEF,SAAS,OAAO,CAAC;YACxCW,GAAGkB,kBAAkB;YACrBX,KAAKY,OAAO;YACZb,sCAAkB,CAACc,GAAG,CAAC,WAAWlB;YAClCmB,cAAcZ;YACdY,cAAcP;QACf;IACD;AACD;AAEA,SAASrC,KAAKL,OAA6B;IAC1C,IAAI,CAACA,QAAQkD,GAAG,EAAE,MAAM,IAAIC,MAAM;IAElC,MAAMC,KAAKpD,QAAQkD,GAAG,CAACG,KAAK,CAAC,IAAI,CAAC,EAAE;IACpC,IAAI,CAACD,IAAI,OAAO;QAAC;QAAM;KAAK;IAE5B,MAAME,IAAIC,aAAYC,KAAK,CAACJ;IAC5B,IAAI,CAACE,EAAEG,CAAC,EAAE,OAAO;QAAC;QAAM;KAAK;IAE7B,OAAOC,IAAAA,qBAAY,EAACJ,EAAEG,CAAC,GAAa,mBAAmB;AACxD","file":"streaming.js","sourceRoot":"../../../built"}