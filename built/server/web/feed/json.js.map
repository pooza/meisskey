{"version":3,"sources":["server/web/feed/json.js"],"names":["getJSONFeed","acct","untilId","username","host","parseAcct","user","User","findOne","isDeleted","$ne","isSuspended","usernameLower","toLowerCase","query","userId","_id","deletedAt","visibility","$in","text","$lt","transform","notes","Note","find","sort","limit","url","config","name","fullacct","avatar","avatarUrl","undefined","feed","version","title","home_page_url","feed_url","next_url","length","description","icon","author","items","note","noteUrl","image","_files","file","contentType","startsWith","item","id","content_html","getNoteHtml","content_text","summary","cw","getDriveFileUrl","date_published","createdAt","toISOString","tags","attachments","map","mime_type","size_in_bytes","filename","push"],"mappings":"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","file":"json.js","sourceRoot":"../../../../built"}