{"version":3,"sources":["server/well-known.js"],"names":["router","Router","XRD","x","map","element","value","attributes","Object","entries","reduce","a","k","v","escapeAttribute","escapeValue","c","webFingerPath","jrd","xrd","get","ctx","config","disableFederation","throw","set","body","rel","type","template","url","links","generateQuery","resource","startsWith","toLowerCase","fromId","mongo","ObjectID","split","pop","fromAcct","parseAcct","slice","length","_id","isDeleted","$ne","isSuspended","noFederation","host","acct","usernameLower","username","query","status","user","User","findOne","subject","self","href","profilePage","subscribe","accepts","vary","all"],"mappings":"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","file":"well-known.js","sourceRoot":"../../built"}