{"version":3,"sources":["services/drive/add-file.js"],"names":["generateAlts","storeOriginal","storeAlts","addFile","logger","driveLogger","createSubLogger","save","path","name","info","metadata","drive","animation","type","mime","undefined","alts","uri","catch","err","error","webpublic","thumbnail","storage","ext","FILE_TYPE_BROWSERSAFE","includes","baseUrl","config","useSSL","endPoint","port","bucket","key","prefix","uuid","url","thumbnailKey","thumbnailUrl","uploads","push","upload","data","fs","createReadStream","Promise","all","Object","assign","withoutChunks","storageProps","webpublicKey","webpublicUrl","file","DriveFile","insert","length","size","uploadDate","Date","md5","filename","contentType","InternalStorage","saveFromBufferAsync","saveFromPathAsync","fileSystem","originalDst","getDriveFileBucket","accessKey","originalFile","_id","webDst","getDriveFileWebpublicBucket","webFile","thumDst","getDriveFileThumbnailBucket","thumFile","generateWeb","startsWith","generateVideoThumbnail","img","sharp","isAnimated","pages","webpulicSafe","exif","iptc","xmp","tifftagPhotoshop","width","height","debug","convertSharpToJpeg","convertSharpToWebp","convertSharpToAvif","convertSharpToPng","convertSharpToPngOrJpeg","stream","params","Bucket","Key","Body","ContentType","CacheControl","ContentDisposition","contentDisposition","setPublicRead","ACL","s3Client","getS3Client","Upload","client","partSize","result","done","Location","resolve","reject","writeStream","openUploadStream","once","on","pipe","originalId","end","deleteOldFile","user","oldFile","findOne","$nin","avatarId","bannerId","$exists","sort","delFile","comment","folderId","force","isLink","sensitive","driveFile","getFileInfo","JSON","stringify","detectedName","much","isSensitive","update","$set","isRemoteUser","usage","aggregate","$match","$project","$group","$sum","then","aggregates","instance","fetchMeta","driveCapacity","remoteDriveCapacityMb","fetchFolder","driveFolder","DriveFolder","userId","properties","folder","_user","host","isRemote","isLocalUser","settings","alwaysMarkNsfw","src","e","code","getDriveConfig","succ","pack","self","packedFile","publishMainStream","publishDriveStream","driveChart","instanceChart","updateDrive","Instance","$inc","driveUsage","driveFiles"],"mappings":"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","file":"add-file.js","sourceRoot":"../../../built"}