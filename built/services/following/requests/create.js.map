{"version":3,"sources":["services/following/requests/create.js"],"names":["follower","followee","requestId","isRemoteUser","isLocalUser","description","match","content","renderActivity","renderReject","renderFollow","deliver","inbox","blocking","blocked","Promise","all","Blocking","findOne","blockerId","_id","blockeeId","userRefused","refuseFollow","autoAcceptFollowed","followed","Following","followerId","followeeId","Error","FollowRequest","insert","createdAt","Date","_follower","host","undefined","sharedInbox","_followee","User","update","$inc","pendingReceivedFollowRequestsCount","packUser","then","packed","publishMainStream","detail","createNotification"],"mappings":"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","file":"create.js","sourceRoot":"../../../../built"}