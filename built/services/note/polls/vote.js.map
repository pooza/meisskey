{"version":3,"sources":["services/note/polls/vote.js"],"names":["user","note","choice","Promise","res","rej","poll","choices","some","x","id","exist","Vote","find","noteId","_id","userId","multiple","length","insert","createdAt","Date","inc","findIndex","c","Note","update","$inc","publishNoteStream","toHexString","createNotification","Watching","$ne","deletedAt","$exists","fields","then","watchers","watcher","isLocalUser","settings","autoWatch","watch"],"mappings":";+BAQA;;;eAAA;;;0BARiB;sBACW;8BACP;uBACH;wBACgB;oCACC;sBACA;MAEnC,WAAe,CAACA,MAAaC,MAAaC,SAAmB,IAAIC,QAAQ,OAAOC,KAAKC;QACpF,IAAI,CAACJ,KAAKK,IAAI,CAACC,OAAO,CAACC,IAAI,CAACC,CAAAA,IAAKA,EAAEC,EAAE,IAAIR,SAAS,OAAOG,IAAI;QAE7D,mBAAmB;QACnB,MAAMM,QAAQ,MAAMC,iBAAI,CAACC,IAAI,CAAC;YAC7BC,QAAQb,KAAKc,GAAG;YAChBC,QAAQhB,KAAKe,GAAG;QACjB;QAEA,IAAId,KAAKK,IAAI,CAACW,QAAQ,EAAE;YACvB,IAAIN,MAAMH,IAAI,CAACC,CAAAA,IAAKA,EAAEP,MAAM,KAAKA,SAChC,OAAOG,IAAI;QACb,OAAO,IAAIM,MAAMO,MAAM,EAAE;YACxB,OAAOb,IAAI;QACZ;QAEA,cAAc;QACd,MAAMO,iBAAI,CAACO,MAAM,CAAC;YACjBC,WAAW,IAAIC;YACfP,QAAQb,KAAKc,GAAG;YAChBC,QAAQhB,KAAKe,GAAG;YAChBb,QAAQA;QACT;QAEAE;QAEA,MAAMkB,MAAW,CAAC;QAClBA,GAAG,CAAC,CAAC,aAAa,EAAErB,KAAKK,IAAI,CAACC,OAAO,CAACgB,SAAS,CAACC,CAAAA,IAAKA,EAAEd,EAAE,IAAIR,QAAQ,MAAM,CAAC,CAAC,GAAG;QAEhF,wBAAwB;QACxB,MAAMuB,aAAI,CAACC,MAAM,CAAC;YAAEX,KAAKd,KAAKc,GAAG;QAAC,GAAG;YACpCY,MAAML;QACP;QAEAM,IAAAA,yBAAiB,EAAC3B,KAAKc,GAAG,EAAE,aAAa;YACxCb,QAAQA;YACRc,QAAQhB,KAAKe,GAAG,CAACc,WAAW;QAC7B;QAEA,SAAS;QACTC,IAAAA,sCAAkB,EAAC7B,KAAKe,MAAM,EAAEhB,KAAKe,GAAG,EAAE,aAAa;YACtDD,QAAQb,KAAKc,GAAG;YAChBb,QAAQA;QACT;QAEA,iBAAiB;QACjB6B,qBAAQ,CACNlB,IAAI,CAAC;YACLC,QAAQb,KAAKc,GAAG;YAChBC,QAAQ;gBAAEgB,KAAKhC,KAAKe,GAAG;YAAC;YACxB,iBAAiB;YACjBkB,WAAW;gBAAEC,SAAS;YAAM;QAC7B,GAAG;YACFC,QAAQ;gBACPnB,QAAQ;YACT;QACD,GACCoB,IAAI,CAACC,CAAAA;YACL,KAAK,MAAMC,WAAWD,SAAU;gBAC/BP,IAAAA,sCAAkB,EAACQ,QAAQtB,MAAM,EAAEhB,KAAKe,GAAG,EAAE,aAAa;oBACzDD,QAAQb,KAAKc,GAAG;oBAChBb,QAAQA;gBACT;YACD;QACD;QAED,8BAA8B;QAC9B,IAAIqC,IAAAA,iBAAW,EAACvC,SAASA,KAAKwC,QAAQ,CAACC,SAAS,KAAK,OAAO;YAC3DC,IAAAA,cAAK,EAAC1C,KAAKe,GAAG,EAAEd;QACjB;IACD","file":"vote.js","sourceRoot":"../../../../built"}