{"version":3,"sources":["services/update-hashtag.js"],"names":["updateHashtags","updateUsertags","updateHashtag","user","tags","tag","filter","x","includes","isUserAttached","inc","normalizeTag","index","Hashtag","findOne","$push","$pull","$inc","attachedUserIds","some","id","equals","_id","attachedUsersCount","isLocalUser","attachedLocalUserIds","attachedLocalUsersCount","isRemoteUser","attachedRemoteUserIds","attachedRemoteUsersCount","mentionedUserIds","mentionedUsersCount","mentionedLocalUserIds","mentionedLocalUsersCount","mentionedRemoteUserIds","mentionedRemoteUsersCount","q","Object","keys","length","update","insert","hashtagChart"],"mappings":"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","file":"update-hashtag.js","sourceRoot":"../../built"}