{"version":3,"sources":["tools/clean-old-posts.js"],"names":["main","days","limit","Date","now","id","ObjectID","genMeid7","favs","Favorite","find","noteId","$lt","users","User","host","$ne","fields","_id","prs","u","user","findOne","console","log","length","username","exIds","concat","map","x","pinnedNoteIds","result","Note","remove","$and","userId","$nin","$or","renoteCount","$exists","repliesCount","reactionCounts","replyId","renoteId","mentions","deletedCount","args","process","argv","slice","then","setTimeout","exit"],"mappings":"AAAA,+CAA+C;;sBACnB;sBACX;0BACI;uBACE;uBACE;yBACA;AAEzB,eAAeA,KAAKC,OAAO,EAAE;IAC5B,MAAMC,QAAQ,IAAIC,KAAKA,KAAKC,GAAG,KAAMH,OAAO,OAAO;IACnD,MAAMI,KAAK,IAAIC,iBAAQ,CAACC,IAAAA,eAAQ,EAACL;IAEjC,OAAO;IACP,MAAMM,OAAO,MAAMC,iBAAQ,CAACC,IAAI,CAAC;QAChCC,QAAQ;YAAEC,KAAKP;QAAG;IACnB;IAEA,eAAe;IACf,MAAMQ,QAAQ,MAAMC,aAAI,CAACJ,IAAI,CAAC;QAC7BK,MAAM;YAAEC,KAAK;QAAK;IACnB,GAAG;QACFC,QAAQ;YACPC,KAAK;QACN;IACD;IAEA,IAAIC,MAAM;IAEV,KAAK,MAAMC,KAAKP,MAAO;QACtBM;QAEA,MAAME,OAAO,MAAMP,aAAI,CAACQ,OAAO,CAAC;YAC/BJ,KAAKE,EAAEF,GAAG;QACX;QAEAK,QAAQC,GAAG,CAAC,CAAC,KAAK,EAAEL,IAAI,CAAC,EAAEN,MAAMY,MAAM,CAAC,GAAG,EAAEJ,KAAKK,QAAQ,CAAC,CAAC,EAAEL,KAAKN,IAAI,CAAC,CAAC;QAEzE,MAAMY,QAAQC,IAAAA,aAAM,EAAC;YACpBpB,KAAKqB,GAAG,CAACC,CAAAA,IAAKA,EAAEnB,MAAM;YACrBU,KAAKU,aAAa,IAAI,EAAE;SACzB;QAED,MAAMC,SAAS,MAAMC,aAAI,CAACC,MAAM,CAAC;YAChCC,MAAM;gBACL;oBACCC,QAAQf,KAAKH,GAAG;gBACjB;gBAEA;oBACCA,KAAK;wBAAEmB,MAAMV;oBAAM;gBACpB;gBACA;oBACCT,KAAK;wBAAEN,KAAKP;oBAAG;gBAChB;gBAEA;oBACCiC,KAAK;wBACJ;4BAAEC,aAAa;gCAAEC,SAAS;4BAAM;wBAAE;wBAClC;4BAAED,aAAa;wBAAE;qBACjB;gBACF;gBACA;oBACCE,cAAc;wBAAED,SAAS;oBAAM;gBAChC;gBACA;oBACCE,gBAAgB;wBAAEF,SAAS;oBAAM;gBAClC;gBAEA;oBACCG,SAAS;gBACV;gBACA;oBACCC,UAAU;gBACX;gBACA;oBACCC,UAAU;wBAAEL,SAAS;oBAAM,EAAE,sCAAsC;gBACpE;aACA;QACF;QAEAjB,QAAQC,GAAG,CAAC,CAAC,gBAAgB,EAAEQ,OAAOc,YAAY,CAAC,CAAC;IAEpD;;;;;EAKA,GACD;AACD;AAEA,MAAMC,OAAOC,QAAQC,IAAI,CAACC,KAAK,CAAC;AAEhClD,KAAK+C,IAAI,CAAC,EAAE,EAAEI,IAAI,CAAC;IAClB5B,QAAQC,GAAG,CAAC;IACZ4B,WAAW;QACVJ,QAAQK,IAAI,CAAC;IACd,GAAG,KAAK;AACT","file":"clean-old-posts.js","sourceRoot":"../../built"}