{"version":3,"sources":["tools/clean-old-renotes.js"],"names":["main","days","limit","Date","now","id","ObjectID","genMeid7","favs","Favorite","find","noteId","$lt","users","User","host","$ne","fields","_id","prs","u","user","findOne","console","log","length","username","exIds","concat","map","x","pinnedNoteIds","notes","Note","$and","userId","$nin","$or","renoteCount","$exists","repliesCount","reactionCounts","replyId","renoteId","note","target","_renote","update","$inc","quoteCount","isQuote","remove","args","process","argv","slice","then","setTimeout","exit"],"mappings":";sBAAiB;sBACA;yBACQ;0BACJ;uBACE;uBACE;yBACL;AAEpB,eAAeA,KAAKC,OAAO,EAAE;IAC5B,MAAMC,QAAQ,IAAIC,KAAKA,KAAKC,GAAG,KAAMH,OAAO,OAAO;IACnD,MAAMI,KAAK,IAAIC,iBAAQ,CAACC,IAAAA,eAAQ,EAACL;IAEjC,OAAO;IACP,MAAMM,OAAO,MAAMC,iBAAQ,CAACC,IAAI,CAAC;QAChCC,QAAQ;YAAEC,KAAKP;QAAG;IACnB;IAEA,eAAe;IACf,MAAMQ,QAAQ,MAAMC,aAAI,CAACJ,IAAI,CAAC;QAC7BK,MAAM;YAAEC,KAAK;QAAK;IACnB,GAAG;QACFC,QAAQ;YACPC,KAAK;QACN;IACD;IAEA,IAAIC,MAAM;IAEV,KAAK,MAAMC,KAAKP,MAAO;QACtBM;QAEA,MAAME,OAAO,MAAMP,aAAI,CAACQ,OAAO,CAAC;YAC/BJ,KAAKE,EAAEF,GAAG;QACX;QAEA,IAAI,CAACG,MAAM;QAEXE,QAAQC,GAAG,CAAC,CAAC,KAAK,EAAEL,IAAI,CAAC,EAAEN,MAAMY,MAAM,CAAC,GAAG,EAAEJ,KAAKK,QAAQ,CAAC,CAAC,EAAEL,KAAKN,IAAI,CAAC,CAAC;QAEzE,MAAMY,QAAQC,IAAAA,aAAM,EAAC;YACpBpB,KAAKqB,GAAG,CAACC,CAAAA,IAAKA,EAAEnB,MAAM;YACrBU,KAAKU,aAAa,IAAI,EAAE;SACzB;QAED,MAAMC,QAAQ,MAAMC,aAAI,CAACvB,IAAI,CAAC;YAC7BwB,MAAM;gBACL;oBACCC,QAAQd,KAAKH,GAAG;gBACjB;gBAEA;oBACCA,KAAK;wBAAEkB,MAAMT;oBAAM;gBACpB;gBACA;oBACCT,KAAK;wBAAEN,KAAKP;oBAAG;gBAChB;gBAEA;oBACCgC,KAAK;wBACJ;4BAAEC,aAAa;gCAAEC,SAAS;4BAAM;wBAAE;wBAClC;4BAAED,aAAa;wBAAE;qBACjB;gBACF;gBACA;oBACCE,cAAc;wBAAED,SAAS;oBAAM;gBAChC;gBACA;oBACCE,gBAAgB;wBAAEF,SAAS;oBAAM;gBAClC;gBAEA;oBACCG,SAAS;gBACV;gBACA;oBACCC,UAAU;wBAAE3B,KAAK;oBAAK;gBACvB;aACA;QACF;QAEA,KAAK,MAAM4B,QAAQZ,MAAO;gBAGnBY,eAIFC;YANJ,kCAAkC;YAClC,MAAMA,SAAS,MAAM/B,aAAI,CAACQ,OAAO,CAAC;gBACjCJ,GAAG,GAAE0B,gBAAAA,KAAKE,OAAO,cAAZF,oCAAAA,cAAcT,MAAM;YAC1B;YAEA,IAAI,CAACU,QAAQ;YACb,IAAIA,EAAAA,UAAAA,oBAAAA,8BAAAA,QAAQ9B,IAAI,KAAI,MAAM;YAC1B,YAAY;YAEZQ,QAAQC,GAAG,CAAC,CAAC,iBAAiB,EAAEoB,KAAK1B,GAAG,CAAC,CAAC;YAE1C,MAAMe,aAAI,CAACc,MAAM,CAAC;gBAAE7B,KAAK0B,KAAKD,QAAQ;YAAC,GAAG;gBACzCK,MAAM;oBACLV,aAAa,CAAC;oBACdW,YAAYC,IAAAA,gBAAO,EAACN,QAAQ,CAAC,IAAI;gBAClC;YACD;YAEA,MAAMX,aAAI,CAACkB,MAAM,CAAC;gBAAEjC,KAAK0B,KAAK1B,GAAG;YAAC;QACnC;IACD;AACD;AAEA,MAAMkC,OAAOC,QAAQC,IAAI,CAACC,KAAK,CAAC;AAEhCvD,KAAKoD,IAAI,CAAC,EAAE,EAAEI,IAAI,CAAC;IAClBjC,QAAQC,GAAG,CAAC;IACZiC,WAAW;QACVJ,QAAQK,IAAI,CAAC;IACd,GAAG,KAAK;AACT","file":"clean-old-renotes.js","sourceRoot":"../../built"}