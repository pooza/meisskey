開発環境手順
================================================================

## 動かす方法

NODE_ENVが設定不要な以外はほぼsetup手順と同じです

依存パッケージをインストールしてconfigを設定してから
```
yarn install
yarn build
yarn start
```

## コードを変更した後に変更を確認する方法

バージョンを変更する必要がありますが、developmentの場合は自動的にバージョンが設定されます。  
ビルド後に5秒開けて2回リロードすれば必ずクライアントが更新されます。 ※このフォークは  
なお、右下に「新しいバージョンが利用可能です」と出ている場合は1回リロードするだけで済みます。

## 変更したコードを公開インスタンスで動かす場合

`package.json`の`version`を変更する必要があります。

また、ソース公開用に公開インスタンスで表示されるリポジトリURLを変更したい場合は`src/const.json`から設定が出来ます。

## テストを動かす方法

1. テスト用configをコピー

	`cp -i .circleci/misskey/test.yml .config/test.yml`

2. DBを準備

	`docker run --rm -p 57010:27017 mongo:4.4-bionic` などで上げてしまうと楽  
	
	他のDBを使う場合は適宜`.config/test.yml`を変更してください  
	その場合、DB内のデータは削除されてしまうため専用のDBを使用してください

3. テストを実行

	`yarn test`

	※ build後に実行する必要があります


